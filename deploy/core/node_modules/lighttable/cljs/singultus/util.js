// Compiled by ClojureScript 1.10.844 {}
goog.provide('singultus.util');
goog.require('cljs.core');
goog.require('clojure.string');
singultus.util._STAR_base_url_STAR_ = null;
singultus.util.as_str = (function singultus$util$as_str(var_args){
var G__6018 = arguments.length;
switch (G__6018) {
case 0:
return singultus.util.as_str.cljs$core$IFn$_invoke$arity$0();

break;
case 1:
return singultus.util.as_str.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
default:
var args_arr__4792__auto__ = [];
var len__4771__auto___6020 = arguments.length;
var i__4772__auto___6021 = (0);
while(true){
if((i__4772__auto___6021 < len__4771__auto___6020)){
args_arr__4792__auto__.push((arguments[i__4772__auto___6021]));

var G__6022 = (i__4772__auto___6021 + (1));
i__4772__auto___6021 = G__6022;
continue;
} else {
}
break;
}

var argseq__4793__auto__ = (new cljs.core.IndexedSeq(args_arr__4792__auto__.slice((1)),(0),null));
return singultus.util.as_str.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4793__auto__);

}
});

(singultus.util.as_str.cljs$core$IFn$_invoke$arity$0 = (function (){
return "";
}));

(singultus.util.as_str.cljs$core$IFn$_invoke$arity$1 = (function (x){
if((((x instanceof cljs.core.Symbol)) || ((x instanceof cljs.core.Keyword)))){
return cljs.core.name.call(null,x);
} else {
return cljs.core.str.cljs$core$IFn$_invoke$arity$1(x);
}
}));

(singultus.util.as_str.cljs$core$IFn$_invoke$arity$variadic = (function (x,xs){
return (function (s,more){
while(true){
if(cljs.core.truth_(more)){
var G__6023 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(s),singultus.util.as_str.call(null,cljs.core.first.call(null,more))].join('');
var G__6024 = cljs.core.next.call(null,more);
s = G__6023;
more = G__6024;
continue;
} else {
return s;
}
break;
}
}).call(null,singultus.util.as_str.call(null,x),xs);
}));

/** @this {Function} */
(singultus.util.as_str.cljs$lang$applyTo = (function (seq6016){
var G__6017 = cljs.core.first.call(null,seq6016);
var seq6016__$1 = cljs.core.next.call(null,seq6016);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__6017,seq6016__$1);
}));

(singultus.util.as_str.cljs$lang$maxFixedArity = (1));

/**
 * Change special characters into HTML character entities.
 */
singultus.util.escape_html = (function singultus$util$escape_html(text){
return clojure.string.replace.call(null,clojure.string.replace.call(null,clojure.string.replace.call(null,clojure.string.replace.call(null,singultus.util.as_str.call(null,text),"&","&amp;"),"<","&lt;"),">","&gt;"),"\"","&quot;");
});
/**
 * Prepends the base-url to the supplied URI.
 */
singultus.util.to_uri = (function singultus$util$to_uri(uri){
if(cljs.core.truth_(cljs.core.re_matches.call(null,/^\w+:.*/,uri))){
return uri;
} else {
return [cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util._STAR_base_url_STAR_),cljs.core.str.cljs$core$IFn$_invoke$arity$1(uri)].join('');
}
});
singultus.util.url_encode_component = (function singultus$util$url_encode_component(s){

return encodeURIComponent(singultus.util.as_str.call(null,s));
});
/**
 * Turn a map of parameters into a urlencoded string.
 */
singultus.util.url_encode = (function singultus$util$url_encode(params){
return clojure.string.join.call(null,"&",(function (){var iter__4564__auto__ = (function singultus$util$url_encode_$_iter__6025(s__6026){
return (new cljs.core.LazySeq(null,(function (){
var s__6026__$1 = s__6026;
while(true){
var temp__5753__auto__ = cljs.core.seq.call(null,s__6026__$1);
if(temp__5753__auto__){
var s__6026__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,s__6026__$2)){
var c__4562__auto__ = cljs.core.chunk_first.call(null,s__6026__$2);
var size__4563__auto__ = cljs.core.count.call(null,c__4562__auto__);
var b__6028 = cljs.core.chunk_buffer.call(null,size__4563__auto__);
if((function (){var i__6027 = (0);
while(true){
if((i__6027 < size__4563__auto__)){
var vec__6029 = cljs.core._nth.call(null,c__4562__auto__,i__6027);
var k = cljs.core.nth.call(null,vec__6029,(0),null);
var v = cljs.core.nth.call(null,vec__6029,(1),null);
cljs.core.chunk_append.call(null,b__6028,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util.url_encode_component.call(null,k)),"=",cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util.url_encode_component.call(null,v))].join(''));

var G__6035 = (i__6027 + (1));
i__6027 = G__6035;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__6028),singultus$util$url_encode_$_iter__6025.call(null,cljs.core.chunk_rest.call(null,s__6026__$2)));
} else {
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__6028),null);
}
} else {
var vec__6032 = cljs.core.first.call(null,s__6026__$2);
var k = cljs.core.nth.call(null,vec__6032,(0),null);
var v = cljs.core.nth.call(null,vec__6032,(1),null);
return cljs.core.cons.call(null,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util.url_encode_component.call(null,k)),"=",cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util.url_encode_component.call(null,v))].join(''),singultus$util$url_encode_$_iter__6025.call(null,cljs.core.rest.call(null,s__6026__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4564__auto__.call(null,params);
})());
});
/**
 * Creates a URL string from a variable list of arguments and an optional
 *   parameter map as the last argument. For example:
 *  (url "/group/" 4 "/products" {:page 9})
 *  => "/group/4/products?page=9"
 */
singultus.util.url = (function singultus$util$url(var_args){
var args__4777__auto__ = [];
var len__4771__auto___6037 = arguments.length;
var i__4772__auto___6038 = (0);
while(true){
if((i__4772__auto___6038 < len__4771__auto___6037)){
args__4777__auto__.push((arguments[i__4772__auto___6038]));

var G__6039 = (i__4772__auto___6038 + (1));
i__4772__auto___6038 = G__6039;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((0) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((0)),(0),null)):null);
return singultus.util.url.cljs$core$IFn$_invoke$arity$variadic(argseq__4778__auto__);
});

(singultus.util.url.cljs$core$IFn$_invoke$arity$variadic = (function (args){
var params = cljs.core.last.call(null,args);
var args__$1 = cljs.core.butlast.call(null,args);
return cljs.core.str.cljs$core$IFn$_invoke$arity$1(singultus.util.to_uri.call(null,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.apply.call(null,cljs.core.str,args__$1)),cljs.core.str.cljs$core$IFn$_invoke$arity$1(((cljs.core.map_QMARK_.call(null,params))?["?",singultus.util.url_encode.call(null,params)].join(''):params))].join('')));
}));

(singultus.util.url.cljs$lang$maxFixedArity = (0));

/** @this {Function} */
(singultus.util.url.cljs$lang$applyTo = (function (seq6036){
var self__4759__auto__ = this;
return self__4759__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq.call(null,seq6036));
}));


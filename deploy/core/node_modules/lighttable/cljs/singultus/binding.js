// Compiled by ClojureScript 1.10.844 {}
goog.provide('singultus.binding');
goog.require('cljs.core');
goog.require('clojure.set');

/**
* @constructor
 * @implements {cljs.core.IWatchable}
 * @implements {cljs.core.IEquiv}
 * @implements {cljs.core.IHash}
 * @implements {cljs.core.IDeref}
 * @implements {cljs.core.IPrintWithWriter}
*/
singultus.binding.SubAtom = (function (atm,path,prevhash,watches,key){
this.atm = atm;
this.path = path;
this.prevhash = prevhash;
this.watches = watches;
this.key = key;
this.cljs$lang$protocol_mask$partition0$ = 2153807872;
this.cljs$lang$protocol_mask$partition1$ = 2;
});
(singultus.binding.SubAtom.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (o,other){
var self__ = this;
var o__$1 = this;
return (o__$1 === other);
}));

(singultus.binding.SubAtom.prototype.cljs$core$IDeref$_deref$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
if(cljs.core.truth_(self__.atm)){
return cljs.core.get_in.call(null,cljs.core.deref.call(null,self__.atm),self__.path);
} else {
return null;
}
}));

(singultus.binding.SubAtom.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (this$,writer,opts){
var self__ = this;
var this$__$1 = this;
return cljs.core._write.call(null,writer,["#<SubAtom: ",cljs.core.pr_str.call(null,cljs.core.get_in.call(null,cljs.core.deref.call(null,self__.atm),self__.path)),">"].join(''));
}));

(singultus.binding.SubAtom.prototype.cljs$core$IWatchable$_notify_watches$arity$3 = (function (this$,oldval,newval){
var self__ = this;
var this$__$1 = this;
var seq__5408 = cljs.core.seq.call(null,self__.watches);
var chunk__5409 = null;
var count__5410 = (0);
var i__5411 = (0);
while(true){
if((i__5411 < count__5410)){
var vec__5418 = cljs.core._nth.call(null,chunk__5409,i__5411);
var key__$1 = cljs.core.nth.call(null,vec__5418,(0),null);
var f = cljs.core.nth.call(null,vec__5418,(1),null);
f.call(null,key__$1,this$__$1,oldval,newval);


var G__5424 = seq__5408;
var G__5425 = chunk__5409;
var G__5426 = count__5410;
var G__5427 = (i__5411 + (1));
seq__5408 = G__5424;
chunk__5409 = G__5425;
count__5410 = G__5426;
i__5411 = G__5427;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__5408);
if(temp__5753__auto__){
var seq__5408__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5408__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__5408__$1);
var G__5428 = cljs.core.chunk_rest.call(null,seq__5408__$1);
var G__5429 = c__4591__auto__;
var G__5430 = cljs.core.count.call(null,c__4591__auto__);
var G__5431 = (0);
seq__5408 = G__5428;
chunk__5409 = G__5429;
count__5410 = G__5430;
i__5411 = G__5431;
continue;
} else {
var vec__5421 = cljs.core.first.call(null,seq__5408__$1);
var key__$1 = cljs.core.nth.call(null,vec__5421,(0),null);
var f = cljs.core.nth.call(null,vec__5421,(1),null);
f.call(null,key__$1,this$__$1,oldval,newval);


var G__5432 = cljs.core.next.call(null,seq__5408__$1);
var G__5433 = null;
var G__5434 = (0);
var G__5435 = (0);
seq__5408 = G__5432;
chunk__5409 = G__5433;
count__5410 = G__5434;
i__5411 = G__5435;
continue;
}
} else {
return null;
}
}
break;
}
}));

(singultus.binding.SubAtom.prototype.cljs$core$IWatchable$_add_watch$arity$3 = (function (this$,key__$1,f){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(f)){
return (this$__$1.watches = cljs.core.assoc.call(null,self__.watches,key__$1,f));
} else {
return null;
}
}));

(singultus.binding.SubAtom.prototype.cljs$core$IWatchable$_remove_watch$arity$2 = (function (this$,key__$1){
var self__ = this;
var this$__$1 = this;
return (this$__$1.watches = cljs.core.dissoc.call(null,self__.watches,key__$1));
}));

(singultus.binding.SubAtom.prototype.cljs$core$IHash$_hash$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return goog.getUid(this$__$1);
}));

(singultus.binding.SubAtom.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"atm","atm",-1963551835,null),new cljs.core.Symbol(null,"path","path",1452340359,null),new cljs.core.Symbol(null,"prevhash","prevhash",1446045952,null),new cljs.core.Symbol(null,"watches","watches",1367433992,null),new cljs.core.Symbol(null,"key","key",124488940,null)], null);
}));

(singultus.binding.SubAtom.cljs$lang$type = true);

(singultus.binding.SubAtom.cljs$lang$ctorStr = "singultus.binding/SubAtom");

(singultus.binding.SubAtom.cljs$lang$ctorPrWriter = (function (this__4404__auto__,writer__4405__auto__,opt__4406__auto__){
return cljs.core._write.call(null,writer__4405__auto__,"singultus.binding/SubAtom");
}));

/**
 * Positional factory function for singultus.binding/SubAtom.
 */
singultus.binding.__GT_SubAtom = (function singultus$binding$__GT_SubAtom(atm,path,prevhash,watches,key){
return (new singultus.binding.SubAtom(atm,path,prevhash,watches,key));
});

singultus.binding.subatom = (function singultus$binding$subatom(atm,path){
var path__$1 = ((cljs.core.coll_QMARK_.call(null,path))?path:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [path], null));
var vec__5436 = (((atm instanceof singultus.binding.SubAtom))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [atm.atm,cljs.core.concat.call(null,atm.path,path__$1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [atm,path__$1], null));
var atm__$1 = cljs.core.nth.call(null,vec__5436,(0),null);
var path__$2 = cljs.core.nth.call(null,vec__5436,(1),null);
var k = cljs.core.gensym.call(null,"subatom");
var sa = (new singultus.binding.SubAtom(atm__$1,path__$2,cljs.core.hash.call(null,cljs.core.get_in.call(null,cljs.core.deref.call(null,atm__$1),path__$2)),null,k));
cljs.core.add_watch.call(null,atm__$1,k,(function (_,___$1,ov,nv){
var latest = cljs.core.get_in.call(null,nv,path__$2);
var prev = cljs.core.get_in.call(null,ov,path__$2);
var latest_hash = cljs.core.hash.call(null,latest);
if(((cljs.core.not_EQ_.call(null,sa.prevhash,latest_hash)) && (cljs.core.not_EQ_.call(null,prev,latest)))){
(sa.prevhash = latest_hash);

return cljs.core._notify_watches.call(null,sa,cljs.core.get_in.call(null,ov,path__$2),latest);
} else {
return null;
}
}));

return sa;
});
/**
 * Sets the value of atom to newval without regard for the
 *   current value. Returns newval.
 */
singultus.binding.sub_reset_BANG_ = (function singultus$binding$sub_reset_BANG_(sa,new_value){
cljs.core.swap_BANG_.call(null,sa.atm,cljs.core.assoc_in,sa.path,new_value);

return new_value;
});
/**
 * Atomically swaps the value of atom to be:
 *   (apply f current-value-of-atom args). Note that f may be called
 *   multiple times, and thus should be free of side effects.  Returns
 *   the value that was swapped in.
 */
singultus.binding.sub_swap_BANG_ = (function singultus$binding$sub_swap_BANG_(var_args){
var G__5446 = arguments.length;
switch (G__5446) {
case 2:
return singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
case 3:
return singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));

break;
case 4:
return singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$4((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]));

break;
case 5:
return singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$5((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]),(arguments[(4)]));

break;
default:
var args_arr__4792__auto__ = [];
var len__4771__auto___5448 = arguments.length;
var i__4772__auto___5449 = (0);
while(true){
if((i__4772__auto___5449 < len__4771__auto___5448)){
args_arr__4792__auto__.push((arguments[i__4772__auto___5449]));

var G__5450 = (i__4772__auto___5449 + (1));
i__4772__auto___5449 = G__5450;
continue;
} else {
}
break;
}

var argseq__4793__auto__ = (new cljs.core.IndexedSeq(args_arr__4792__auto__.slice((5)),(0),null));
return singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]),(arguments[(4)]),argseq__4793__auto__);

}
});

(singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$2 = (function (sa,f){
return singultus.binding.sub_reset_BANG_.call(null,sa,f.call(null,cljs.core.deref.call(null,sa)));
}));

(singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$3 = (function (sa,f,x){
return singultus.binding.sub_reset_BANG_.call(null,sa,f.call(null,cljs.core.deref.call(null,sa),x));
}));

(singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$4 = (function (sa,f,x,y){
return singultus.binding.sub_reset_BANG_.call(null,sa,f.call(null,cljs.core.deref.call(null,sa),x,y));
}));

(singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$5 = (function (sa,f,x,y,z){
return singultus.binding.sub_reset_BANG_.call(null,sa,f.call(null,cljs.core.deref.call(null,sa),x,y,z));
}));

(singultus.binding.sub_swap_BANG_.cljs$core$IFn$_invoke$arity$variadic = (function (sa,f,x,y,z,more){
return singultus.binding.sub_reset_BANG_.call(null,sa,cljs.core.apply.call(null,f,cljs.core.deref.call(null,sa),x,y,z,more));
}));

/** @this {Function} */
(singultus.binding.sub_swap_BANG_.cljs$lang$applyTo = (function (seq5440){
var G__5441 = cljs.core.first.call(null,seq5440);
var seq5440__$1 = cljs.core.next.call(null,seq5440);
var G__5442 = cljs.core.first.call(null,seq5440__$1);
var seq5440__$2 = cljs.core.next.call(null,seq5440__$1);
var G__5443 = cljs.core.first.call(null,seq5440__$2);
var seq5440__$3 = cljs.core.next.call(null,seq5440__$2);
var G__5444 = cljs.core.first.call(null,seq5440__$3);
var seq5440__$4 = cljs.core.next.call(null,seq5440__$3);
var G__5445 = cljs.core.first.call(null,seq5440__$4);
var seq5440__$5 = cljs.core.next.call(null,seq5440__$4);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__5441,G__5442,G__5443,G__5444,G__5445,seq5440__$5);
}));

(singultus.binding.sub_swap_BANG_.cljs$lang$maxFixedArity = (5));

singultus.binding.sub_destroy_BANG_ = (function singultus$binding$sub_destroy_BANG_(sa){
cljs.core.remove_watch.call(null,sa.atm,sa.key);

(sa.watches = null);

return (sa.atm = null);
});

/**
 * @interface
 */
singultus.binding.computable = function(){};

var singultus$binding$computable$_depend$dyn_5451 = (function (this$,atm){
var x__4463__auto__ = (((this$ == null))?null:this$);
var m__4464__auto__ = (singultus.binding._depend[goog.typeOf(x__4463__auto__)]);
if((!((m__4464__auto__ == null)))){
return m__4464__auto__.call(null,this$,atm);
} else {
var m__4461__auto__ = (singultus.binding._depend["_"]);
if((!((m__4461__auto__ == null)))){
return m__4461__auto__.call(null,this$,atm);
} else {
throw cljs.core.missing_protocol.call(null,"computable.-depend",this$);
}
}
});
/**
 * depend on an atom
 */
singultus.binding._depend = (function singultus$binding$_depend(this$,atm){
if((((!((this$ == null)))) && ((!((this$.singultus$binding$computable$_depend$arity$2 == null)))))){
return this$.singultus$binding$computable$_depend$arity$2(this$,atm);
} else {
return singultus$binding$computable$_depend$dyn_5451.call(null,this$,atm);
}
});

var singultus$binding$computable$_compute$dyn_5452 = (function (this$){
var x__4463__auto__ = (((this$ == null))?null:this$);
var m__4464__auto__ = (singultus.binding._compute[goog.typeOf(x__4463__auto__)]);
if((!((m__4464__auto__ == null)))){
return m__4464__auto__.call(null,this$);
} else {
var m__4461__auto__ = (singultus.binding._compute["_"]);
if((!((m__4461__auto__ == null)))){
return m__4461__auto__.call(null,this$);
} else {
throw cljs.core.missing_protocol.call(null,"computable.-compute",this$);
}
}
});
/**
 * compute the latest value
 */
singultus.binding._compute = (function singultus$binding$_compute(this$){
if((((!((this$ == null)))) && ((!((this$.singultus$binding$computable$_compute$arity$1 == null)))))){
return this$.singultus$binding$computable$_compute$arity$1(this$);
} else {
return singultus$binding$computable$_compute$dyn_5452.call(null,this$);
}
});


/**
* @constructor
 * @implements {cljs.core.IWatchable}
 * @implements {cljs.core.IEquiv}
 * @implements {cljs.core.IHash}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IDeref}
 * @implements {singultus.binding.computable}
 * @implements {cljs.core.IPrintWithWriter}
*/
singultus.binding.Computed = (function (atms,value,func,watches,key,meta){
this.atms = atms;
this.value = value;
this.func = func;
this.watches = watches;
this.key = key;
this.meta = meta;
this.cljs$lang$protocol_mask$partition0$ = 2153938944;
this.cljs$lang$protocol_mask$partition1$ = 2;
});
(singultus.binding.Computed.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (o,other){
var self__ = this;
var o__$1 = this;
return (o__$1 === other);
}));

(singultus.binding.Computed.prototype.cljs$core$IDeref$_deref$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.value;
}));

(singultus.binding.Computed.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (this$,writer,opts){
var self__ = this;
var this$__$1 = this;
return cljs.core._write.call(null,writer,["#<Computed: ",cljs.core.pr_str.call(null,self__.value),">"].join(''));
}));

(singultus.binding.Computed.prototype.cljs$core$IWatchable$_notify_watches$arity$3 = (function (this$,oldval,newval){
var self__ = this;
var this$__$1 = this;
var seq__5453 = cljs.core.seq.call(null,self__.watches);
var chunk__5454 = null;
var count__5455 = (0);
var i__5456 = (0);
while(true){
if((i__5456 < count__5455)){
var vec__5463 = cljs.core._nth.call(null,chunk__5454,i__5456);
var key__$1 = cljs.core.nth.call(null,vec__5463,(0),null);
var f = cljs.core.nth.call(null,vec__5463,(1),null);
f.call(null,key__$1,this$__$1,oldval,newval);


var G__5469 = seq__5453;
var G__5470 = chunk__5454;
var G__5471 = count__5455;
var G__5472 = (i__5456 + (1));
seq__5453 = G__5469;
chunk__5454 = G__5470;
count__5455 = G__5471;
i__5456 = G__5472;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__5453);
if(temp__5753__auto__){
var seq__5453__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5453__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__5453__$1);
var G__5473 = cljs.core.chunk_rest.call(null,seq__5453__$1);
var G__5474 = c__4591__auto__;
var G__5475 = cljs.core.count.call(null,c__4591__auto__);
var G__5476 = (0);
seq__5453 = G__5473;
chunk__5454 = G__5474;
count__5455 = G__5475;
i__5456 = G__5476;
continue;
} else {
var vec__5466 = cljs.core.first.call(null,seq__5453__$1);
var key__$1 = cljs.core.nth.call(null,vec__5466,(0),null);
var f = cljs.core.nth.call(null,vec__5466,(1),null);
f.call(null,key__$1,this$__$1,oldval,newval);


var G__5477 = cljs.core.next.call(null,seq__5453__$1);
var G__5478 = null;
var G__5479 = (0);
var G__5480 = (0);
seq__5453 = G__5477;
chunk__5454 = G__5478;
count__5455 = G__5479;
i__5456 = G__5480;
continue;
}
} else {
return null;
}
}
break;
}
}));

(singultus.binding.Computed.prototype.cljs$core$IWatchable$_add_watch$arity$3 = (function (this$,key__$1,f){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(f)){
return (this$__$1.watches = cljs.core.assoc.call(null,self__.watches,key__$1,f));
} else {
return null;
}
}));

(singultus.binding.Computed.prototype.cljs$core$IWatchable$_remove_watch$arity$2 = (function (this$,key__$1){
var self__ = this;
var this$__$1 = this;
return (this$__$1.watches = cljs.core.dissoc.call(null,self__.watches,key__$1));
}));

(singultus.binding.Computed.prototype.cljs$core$IHash$_hash$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return goog.getUid(this$__$1);
}));

(singultus.binding.Computed.prototype.cljs$core$IMeta$_meta$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.meta;
}));

(singultus.binding.Computed.prototype.singultus$binding$computable$ = cljs.core.PROTOCOL_SENTINEL);

(singultus.binding.Computed.prototype.singultus$binding$computable$_depend$arity$2 = (function (this$,atm){
var self__ = this;
var this$__$1 = this;
(this$__$1.atms = cljs.core.conj.call(null,this$__$1.atms,atm));

return cljs.core.add_watch.call(null,atm,self__.key,(function (_,___$1,___$2,___$3){
return singultus.binding._compute.call(null,this$__$1);
}));
}));

(singultus.binding.Computed.prototype.singultus$binding$computable$_compute$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
var old = this$__$1.value;
var nv = cljs.core.apply.call(null,self__.func,cljs.core.map.call(null,cljs.core.deref,self__.atms));
(this$__$1.value = nv);

return cljs.core._notify_watches.call(null,this$__$1,old,nv);
}));

(singultus.binding.Computed.getBasis = (function (){
return new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"atms","atms",-855465715,null),new cljs.core.Symbol(null,"value","value",1946509744,null),new cljs.core.Symbol(null,"func","func",1401825487,null),new cljs.core.Symbol(null,"watches","watches",1367433992,null),new cljs.core.Symbol(null,"key","key",124488940,null),new cljs.core.Symbol(null,"meta","meta",-1154898805,null)], null);
}));

(singultus.binding.Computed.cljs$lang$type = true);

(singultus.binding.Computed.cljs$lang$ctorStr = "singultus.binding/Computed");

(singultus.binding.Computed.cljs$lang$ctorPrWriter = (function (this__4404__auto__,writer__4405__auto__,opt__4406__auto__){
return cljs.core._write.call(null,writer__4405__auto__,"singultus.binding/Computed");
}));

/**
 * Positional factory function for singultus.binding/Computed.
 */
singultus.binding.__GT_Computed = (function singultus$binding$__GT_Computed(atms,value,func,watches,key,meta){
return (new singultus.binding.Computed(atms,value,func,watches,key,meta));
});

singultus.binding.computed = (function singultus$binding$computed(atms,func){
var k = cljs.core.gensym.call(null,"computed");
var neue = (new singultus.binding.Computed(cljs.core.PersistentVector.EMPTY,null,func,null,k,null));
singultus.binding._compute.call(null,neue);

var seq__5481_5485 = cljs.core.seq.call(null,atms);
var chunk__5482_5486 = null;
var count__5483_5487 = (0);
var i__5484_5488 = (0);
while(true){
if((i__5484_5488 < count__5483_5487)){
var atm_5489 = cljs.core._nth.call(null,chunk__5482_5486,i__5484_5488);
singultus.binding._depend.call(null,neue,atm_5489);


var G__5490 = seq__5481_5485;
var G__5491 = chunk__5482_5486;
var G__5492 = count__5483_5487;
var G__5493 = (i__5484_5488 + (1));
seq__5481_5485 = G__5490;
chunk__5482_5486 = G__5491;
count__5483_5487 = G__5492;
i__5484_5488 = G__5493;
continue;
} else {
var temp__5753__auto___5494 = cljs.core.seq.call(null,seq__5481_5485);
if(temp__5753__auto___5494){
var seq__5481_5495__$1 = temp__5753__auto___5494;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5481_5495__$1)){
var c__4591__auto___5496 = cljs.core.chunk_first.call(null,seq__5481_5495__$1);
var G__5497 = cljs.core.chunk_rest.call(null,seq__5481_5495__$1);
var G__5498 = c__4591__auto___5496;
var G__5499 = cljs.core.count.call(null,c__4591__auto___5496);
var G__5500 = (0);
seq__5481_5485 = G__5497;
chunk__5482_5486 = G__5498;
count__5483_5487 = G__5499;
i__5484_5488 = G__5500;
continue;
} else {
var atm_5501 = cljs.core.first.call(null,seq__5481_5495__$1);
singultus.binding._depend.call(null,neue,atm_5501);


var G__5502 = cljs.core.next.call(null,seq__5481_5495__$1);
var G__5503 = null;
var G__5504 = (0);
var G__5505 = (0);
seq__5481_5485 = G__5502;
chunk__5482_5486 = G__5503;
count__5483_5487 = G__5504;
i__5484_5488 = G__5505;
continue;
}
} else {
}
}
break;
}

return neue;
});
singultus.binding.compute = (function singultus$binding$compute(compu){
return singultus.binding._compute.call(null,compu);
});
singultus.binding.depend_on = (function singultus$binding$depend_on(compu,atm){
return singultus.binding._depend.call(null,compu,atm);
});
singultus.binding.notify = (function singultus$binding$notify(w,o,v){
return cljs.core._notify_watches.call(null,w,o,v);
});

/**
 * @interface
 */
singultus.binding.bindable_coll = function(){};


/**
 * @interface
 */
singultus.binding.bindable = function(){};

var singultus$binding$bindable$_value$dyn_5506 = (function (this$){
var x__4463__auto__ = (((this$ == null))?null:this$);
var m__4464__auto__ = (singultus.binding._value[goog.typeOf(x__4463__auto__)]);
if((!((m__4464__auto__ == null)))){
return m__4464__auto__.call(null,this$);
} else {
var m__4461__auto__ = (singultus.binding._value["_"]);
if((!((m__4461__auto__ == null)))){
return m__4461__auto__.call(null,this$);
} else {
throw cljs.core.missing_protocol.call(null,"bindable.-value",this$);
}
}
});
/**
 * get the current value of this binding
 */
singultus.binding._value = (function singultus$binding$_value(this$){
if((((!((this$ == null)))) && ((!((this$.singultus$binding$bindable$_value$arity$1 == null)))))){
return this$.singultus$binding$bindable$_value$arity$1(this$);
} else {
return singultus$binding$bindable$_value$dyn_5506.call(null,this$);
}
});

var singultus$binding$bindable$_on_change$dyn_5507 = (function (this$,func){
var x__4463__auto__ = (((this$ == null))?null:this$);
var m__4464__auto__ = (singultus.binding._on_change[goog.typeOf(x__4463__auto__)]);
if((!((m__4464__auto__ == null)))){
return m__4464__auto__.call(null,this$,func);
} else {
var m__4461__auto__ = (singultus.binding._on_change["_"]);
if((!((m__4461__auto__ == null)))){
return m__4461__auto__.call(null,this$,func);
} else {
throw cljs.core.missing_protocol.call(null,"bindable.-on-change",this$);
}
}
});
/**
 * On change of this binding execute func
 */
singultus.binding._on_change = (function singultus$binding$_on_change(this$,func){
if((((!((this$ == null)))) && ((!((this$.singultus$binding$bindable$_on_change$arity$2 == null)))))){
return this$.singultus$binding$bindable$_on_change$arity$2(this$,func);
} else {
return singultus$binding$bindable$_on_change$dyn_5507.call(null,this$,func);
}
});


/**
* @constructor
 * @implements {singultus.binding.bindable}
*/
singultus.binding.atom_binding = (function (atm,value_func){
this.atm = atm;
this.value_func = value_func;
});
(singultus.binding.atom_binding.prototype.singultus$binding$bindable$ = cljs.core.PROTOCOL_SENTINEL);

(singultus.binding.atom_binding.prototype.singultus$binding$bindable$_value$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.value_func.call(null,cljs.core.deref.call(null,self__.atm));
}));

(singultus.binding.atom_binding.prototype.singultus$binding$bindable$_on_change$arity$2 = (function (this$,func){
var self__ = this;
var this$__$1 = this;
return cljs.core.add_watch.call(null,self__.atm,cljs.core.gensym.call(null,"atom-binding"),(function (){
return func.call(null,singultus.binding._value.call(null,this$__$1));
}));
}));

(singultus.binding.atom_binding.getBasis = (function (){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"atm","atm",-1963551835,null),new cljs.core.Symbol(null,"value-func","value-func",2077951825,null)], null);
}));

(singultus.binding.atom_binding.cljs$lang$type = true);

(singultus.binding.atom_binding.cljs$lang$ctorStr = "singultus.binding/atom-binding");

(singultus.binding.atom_binding.cljs$lang$ctorPrWriter = (function (this__4404__auto__,writer__4405__auto__,opt__4406__auto__){
return cljs.core._write.call(null,writer__4405__auto__,"singultus.binding/atom-binding");
}));

/**
 * Positional factory function for singultus.binding/atom-binding.
 */
singultus.binding.__GT_atom_binding = (function singultus$binding$__GT_atom_binding(atm,value_func){
return (new singultus.binding.atom_binding(atm,value_func));
});


/**
* @constructor
 * @implements {cljs.core.IWatchable}
*/
singultus.binding.notifier = (function (watches){
this.watches = watches;
this.cljs$lang$protocol_mask$partition1$ = 2;
this.cljs$lang$protocol_mask$partition0$ = 0;
});
(singultus.binding.notifier.prototype.cljs$core$IWatchable$_notify_watches$arity$3 = (function (this$,oldval,newval){
var self__ = this;
var this$__$1 = this;
var seq__5508 = cljs.core.seq.call(null,self__.watches);
var chunk__5509 = null;
var count__5510 = (0);
var i__5511 = (0);
while(true){
if((i__5511 < count__5510)){
var vec__5518 = cljs.core._nth.call(null,chunk__5509,i__5511);
var key = cljs.core.nth.call(null,vec__5518,(0),null);
var f = cljs.core.nth.call(null,vec__5518,(1),null);
f.call(null,key,this$__$1,oldval,newval);


var G__5524 = seq__5508;
var G__5525 = chunk__5509;
var G__5526 = count__5510;
var G__5527 = (i__5511 + (1));
seq__5508 = G__5524;
chunk__5509 = G__5525;
count__5510 = G__5526;
i__5511 = G__5527;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__5508);
if(temp__5753__auto__){
var seq__5508__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5508__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__5508__$1);
var G__5528 = cljs.core.chunk_rest.call(null,seq__5508__$1);
var G__5529 = c__4591__auto__;
var G__5530 = cljs.core.count.call(null,c__4591__auto__);
var G__5531 = (0);
seq__5508 = G__5528;
chunk__5509 = G__5529;
count__5510 = G__5530;
i__5511 = G__5531;
continue;
} else {
var vec__5521 = cljs.core.first.call(null,seq__5508__$1);
var key = cljs.core.nth.call(null,vec__5521,(0),null);
var f = cljs.core.nth.call(null,vec__5521,(1),null);
f.call(null,key,this$__$1,oldval,newval);


var G__5532 = cljs.core.next.call(null,seq__5508__$1);
var G__5533 = null;
var G__5534 = (0);
var G__5535 = (0);
seq__5508 = G__5532;
chunk__5509 = G__5533;
count__5510 = G__5534;
i__5511 = G__5535;
continue;
}
} else {
return null;
}
}
break;
}
}));

(singultus.binding.notifier.prototype.cljs$core$IWatchable$_add_watch$arity$3 = (function (this$,key,f){
var self__ = this;
var this$__$1 = this;
return (this$__$1.watches = cljs.core.assoc.call(null,self__.watches,key,f));
}));

(singultus.binding.notifier.prototype.cljs$core$IWatchable$_remove_watch$arity$2 = (function (this$,key){
var self__ = this;
var this$__$1 = this;
return (this$__$1.watches = cljs.core.dissoc.call(null,self__.watches,key));
}));

(singultus.binding.notifier.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"watches","watches",1367433992,null)], null);
}));

(singultus.binding.notifier.cljs$lang$type = true);

(singultus.binding.notifier.cljs$lang$ctorStr = "singultus.binding/notifier");

(singultus.binding.notifier.cljs$lang$ctorPrWriter = (function (this__4404__auto__,writer__4405__auto__,opt__4406__auto__){
return cljs.core._write.call(null,writer__4405__auto__,"singultus.binding/notifier");
}));

/**
 * Positional factory function for singultus.binding/notifier.
 */
singultus.binding.__GT_notifier = (function singultus$binding$__GT_notifier(watches){
return (new singultus.binding.notifier(watches));
});


/**
* @constructor
 * @implements {singultus.binding.bindable}
 * @implements {singultus.binding.bindable_coll}
*/
singultus.binding.bound_collection = (function (atm,notif,opts,stuff){
this.atm = atm;
this.notif = notif;
this.opts = opts;
this.stuff = stuff;
});
(singultus.binding.bound_collection.prototype.singultus$binding$bindable_coll$ = cljs.core.PROTOCOL_SENTINEL);

(singultus.binding.bound_collection.prototype.singultus$binding$bindable$ = cljs.core.PROTOCOL_SENTINEL);

(singultus.binding.bound_collection.prototype.singultus$binding$bindable$_value$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return cljs.core.map.call(null,new cljs.core.Keyword(null,"elem","elem",618631056),cljs.core.vals.call(null,this$__$1.stuff));
}));

(singultus.binding.bound_collection.prototype.singultus$binding$bindable$_on_change$arity$2 = (function (this$,func){
var self__ = this;
var this$__$1 = this;
return cljs.core.add_watch.call(null,self__.notif,cljs.core.gensym.call(null,"bound-coll"),(function (_,___$1,___$2,p__5536){
var vec__5537 = p__5536;
var event = cljs.core.nth.call(null,vec__5537,(0),null);
var el = cljs.core.nth.call(null,vec__5537,(1),null);
var v = cljs.core.nth.call(null,vec__5537,(2),null);
return func.call(null,event,el,v);
}));
}));

(singultus.binding.bound_collection.getBasis = (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"atm","atm",-1963551835,null),new cljs.core.Symbol(null,"notif","notif",-1551848296,null),new cljs.core.Symbol(null,"opts","opts",1795607228,null),new cljs.core.Symbol(null,"stuff","stuff",-411032116,null)], null);
}));

(singultus.binding.bound_collection.cljs$lang$type = true);

(singultus.binding.bound_collection.cljs$lang$ctorStr = "singultus.binding/bound-collection");

(singultus.binding.bound_collection.cljs$lang$ctorPrWriter = (function (this__4404__auto__,writer__4405__auto__,opt__4406__auto__){
return cljs.core._write.call(null,writer__4405__auto__,"singultus.binding/bound-collection");
}));

/**
 * Positional factory function for singultus.binding/bound-collection.
 */
singultus.binding.__GT_bound_collection = (function singultus$binding$__GT_bound_collection(atm,notif,opts,stuff){
return (new singultus.binding.bound_collection(atm,notif,opts,stuff));
});

singultus.binding.opt = (function singultus$binding$opt(bc,k){
return bc.opts.call(null,k);
});
singultus.binding.bc_add = (function singultus$binding$bc_add(bc,path,key){
var sa = singultus.binding.subatom.call(null,bc.atm,path);
var elem = singultus.binding.opt.call(null,bc,new cljs.core.Keyword(null,"as","as",1148689641)).call(null,sa);
(bc.stuff = cljs.core.assoc.call(null,bc.stuff,key,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"elem","elem",618631056),elem,new cljs.core.Keyword(null,"subatom","subatom",-95454370),sa], null)));

return singultus.binding.notify.call(null,bc.notif,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"add","add",235287739),elem,cljs.core.deref.call(null,sa)], null));
});
singultus.binding.bc_remove = (function singultus$binding$bc_remove(bc,key){
var notif = bc.notif;
var prev = bc.stuff.call(null,key);
(bc.stuff = cljs.core.dissoc.call(null,bc.stuff,key));

singultus.binding.notify.call(null,bc.notif,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"remove","remove",-131428414),new cljs.core.Keyword(null,"elem","elem",618631056).cljs$core$IFn$_invoke$arity$1(prev),null], null));

return singultus.binding.sub_destroy_BANG_.call(null,new cljs.core.Keyword(null,"subatom","subatom",-95454370).cljs$core$IFn$_invoke$arity$1(prev));
});
singultus.binding.__GT_indexed = (function singultus$binding$__GT_indexed(coll){
if(cljs.core.map_QMARK_.call(null,coll)){
return cljs.core.seq.call(null,coll);
} else {
if(cljs.core.set_QMARK_.call(null,coll)){
return cljs.core.map.call(null,cljs.core.juxt.call(null,cljs.core.identity,cljs.core.identity),coll);
} else {
return cljs.core.map_indexed.call(null,cljs.core.vector,coll);

}
}
});
singultus.binding.__GT_keyed = (function singultus$binding$__GT_keyed(coll,keyfn){
return cljs.core.into.call(null,cljs.core.PersistentHashSet.EMPTY,cljs.core.map.call(null,keyfn,singultus.binding.__GT_indexed.call(null,coll)));
});
singultus.binding.__GT_path = (function singultus$binding$__GT_path(var_args){
var args__4777__auto__ = [];
var len__4771__auto___5542 = arguments.length;
var i__4772__auto___5543 = (0);
while(true){
if((i__4772__auto___5543 < len__4771__auto___5542)){
args__4777__auto__.push((arguments[i__4772__auto___5543]));

var G__5544 = (i__4772__auto___5543 + (1));
i__4772__auto___5543 = G__5544;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((1) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((1)),(0),null)):null);
return singultus.binding.__GT_path.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4778__auto__);
});

(singultus.binding.__GT_path.cljs$core$IFn$_invoke$arity$variadic = (function (bc,segs){
return cljs.core.concat.call(null,(function (){var or__4160__auto__ = singultus.binding.opt.call(null,bc,new cljs.core.Keyword(null,"path","path",-188191168));
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return cljs.core.PersistentVector.EMPTY;
}
})(),segs);
}));

(singultus.binding.__GT_path.cljs$lang$maxFixedArity = (1));

/** @this {Function} */
(singultus.binding.__GT_path.cljs$lang$applyTo = (function (seq5540){
var G__5541 = cljs.core.first.call(null,seq5540);
var seq5540__$1 = cljs.core.next.call(null,seq5540);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__5541,seq5540__$1);
}));

singultus.binding.bc_compare = (function singultus$binding$bc_compare(bc,neue){
var prev = bc.stuff;
var pset = cljs.core.into.call(null,cljs.core.PersistentHashSet.EMPTY,cljs.core.keys.call(null,prev));
var nset = singultus.binding.__GT_keyed.call(null,neue,singultus.binding.opt.call(null,bc,new cljs.core.Keyword(null,"keyfn","keyfn",780060332)));
var added = cljs.core.into.call(null,cljs.core.sorted_set.call(null),clojure.set.difference.call(null,nset,pset));
var removed = cljs.core.into.call(null,cljs.core.sorted_set.call(null),clojure.set.difference.call(null,pset,nset));
var seq__5545_5553 = cljs.core.seq.call(null,added);
var chunk__5546_5554 = null;
var count__5547_5555 = (0);
var i__5548_5556 = (0);
while(true){
if((i__5548_5556 < count__5547_5555)){
var a_5557 = cljs.core._nth.call(null,chunk__5546_5554,i__5548_5556);
singultus.binding.bc_add.call(null,bc,a_5557,a_5557);


var G__5558 = seq__5545_5553;
var G__5559 = chunk__5546_5554;
var G__5560 = count__5547_5555;
var G__5561 = (i__5548_5556 + (1));
seq__5545_5553 = G__5558;
chunk__5546_5554 = G__5559;
count__5547_5555 = G__5560;
i__5548_5556 = G__5561;
continue;
} else {
var temp__5753__auto___5562 = cljs.core.seq.call(null,seq__5545_5553);
if(temp__5753__auto___5562){
var seq__5545_5563__$1 = temp__5753__auto___5562;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5545_5563__$1)){
var c__4591__auto___5564 = cljs.core.chunk_first.call(null,seq__5545_5563__$1);
var G__5565 = cljs.core.chunk_rest.call(null,seq__5545_5563__$1);
var G__5566 = c__4591__auto___5564;
var G__5567 = cljs.core.count.call(null,c__4591__auto___5564);
var G__5568 = (0);
seq__5545_5553 = G__5565;
chunk__5546_5554 = G__5566;
count__5547_5555 = G__5567;
i__5548_5556 = G__5568;
continue;
} else {
var a_5569 = cljs.core.first.call(null,seq__5545_5563__$1);
singultus.binding.bc_add.call(null,bc,a_5569,a_5569);


var G__5570 = cljs.core.next.call(null,seq__5545_5563__$1);
var G__5571 = null;
var G__5572 = (0);
var G__5573 = (0);
seq__5545_5553 = G__5570;
chunk__5546_5554 = G__5571;
count__5547_5555 = G__5572;
i__5548_5556 = G__5573;
continue;
}
} else {
}
}
break;
}

var seq__5549 = cljs.core.seq.call(null,removed);
var chunk__5550 = null;
var count__5551 = (0);
var i__5552 = (0);
while(true){
if((i__5552 < count__5551)){
var r = cljs.core._nth.call(null,chunk__5550,i__5552);
singultus.binding.bc_remove.call(null,bc,r);


var G__5574 = seq__5549;
var G__5575 = chunk__5550;
var G__5576 = count__5551;
var G__5577 = (i__5552 + (1));
seq__5549 = G__5574;
chunk__5550 = G__5575;
count__5551 = G__5576;
i__5552 = G__5577;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__5549);
if(temp__5753__auto__){
var seq__5549__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__5549__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__5549__$1);
var G__5578 = cljs.core.chunk_rest.call(null,seq__5549__$1);
var G__5579 = c__4591__auto__;
var G__5580 = cljs.core.count.call(null,c__4591__auto__);
var G__5581 = (0);
seq__5549 = G__5578;
chunk__5550 = G__5579;
count__5551 = G__5580;
i__5552 = G__5581;
continue;
} else {
var r = cljs.core.first.call(null,seq__5549__$1);
singultus.binding.bc_remove.call(null,bc,r);


var G__5582 = cljs.core.next.call(null,seq__5549__$1);
var G__5583 = null;
var G__5584 = (0);
var G__5585 = (0);
seq__5549 = G__5582;
chunk__5550 = G__5583;
count__5551 = G__5584;
i__5552 = G__5585;
continue;
}
} else {
return null;
}
}
break;
}
});
singultus.binding.bound_coll = (function singultus$binding$bound_coll(var_args){
var args__4777__auto__ = [];
var len__4771__auto___5595 = arguments.length;
var i__4772__auto___5596 = (0);
while(true){
if((i__4772__auto___5596 < len__4771__auto___5595)){
args__4777__auto__.push((arguments[i__4772__auto___5596]));

var G__5597 = (i__4772__auto___5596 + (1));
i__4772__auto___5596 = G__5597;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((1) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((1)),(0),null)):null);
return singultus.binding.bound_coll.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4778__auto__);
});

(singultus.binding.bound_coll.cljs$core$IFn$_invoke$arity$variadic = (function (atm,p__5588){
var vec__5589 = p__5588;
var path = cljs.core.nth.call(null,vec__5589,(0),null);
var opts = cljs.core.nth.call(null,vec__5589,(1),null);
var vec__5592 = (cljs.core.truth_(opts)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [path,opts], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,path], null));
var path__$1 = cljs.core.nth.call(null,vec__5592,(0),null);
var opts__$1 = cljs.core.nth.call(null,vec__5592,(1),null);
var atm__$1 = ((cljs.core.not.call(null,path__$1))?atm:singultus.binding.subatom.call(null,atm,path__$1));
var opts__$2 = cljs.core.assoc.call(null,opts__$1,new cljs.core.Keyword(null,"path","path",-188191168),path__$1);
var opts__$3 = ((cljs.core.not.call(null,new cljs.core.Keyword(null,"keyfn","keyfn",780060332).cljs$core$IFn$_invoke$arity$1(opts__$2)))?cljs.core.assoc.call(null,opts__$2,new cljs.core.Keyword(null,"keyfn","keyfn",780060332),cljs.core.first):cljs.core.assoc.call(null,opts__$2,new cljs.core.Keyword(null,"keyfn","keyfn",780060332),cljs.core.comp.call(null,new cljs.core.Keyword(null,"keyfn","keyfn",780060332).cljs$core$IFn$_invoke$arity$1(opts__$2),cljs.core.second)));
var bc = (new singultus.binding.bound_collection(atm__$1,(new singultus.binding.notifier(null)),opts__$3,cljs.core.sorted_map.call(null)));
cljs.core.add_watch.call(null,atm__$1,cljs.core.gensym.call(null,"bound-coll"),(function (_,___$1,___$2,neue){
return singultus.binding.bc_compare.call(null,bc,neue);
}));

singultus.binding.bc_compare.call(null,bc,cljs.core.deref.call(null,atm__$1));

return bc;
}));

(singultus.binding.bound_coll.cljs$lang$maxFixedArity = (1));

/** @this {Function} */
(singultus.binding.bound_coll.cljs$lang$applyTo = (function (seq5586){
var G__5587 = cljs.core.first.call(null,seq5586);
var seq5586__$1 = cljs.core.next.call(null,seq5586);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__5587,seq5586__$1);
}));

singultus.binding.map_bound = (function singultus$binding$map_bound(var_args){
var args__4777__auto__ = [];
var len__4771__auto___5605 = arguments.length;
var i__4772__auto___5606 = (0);
while(true){
if((i__4772__auto___5606 < len__4771__auto___5605)){
args__4777__auto__.push((arguments[i__4772__auto___5606]));

var G__5607 = (i__4772__auto___5606 + (1));
i__4772__auto___5606 = G__5607;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((2) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((2)),(0),null)):null);
return singultus.binding.map_bound.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),argseq__4778__auto__);
});

(singultus.binding.map_bound.cljs$core$IFn$_invoke$arity$variadic = (function (as,atm,p__5601){
var vec__5602 = p__5601;
var opts = cljs.core.nth.call(null,vec__5602,(0),null);
var opts__$1 = cljs.core.assoc.call(null,opts,new cljs.core.Keyword(null,"as","as",1148689641),as);
var atm__$1 = ((cljs.core.not.call(null,new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(opts__$1)))?atm:singultus.binding.subatom.call(null,atm,new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(opts__$1)));
var opts__$2 = ((cljs.core.not.call(null,new cljs.core.Keyword(null,"keyfn","keyfn",780060332).cljs$core$IFn$_invoke$arity$1(opts__$1)))?cljs.core.assoc.call(null,opts__$1,new cljs.core.Keyword(null,"keyfn","keyfn",780060332),cljs.core.first):cljs.core.assoc.call(null,opts__$1,new cljs.core.Keyword(null,"keyfn","keyfn",780060332),cljs.core.comp.call(null,new cljs.core.Keyword(null,"keyfn","keyfn",780060332).cljs$core$IFn$_invoke$arity$1(opts__$1),cljs.core.second)));
var bc = (new singultus.binding.bound_collection(atm__$1,(new singultus.binding.notifier(null)),opts__$2,cljs.core.sorted_map.call(null)));
cljs.core.add_watch.call(null,atm__$1,cljs.core.gensym.call(null,"bound-coll"),(function (_,___$1,___$2,neue){
return singultus.binding.bc_compare.call(null,bc,neue);
}));

singultus.binding.bc_compare.call(null,bc,cljs.core.deref.call(null,atm__$1));

return bc;
}));

(singultus.binding.map_bound.cljs$lang$maxFixedArity = (2));

/** @this {Function} */
(singultus.binding.map_bound.cljs$lang$applyTo = (function (seq5598){
var G__5599 = cljs.core.first.call(null,seq5598);
var seq5598__$1 = cljs.core.next.call(null,seq5598);
var G__5600 = cljs.core.first.call(null,seq5598__$1);
var seq5598__$2 = cljs.core.next.call(null,seq5598__$1);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__5599,G__5600,seq5598__$2);
}));

singultus.binding.binding_QMARK_ = (function singultus$binding$binding_QMARK_(b){
if((!((b == null)))){
if(((false) || ((cljs.core.PROTOCOL_SENTINEL === b.singultus$binding$bindable$)))){
return true;
} else {
if((!b.cljs$lang$protocol_mask$partition$)){
return cljs.core.native_satisfies_QMARK_.call(null,singultus.binding.bindable,b);
} else {
return false;
}
}
} else {
return cljs.core.native_satisfies_QMARK_.call(null,singultus.binding.bindable,b);
}
});
singultus.binding.binding_coll_QMARK_ = (function singultus$binding$binding_coll_QMARK_(b){
if((!((b == null)))){
if(((false) || ((cljs.core.PROTOCOL_SENTINEL === b.singultus$binding$bindable_coll$)))){
return true;
} else {
if((!b.cljs$lang$protocol_mask$partition$)){
return cljs.core.native_satisfies_QMARK_.call(null,singultus.binding.bindable_coll,b);
} else {
return false;
}
}
} else {
return cljs.core.native_satisfies_QMARK_.call(null,singultus.binding.bindable_coll,b);
}
});
singultus.binding.deref_QMARK_ = (function singultus$binding$deref_QMARK_(atm){
if((!((atm == null)))){
if((((atm.cljs$lang$protocol_mask$partition0$ & (32768))) || ((cljs.core.PROTOCOL_SENTINEL === atm.cljs$core$IDeref$)))){
return true;
} else {
if((!atm.cljs$lang$protocol_mask$partition0$)){
return cljs.core.native_satisfies_QMARK_.call(null,cljs.core.IDeref,atm);
} else {
return false;
}
}
} else {
return cljs.core.native_satisfies_QMARK_.call(null,cljs.core.IDeref,atm);
}
});
singultus.binding.value = (function singultus$binding$value(b){
return singultus.binding._value.call(null,b);
});
singultus.binding.index = (function singultus$binding$index(sub_atom){
return cljs.core.last.call(null,sub_atom.path);
});
singultus.binding.on_change = (function singultus$binding$on_change(b,func){
return singultus.binding._on_change.call(null,b,func);
});
singultus.binding.bound = (function singultus$binding$bound(var_args){
var args__4777__auto__ = [];
var len__4771__auto___5617 = arguments.length;
var i__4772__auto___5618 = (0);
while(true){
if((i__4772__auto___5618 < len__4771__auto___5617)){
args__4777__auto__.push((arguments[i__4772__auto___5618]));

var G__5619 = (i__4772__auto___5618 + (1));
i__4772__auto___5618 = G__5619;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((1) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((1)),(0),null)):null);
return singultus.binding.bound.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4778__auto__);
});

(singultus.binding.bound.cljs$core$IFn$_invoke$arity$variadic = (function (atm,p__5613){
var vec__5614 = p__5613;
var func = cljs.core.nth.call(null,vec__5614,(0),null);
var func__$1 = (function (){var or__4160__auto__ = func;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return cljs.core.identity;
}
})();
return (new singultus.binding.atom_binding(atm,func__$1));
}));

(singultus.binding.bound.cljs$lang$maxFixedArity = (1));

/** @this {Function} */
(singultus.binding.bound.cljs$lang$applyTo = (function (seq5611){
var G__5612 = cljs.core.first.call(null,seq5611);
var seq5611__$1 = cljs.core.next.call(null,seq5611);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__5612,seq5611__$1);
}));


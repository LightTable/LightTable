// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.sidebar');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.tabs');
goog.require('lt.objs.command');
goog.require('lt.objs.animations');
goog.require('lt.objs.canvas');
goog.require('lt.util.dom');
goog.require('lt.util.cljs');
goog.require('singultus.binding');
lt.objs.sidebar.default_width = (200);
/**
 * 
 */
lt.objs.sidebar.vertical_grip = (function lt$objs$sidebar$vertical_grip(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.vertical-grip","div.vertical-grip",-30981806),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"draggable","draggable",1676206163),"true"], null)], null));
var seq__9255_9271 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dragstart","dragstart",955864218),((function (e__992__auto__){
return (function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-drag","start-drag",463492443));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"dragend","dragend",1096302264),((function (e__992__auto__){
return (function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"end-drag","end-drag",1040662768));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"drag","drag",449951290),((function (e__992__auto__){
return (function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"width!","width!",-1196918001),e);
});})(e__992__auto__))
], null)));
var chunk__9256_9272 = null;
var count__9257_9273 = (0);
var i__9258_9274 = (0);
while(true){
if((i__9258_9274 < count__9257_9273)){
var vec__9265_9275 = cljs.core._nth.call(null,chunk__9256_9272,i__9258_9274);
var ev__993__auto___9276 = cljs.core.nth.call(null,vec__9265_9275,(0),null);
var func__994__auto___9277 = cljs.core.nth.call(null,vec__9265_9275,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9276,func__994__auto___9277);


var G__9278 = seq__9255_9271;
var G__9279 = chunk__9256_9272;
var G__9280 = count__9257_9273;
var G__9281 = (i__9258_9274 + (1));
seq__9255_9271 = G__9278;
chunk__9256_9272 = G__9279;
count__9257_9273 = G__9280;
i__9258_9274 = G__9281;
continue;
} else {
var temp__5753__auto___9282 = cljs.core.seq.call(null,seq__9255_9271);
if(temp__5753__auto___9282){
var seq__9255_9283__$1 = temp__5753__auto___9282;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9255_9283__$1)){
var c__4591__auto___9284 = cljs.core.chunk_first.call(null,seq__9255_9283__$1);
var G__9285 = cljs.core.chunk_rest.call(null,seq__9255_9283__$1);
var G__9286 = c__4591__auto___9284;
var G__9287 = cljs.core.count.call(null,c__4591__auto___9284);
var G__9288 = (0);
seq__9255_9271 = G__9285;
chunk__9256_9272 = G__9286;
count__9257_9273 = G__9287;
i__9258_9274 = G__9288;
continue;
} else {
var vec__9268_9289 = cljs.core.first.call(null,seq__9255_9283__$1);
var ev__993__auto___9290 = cljs.core.nth.call(null,vec__9268_9289,(0),null);
var func__994__auto___9291 = cljs.core.nth.call(null,vec__9268_9289,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9290,func__994__auto___9291);


var G__9292 = cljs.core.next.call(null,seq__9255_9283__$1);
var G__9293 = null;
var G__9294 = (0);
var G__9295 = (0);
seq__9255_9271 = G__9292;
chunk__9256_9272 = G__9293;
count__9257_9273 = G__9294;
i__9258_9274 = G__9295;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.sidebar.__BEH__no_anim_on_drag = (function lt$objs$sidebar$__BEH__no_anim_on_drag(this$){
return lt.objs.animations.off.call(null);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","no-anim-on-drag","lt.objs.sidebar/no-anim-on-drag",410652933),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"start-drag","start-drag",463492443),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__no_anim_on_drag);
/**
 * 
 */
lt.objs.sidebar.__BEH__reanim_on_drop = (function lt$objs$sidebar$__BEH__reanim_on_drop(this$){
return lt.objs.animations.on.call(null);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","reanim-on-drop","lt.objs.sidebar/reanim-on-drop",-1502651388),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"end-drag","end-drag",1040662768),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__reanim_on_drop);
/**
 * 
 */
lt.objs.sidebar.__BEH__width_BANG_ = (function lt$objs$sidebar$__BEH__width_BANG_(this$,e){
if(cljs.core._EQ_.call(null,(0),e.clientX)){
return null;
} else {
var width = ((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"side","side",389652279).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"left","left",-399115937)))?e.clientX:(lt.util.dom.width.call(null,document.body) - e.clientX));
lt.object.merge_BANG_.call(null,lt.objs.tabs.multi,cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.Keyword(null,"side","side",389652279).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),width]));

return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"width","width",-384071477),width,new cljs.core.Keyword(null,"max-width","max-width",-1939924051),width], null));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","width!","lt.objs.sidebar/width!",1654377631),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width!","width!",-1196918001),null], null), null),new cljs.core.Keyword(null,"throttle","throttle",-1860340776),(5),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__width_BANG_);
/**
 * 
 */
lt.objs.sidebar.__BEH__pop_transient = (function lt$objs$sidebar$__BEH__pop_transient(this$){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"close!","close!",-2079310498));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","pop-transient","lt.objs.sidebar/pop-transient",1964854124),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"pop!","pop!",1401052258),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__pop_transient);
/**
 * 
 */
lt.objs.sidebar.__BEH__open_BANG_ = (function lt$objs$sidebar$__BEH__open_BANG_(this$){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"width","width",-384071477),new cljs.core.Keyword(null,"max-width","max-width",-1939924051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"open","open",-1763596448),true], null));

lt.object.merge_BANG_.call(null,lt.objs.tabs.multi,cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.Keyword(null,"side","side",389652279).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),(new cljs.core.Keyword(null,"max-width","max-width",-1939924051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))]));

return lt.util.dom.add_class.call(null,lt.object.__GT_content.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.Keyword(null,"active","active",1895962068));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","open!","lt.objs.sidebar/open!",-1691961252),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1145596908),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__open_BANG_);
/**
 * 
 */
lt.objs.sidebar.__BEH__close_BANG_ = (function lt$objs$sidebar$__BEH__close_BANG_(this$,no_focus){
if(cljs.core.truth_(new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))){
lt.util.dom.remove_class.call(null,lt.object.__GT_content.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.Keyword(null,"active","active",1895962068));
} else {
}

lt.object.merge_BANG_.call(null,lt.objs.tabs.multi,cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.Keyword(null,"side","side",389652279).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),(0)]));

lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"width","width",-384071477),(0),new cljs.core.Keyword(null,"active","active",1895962068),false,new cljs.core.Keyword(null,"open","open",-1763596448),false], null));

if(cljs.core.truth_(no_focus)){
return null;
} else {
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"tabs.focus-active","tabs.focus-active",-2052283963));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","close!","lt.objs.sidebar/close!",-1574097426),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",-2079310498),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__close_BANG_);
/**
 * 
 */
lt.objs.sidebar.__BEH__item_toggled = (function lt$objs$sidebar$__BEH__item_toggled(this$,item,p__9296){
var map__9297 = p__9296;
var map__9297__$1 = cljs.core.__destructure_map.call(null,map__9297);
var force_QMARK_ = cljs.core.get.call(null,map__9297__$1,new cljs.core.Keyword(null,"force?","force?",1839038675));
var transient_QMARK_ = cljs.core.get.call(null,map__9297__$1,new cljs.core.Keyword(null,"transient?","transient?",1694525927));
var soft_QMARK_ = cljs.core.get.call(null,map__9297__$1,new cljs.core.Keyword(null,"soft?","soft?",-1339668477));
if(cljs.core.truth_(((cljs.core.not.call(null,force_QMARK_))?((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),item))?new cljs.core.Keyword(null,"open","open",-1763596448).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)):false):false))){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"close!","close!",-2079310498));
} else {
if(cljs.core.not_EQ_.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),item)){
if(cljs.core.truth_(new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))){
lt.util.dom.remove_class.call(null,lt.object.__GT_content.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.Keyword(null,"active","active",1895962068));
} else {
}

lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),item], null));

lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"open!","open!",1145596908));

if(cljs.core.truth_(soft_QMARK_)){
return null;
} else {
return lt.object.raise.call(null,item,new cljs.core.Keyword(null,"show","show",-576705889));
}
} else {
return null;
}
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","item-toggled","lt.objs.sidebar/item-toggled",-1682068843),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"toggle","toggle",1291842030),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.__BEH__item_toggled);
lt.objs.sidebar.active_content = (function lt$objs$sidebar$active_content(active){
if(cljs.core.truth_(active)){
return lt.object.__GT_content.call(null,active);
} else {
return null;
}
});
lt.objs.sidebar.__GT_width = (function lt$objs$sidebar$__GT_width(width){
return [cljs.core.str.cljs$core$IFn$_invoke$arity$1((function (){var or__4160__auto__ = width;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return (0);
}
})()),"px"].join('');
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","sidebar","lt.objs.sidebar/sidebar",604744314),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar","sidebar",35784458),null], null), null),new cljs.core.Keyword(null,"items","items",1031954938),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"width","width",-384071477),(0),new cljs.core.Keyword(null,"side","side",389652279),new cljs.core.Keyword(null,"left","left",-399115937),new cljs.core.Keyword(null,"transients","transients",122956384),cljs.core.List.EMPTY,new cljs.core.Keyword(null,"max-width","max-width",-1939924051),lt.objs.sidebar.default_width,new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#side","div#side",-617290963),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",-384071477),singultus.binding.bound.call(null,singultus.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"width","width",-384071477)),lt.objs.sidebar.__GT_width)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.content","div.content",-298042649),singultus.binding.bound.call(null,singultus.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068)),lt.objs.sidebar.active_content)], null),lt.objs.sidebar.vertical_grip.call(null,this$)], null);
}));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar","right-bar","lt.objs.sidebar/right-bar",-1634630552),new cljs.core.Keyword(null,"items","items",1031954938),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar","sidebar",35784458),null], null), null),new cljs.core.Keyword(null,"width","width",-384071477),(0),new cljs.core.Keyword(null,"side","side",389652279),new cljs.core.Keyword(null,"right","right",-452581833),new cljs.core.Keyword(null,"max-width","max-width",-1939924051),(300),new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#right-bar","div#right-bar",1222357763),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",-384071477),singultus.binding.bound.call(null,singultus.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"width","width",-384071477)),lt.objs.sidebar.__GT_width)], null)], null),lt.objs.sidebar.vertical_grip.call(null,this$),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.content","div.content",-298042649)], null)], null);
}));
lt.objs.sidebar.sidebar = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar","sidebar","lt.objs.sidebar/sidebar",604744314));
lt.objs.sidebar.rightbar = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar","right-bar","lt.objs.sidebar/right-bar",-1634630552));
lt.objs.canvas.add_BANG_.call(null,lt.objs.sidebar.sidebar);
lt.objs.canvas.add_BANG_.call(null,lt.objs.sidebar.rightbar);
lt.objs.sidebar.add_item = (function lt$objs$sidebar$add_item(bar,item){
lt.object.update_BANG_.call(null,bar,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"items","items",1031954938)], null),cljs.core.assoc,new cljs.core.Keyword(null,"order","order",-1254677256).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,item)),item);

return lt.util.dom.append.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,".content",".content",528321340),lt.object.__GT_content.call(null,bar)),lt.object.__GT_content.call(null,item));
});
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"close-sidebar","close-sidebar",-480192451),new cljs.core.Keyword(null,"desc","desc",2093485764),"Sidebar: close",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",-2079310498));
})], null));

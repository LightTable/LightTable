// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.sidebar.command');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.context');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.command');
goog.require('lt.objs.app');
goog.require('lt.objs.keyboard');
goog.require('lt.util.load');
goog.require('lt.util.dom');
goog.require('lt.util.cljs');
goog.require('clojure.string');
goog.require('singultus.core');
goog.require('singultus.binding');
lt.util.load.js.call(null,"core/node_modules/lighttable/util/fuzzy.js",new cljs.core.Keyword(null,"sync","sync",-624148946));
/**
 * 
 */
lt.objs.sidebar.command.__BEH__op_select_BANG_ = (function lt$objs$sidebar$command$__BEH__op_select_BANG_(this$,idx){
var input = lt.object.__GT_content.call(null,this$);
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select","select",1147833503),lt.util.dom.val.call(null,input));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selected","selected",574897764));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","op-select!","lt.objs.sidebar.command/op-select!",-89736039),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select!","select!",1013647471),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__op_select_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__op_clear_BANG_ = (function lt$objs$sidebar$command$__BEH__op_clear_BANG_(this$){
var input = lt.object.__GT_content.call(null,this$);
lt.util.dom.val.call(null,input,"");

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"change!","change!",850472699),"");
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","op-clear!","lt.objs.sidebar.command/op-clear!",-1959203936),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",-144814418),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__op_clear_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__op_focus_BANG_ = (function lt$objs$sidebar$command$__BEH__op_focus_BANG_(this$){
var input = lt.object.__GT_content.call(null,this$);
lt.util.dom.focus.call(null,input);

return input.select();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","op-focus!","lt.objs.sidebar.command/op-focus!",1034042238),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",-1344984927),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__op_focus_BANG_);
lt.objs.sidebar.command.__GT_value = (function lt$objs$sidebar$command$__GT_value(p__9300){
var map__9301 = p__9300;
var map__9301__$1 = cljs.core.__destructure_map.call(null,map__9301);
var value = cljs.core.get.call(null,map__9301__$1,new cljs.core.Keyword(null,"value","value",305978217));
if(cljs.core.not.call(null,value)){
return "";
} else {
return value;
}
});
lt.objs.sidebar.command.input__GT_value = (function lt$objs$sidebar$command$input__GT_value(this$){
return lt.util.dom.val.call(null,lt.object.__GT_content.call(null,this$));
});
/**
 * 
 */
lt.objs.sidebar.command.op_input = (function lt$objs$sidebar$command$op_input(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.option","input.option",974024973),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),singultus.binding.bound.call(null,this$,new cljs.core.Keyword(null,"placeholder","placeholder",-104873083)),new cljs.core.Keyword(null,"value","value",305978217),singultus.binding.bound.call(null,this$,lt.objs.sidebar.command.__GT_value)], null)], null));
var seq__9302_9318 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (e){
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"options-input","options-input",-2143404893),this$);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (e){
lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"options-input","options-input",-2143404893),this$);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"keyup","keyup",-794526927),((function (e__992__auto__){
return (function (e){
var me = this;
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"change!","change!",850472699),lt.util.dom.val.call(null,me));
});})(e__992__auto__))
], null)));
var chunk__9303_9319 = null;
var count__9304_9320 = (0);
var i__9305_9321 = (0);
while(true){
if((i__9305_9321 < count__9304_9320)){
var vec__9312_9322 = cljs.core._nth.call(null,chunk__9303_9319,i__9305_9321);
var ev__993__auto___9323 = cljs.core.nth.call(null,vec__9312_9322,(0),null);
var func__994__auto___9324 = cljs.core.nth.call(null,vec__9312_9322,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9323,func__994__auto___9324);


var G__9325 = seq__9302_9318;
var G__9326 = chunk__9303_9319;
var G__9327 = count__9304_9320;
var G__9328 = (i__9305_9321 + (1));
seq__9302_9318 = G__9325;
chunk__9303_9319 = G__9326;
count__9304_9320 = G__9327;
i__9305_9321 = G__9328;
continue;
} else {
var temp__5753__auto___9329 = cljs.core.seq.call(null,seq__9302_9318);
if(temp__5753__auto___9329){
var seq__9302_9330__$1 = temp__5753__auto___9329;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9302_9330__$1)){
var c__4591__auto___9331 = cljs.core.chunk_first.call(null,seq__9302_9330__$1);
var G__9332 = cljs.core.chunk_rest.call(null,seq__9302_9330__$1);
var G__9333 = c__4591__auto___9331;
var G__9334 = cljs.core.count.call(null,c__4591__auto___9331);
var G__9335 = (0);
seq__9302_9318 = G__9332;
chunk__9303_9319 = G__9333;
count__9304_9320 = G__9334;
i__9305_9321 = G__9335;
continue;
} else {
var vec__9315_9336 = cljs.core.first.call(null,seq__9302_9330__$1);
var ev__993__auto___9337 = cljs.core.nth.call(null,vec__9315_9336,(0),null);
var func__994__auto___9338 = cljs.core.nth.call(null,vec__9315_9336,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9337,func__994__auto___9338);


var G__9339 = cljs.core.next.call(null,seq__9302_9330__$1);
var G__9340 = null;
var G__9341 = (0);
var G__9342 = (0);
seq__9302_9318 = G__9339;
chunk__9303_9319 = G__9340;
count__9304_9320 = G__9341;
i__9305_9321 = G__9342;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","options-input","lt.objs.sidebar.command/options-input",155693176),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"options-input","options-input",-2143404893),null], null), null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"search",new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$,opts){
lt.object.merge_BANG_.call(null,this$,opts);

return lt.objs.sidebar.command.op_input.call(null,this$);
}));
lt.objs.sidebar.command.options_input = (function lt$objs$sidebar$command$options_input(opts){
var lst = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","options-input","lt.objs.sidebar.command/options-input",155693176),opts);
lt.object.raise.call(null,lst,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));

return lst;
});
lt.objs.sidebar.command.input_val = (function lt$objs$sidebar$command$input_val(this$){
return lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$)));
});
lt.objs.sidebar.command.set_val = (function lt$objs$sidebar$command$set_val(this$,v){
return lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$)),v);
});
lt.objs.sidebar.command.set_and_select = (function lt$objs$sidebar$command$set_and_select(this$,v){
lt.objs.sidebar.command.set_val.call(null,this$,v);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"change!","change!",850472699),v);
});
lt.objs.sidebar.command.ensure_visible = (function lt$objs$sidebar$command$ensure_visible(this$){
var list = lt.util.dom.$.call(null,"ul",lt.object.__GT_content.call(null,this$));
var elem = lt.util.dom.$.call(null,".selected",list);
if((elem.offsetTop < list.scrollTop)){
return (list.scrollTop = (elem.offsetTop - (15)));
} else {
if(((elem.offsetTop + elem.offsetHeight) > (list.scrollTop + list.clientHeight))){
return (list.scrollTop = (((elem.offsetTop + elem.offsetHeight) + (15)) - list.clientHeight));
} else {
return null;

}
}
});
lt.objs.sidebar.command.fill_lis = (function lt$objs$sidebar$command$fill_lis(p__9346,results){
var map__9347 = p__9346;
var map__9347__$1 = cljs.core.__destructure_map.call(null,map__9347);
var this$ = map__9347__$1;
var lis = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"lis","lis",-991188396));
var size = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"size","size",1098693007));
var search = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"search","search",1564939822));
var selected = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"selected","selected",574897764));
var key = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"key","key",-1516042587));
var transform = cljs.core.get.call(null,map__9347__$1,new cljs.core.Keyword(null,"transform","transform",1381301764));
var cnt = cljs.core.count.call(null,results);
var cur = cljs.core.mod.call(null,selected,(((cnt > size))?size:cnt));
var transform__$1 = (cljs.core.truth_(transform)?transform:(function (p1__9344_SHARP_,p2__9345_SHARP_,p3__9343_SHARP_){
return p3__9343_SHARP_;
}));
if(cljs.core._EQ_.call(null,cnt,(0))){
lt.util.dom.add_class.call(null,new cljs.core.Keyword(null,"content","content",15833224).cljs$core$IFn$_invoke$arity$1(this$),new cljs.core.Keyword(null,"empty","empty",767870958));
} else {
lt.util.dom.remove_class.call(null,new cljs.core.Keyword(null,"content","content",15833224).cljs$core$IFn$_invoke$arity$1(this$),new cljs.core.Keyword(null,"empty","empty",767870958));
}

var seq__9348_9370 = cljs.core.seq.call(null,cljs.core.map.call(null,cljs.core.vector,cljs.core.range.call(null),lis,results));
var chunk__9350_9371 = null;
var count__9351_9372 = (0);
var i__9352_9373 = (0);
while(true){
if((i__9352_9373 < count__9351_9372)){
var vec__9360_9374 = cljs.core._nth.call(null,chunk__9350_9371,i__9352_9373);
var i_9375 = cljs.core.nth.call(null,vec__9360_9374,(0),null);
var li_9376 = cljs.core.nth.call(null,vec__9360_9374,(1),null);
var res_9377 = cljs.core.nth.call(null,vec__9360_9374,(2),null);
if(cljs.core.truth_(res_9377)){
lt.util.dom.html.call(null,li_9376,transform__$1.call(null,(res_9377[(1)]),(res_9377[(4)]),(((!(cljs.core.empty_QMARK_.call(null,search))))?wrapMatch((res_9377[(1)]),(res_9377[(4)])):(res_9377[(1)])),(res_9377[(0)])));

lt.util.dom.css.call(null,li_9376,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"block"], null));

if(cljs.core._EQ_.call(null,i_9375,cur)){
lt.util.dom.add_class.call(null,li_9376,new cljs.core.Keyword(null,"selected","selected",574897764));
} else {
lt.util.dom.remove_class.call(null,li_9376,new cljs.core.Keyword(null,"selected","selected",574897764));
}


var G__9378 = seq__9348_9370;
var G__9379 = chunk__9350_9371;
var G__9380 = count__9351_9372;
var G__9381 = (i__9352_9373 + (1));
seq__9348_9370 = G__9378;
chunk__9350_9371 = G__9379;
count__9351_9372 = G__9380;
i__9352_9373 = G__9381;
continue;
} else {
var G__9382 = seq__9348_9370;
var G__9383 = chunk__9350_9371;
var G__9384 = count__9351_9372;
var G__9385 = (i__9352_9373 + (1));
seq__9348_9370 = G__9382;
chunk__9350_9371 = G__9383;
count__9351_9372 = G__9384;
i__9352_9373 = G__9385;
continue;
}
} else {
var temp__5753__auto___9386 = cljs.core.seq.call(null,seq__9348_9370);
if(temp__5753__auto___9386){
var seq__9348_9387__$1 = temp__5753__auto___9386;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9348_9387__$1)){
var c__4591__auto___9388 = cljs.core.chunk_first.call(null,seq__9348_9387__$1);
var G__9389 = cljs.core.chunk_rest.call(null,seq__9348_9387__$1);
var G__9390 = c__4591__auto___9388;
var G__9391 = cljs.core.count.call(null,c__4591__auto___9388);
var G__9392 = (0);
seq__9348_9370 = G__9389;
chunk__9350_9371 = G__9390;
count__9351_9372 = G__9391;
i__9352_9373 = G__9392;
continue;
} else {
var vec__9363_9393 = cljs.core.first.call(null,seq__9348_9387__$1);
var i_9394 = cljs.core.nth.call(null,vec__9363_9393,(0),null);
var li_9395 = cljs.core.nth.call(null,vec__9363_9393,(1),null);
var res_9396 = cljs.core.nth.call(null,vec__9363_9393,(2),null);
if(cljs.core.truth_(res_9396)){
lt.util.dom.html.call(null,li_9395,transform__$1.call(null,(res_9396[(1)]),(res_9396[(4)]),(((!(cljs.core.empty_QMARK_.call(null,search))))?wrapMatch((res_9396[(1)]),(res_9396[(4)])):(res_9396[(1)])),(res_9396[(0)])));

lt.util.dom.css.call(null,li_9395,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"block"], null));

if(cljs.core._EQ_.call(null,i_9394,cur)){
lt.util.dom.add_class.call(null,li_9395,new cljs.core.Keyword(null,"selected","selected",574897764));
} else {
lt.util.dom.remove_class.call(null,li_9395,new cljs.core.Keyword(null,"selected","selected",574897764));
}


var G__9397 = cljs.core.next.call(null,seq__9348_9387__$1);
var G__9398 = null;
var G__9399 = (0);
var G__9400 = (0);
seq__9348_9370 = G__9397;
chunk__9350_9371 = G__9398;
count__9351_9372 = G__9399;
i__9352_9373 = G__9400;
continue;
} else {
var G__9401 = cljs.core.next.call(null,seq__9348_9387__$1);
var G__9402 = null;
var G__9403 = (0);
var G__9404 = (0);
seq__9348_9370 = G__9401;
chunk__9350_9371 = G__9402;
count__9351_9372 = G__9403;
i__9352_9373 = G__9404;
continue;
}
}
} else {
}
}
break;
}

var seq__9366 = cljs.core.seq.call(null,cljs.core.drop.call(null,cnt,lis));
var chunk__9367 = null;
var count__9368 = (0);
var i__9369 = (0);
while(true){
if((i__9369 < count__9368)){
var li = cljs.core._nth.call(null,chunk__9367,i__9369);
lt.util.dom.css.call(null,li,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"none"], null));


var G__9405 = seq__9366;
var G__9406 = chunk__9367;
var G__9407 = count__9368;
var G__9408 = (i__9369 + (1));
seq__9366 = G__9405;
chunk__9367 = G__9406;
count__9368 = G__9407;
i__9369 = G__9408;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__9366);
if(temp__5753__auto__){
var seq__9366__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9366__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__9366__$1);
var G__9409 = cljs.core.chunk_rest.call(null,seq__9366__$1);
var G__9410 = c__4591__auto__;
var G__9411 = cljs.core.count.call(null,c__4591__auto__);
var G__9412 = (0);
seq__9366 = G__9409;
chunk__9367 = G__9410;
count__9368 = G__9411;
i__9369 = G__9412;
continue;
} else {
var li = cljs.core.first.call(null,seq__9366__$1);
lt.util.dom.css.call(null,li,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"none"], null));


var G__9413 = cljs.core.next.call(null,seq__9366__$1);
var G__9414 = null;
var G__9415 = (0);
var G__9416 = (0);
seq__9366 = G__9413;
chunk__9367 = G__9414;
count__9368 = G__9415;
i__9369 = G__9416;
continue;
}
} else {
return null;
}
}
break;
}
});

/**
 * 
 */
lt.objs.sidebar.command.__BEH__move_selection = (function lt$objs$sidebar$command$__BEH__move_selection(this$,dir){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"set-selection!","set-selection!",223827241),(dir + new cljs.core.Keyword(null,"selected","selected",574897764).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));

return lt.objs.sidebar.command.ensure_visible.call(null,this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","move-selection","lt.objs.sidebar.command/move-selection",-745518439),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"move-selection","move-selection",-360291088),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__move_selection);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__set_selection_BANG_ = (function lt$objs$sidebar$command$__BEH__set_selection_BANG_(this$,idx){
var cnt = cljs.core.count.call(null,new cljs.core.Keyword(null,"cur","cur",1153190599).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
var neue_idx = (((cnt > (0)))?cljs.core.mod.call(null,idx,(((cnt > new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))?new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)):cnt)):null);
if(cljs.core.truth_(neue_idx)){
var old = cljs.core.nth.call(null,new cljs.core.Keyword(null,"lis","lis",-991188396).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"selected","selected",574897764).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
var neue = cljs.core.nth.call(null,new cljs.core.Keyword(null,"lis","lis",-991188396).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),neue_idx);
if(cljs.core.truth_(neue)){
lt.util.dom.remove_class.call(null,old,new cljs.core.Keyword(null,"selected","selected",574897764));

lt.util.dom.add_class.call(null,neue,new cljs.core.Keyword(null,"selected","selected",574897764));

return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected","selected",574897764),neue_idx], null));
} else {
return null;
}
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","set-selection!","lt.objs.sidebar.command/set-selection!",2117896312),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"set-selection!","set-selection!",223827241),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__set_selection_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__change_BANG_ = (function lt$objs$sidebar$command$__BEH__change_BANG_(this$,v){
var v__$1 = lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"change+","change+",1880139626),v);
if(cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),v__$1)){
return null;
} else {
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selected","selected",574897764),(0),new cljs.core.Keyword(null,"search","search",1564939822),v__$1], null));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","change!","lt.objs.sidebar.command/change!",-846807984),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"change!","change!",850472699),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__change_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__escape_BANG_ = (function lt$objs$sidebar$command$__BEH__escape_BANG_(this$){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"close-sidebar","close-sidebar",-480192451));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","escape!","lt.objs.sidebar.command/escape!",136056474),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"escape!","escape!",1850102229),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__escape_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__options_escape_BANG_ = (function lt$objs$sidebar$command$__BEH__options_escape_BANG_(this$){
lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"cancel!","cancel!",-676538519));

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"close-sidebar","close-sidebar",-480192451));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","options-escape!","lt.objs.sidebar.command/options-escape!",-860874509),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"escape!","escape!",1850102229),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__options_escape_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__set_on_select = (function lt$objs$sidebar$command$__BEH__set_on_select(this$,thing){
if(cljs.core.truth_(new cljs.core.Keyword(null,"set-on-select","set-on-select",-1113640934).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))){
return lt.objs.sidebar.command.set_val.call(null,this$,new cljs.core.Keyword(null,"key","key",-1516042587).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).call(null,thing));
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","set-on-select","lt.objs.sidebar.command/set-on-select",1151951979),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select","select",1147833503),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__set_on_select);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__select_BANG_ = (function lt$objs$sidebar$command$__BEH__select_BANG_(this$,idx){
var cur = lt.objs.sidebar.command.indexed_results.call(null,cljs.core.deref.call(null,this$));
var cnt = cljs.core.count.call(null,cur);
var idx__$1 = (function (){var or__4160__auto__ = idx;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return new cljs.core.Keyword(null,"selected","selected",574897764).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
}
})();
var i = cljs.core.mod.call(null,idx__$1,(((cnt > new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))?new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)):cnt));
if((cnt > (0))){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select","select",1147833503),((cur[i])[(0)]));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selected","selected",574897764));
} else {
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select-unknown","select-unknown",-1025304823),lt.objs.sidebar.command.input_val.call(null,this$));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","select!","lt.objs.sidebar.command/select!",-1218366428),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select!","select!",1013647471),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__select_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__filter_active = (function lt$objs$sidebar$command$__BEH__filter_active(this$){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840),this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","filter-active","lt.objs.sidebar.command/filter-active",1855735825),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__filter_active);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__filter_inactive = (function lt$objs$sidebar$command$__BEH__filter_inactive(this$){
return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","filter-inactive","lt.objs.sidebar.command/filter-inactive",279088981),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"inactive","inactive",-306247616),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__filter_inactive);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__clear_BANG_ = (function lt$objs$sidebar$command$__BEH__clear_BANG_(this$){
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$));
lt.util.dom.val.call(null,input,"");

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"change!","change!",850472699),"");
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","clear!","lt.objs.sidebar.command/clear!",1884529243),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",-144814418),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__clear_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__filter_list__DOT__focus_BANG_ = (function lt$objs$sidebar$command$__BEH__filter_list__DOT__focus_BANG_(this$){
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,this$));
lt.util.dom.focus.call(null,input);

return input.select();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","filter-list.focus!","lt.objs.sidebar.command/filter-list.focus!",-1379316724),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",-1344984927),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__filter_list__DOT__focus_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__update_lis = (function lt$objs$sidebar$command$__BEH__update_lis(this$){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"cur","cur",1153190599),lt.objs.sidebar.command.indexed_results.call(null,cljs.core.deref.call(null,this$))], null));

return lt.objs.sidebar.command.fill_lis.call(null,cljs.core.deref.call(null,this$),new cljs.core.Keyword(null,"cur","cur",1153190599).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","update-lis","lt.objs.sidebar.command/update-lis",1575198338),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh!","refresh!",156149341),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__update_lis);
/**
 * 
 */
lt.objs.sidebar.command.input = (function lt$objs$sidebar$command$input(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.search","input.search",-420752064),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),singultus.binding.bound.call(null,this$,new cljs.core.Keyword(null,"placeholder","placeholder",-104873083)),new cljs.core.Keyword(null,"tabindex","tabindex",338877510),"0"], null)], null));
var seq__9417_9433 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"keyup","keyup",-794526927),((function (e__992__auto__){
return (function (e){
var me = this;
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"change!","change!",850472699),lt.util.dom.val.call(null,me));
});})(e__992__auto__))
], null)));
var chunk__9418_9434 = null;
var count__9419_9435 = (0);
var i__9420_9436 = (0);
while(true){
if((i__9420_9436 < count__9419_9435)){
var vec__9427_9437 = cljs.core._nth.call(null,chunk__9418_9434,i__9420_9436);
var ev__993__auto___9438 = cljs.core.nth.call(null,vec__9427_9437,(0),null);
var func__994__auto___9439 = cljs.core.nth.call(null,vec__9427_9437,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9438,func__994__auto___9439);


var G__9440 = seq__9417_9433;
var G__9441 = chunk__9418_9434;
var G__9442 = count__9419_9435;
var G__9443 = (i__9420_9436 + (1));
seq__9417_9433 = G__9440;
chunk__9418_9434 = G__9441;
count__9419_9435 = G__9442;
i__9420_9436 = G__9443;
continue;
} else {
var temp__5753__auto___9444 = cljs.core.seq.call(null,seq__9417_9433);
if(temp__5753__auto___9444){
var seq__9417_9445__$1 = temp__5753__auto___9444;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9417_9445__$1)){
var c__4591__auto___9446 = cljs.core.chunk_first.call(null,seq__9417_9445__$1);
var G__9447 = cljs.core.chunk_rest.call(null,seq__9417_9445__$1);
var G__9448 = c__4591__auto___9446;
var G__9449 = cljs.core.count.call(null,c__4591__auto___9446);
var G__9450 = (0);
seq__9417_9433 = G__9447;
chunk__9418_9434 = G__9448;
count__9419_9435 = G__9449;
i__9420_9436 = G__9450;
continue;
} else {
var vec__9430_9451 = cljs.core.first.call(null,seq__9417_9445__$1);
var ev__993__auto___9452 = cljs.core.nth.call(null,vec__9430_9451,(0),null);
var func__994__auto___9453 = cljs.core.nth.call(null,vec__9430_9451,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9452,func__994__auto___9453);


var G__9454 = cljs.core.next.call(null,seq__9417_9445__$1);
var G__9455 = null;
var G__9456 = (0);
var G__9457 = (0);
seq__9417_9433 = G__9454;
chunk__9418_9434 = G__9455;
count__9419_9435 = G__9456;
i__9420_9436 = G__9457;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.objs.sidebar.command.__GT_items = (function lt$objs$sidebar$command$__GT_items(items){
if((((!((items == null))))?(((((items.cljs$lang$protocol_mask$partition0$ & (32768))) || ((cljs.core.PROTOCOL_SENTINEL === items.cljs$core$IDeref$))))?true:(((!items.cljs$lang$protocol_mask$partition0$))?cljs.core.native_satisfies_QMARK_.call(null,cljs.core.IDeref,items):false)):cljs.core.native_satisfies_QMARK_.call(null,cljs.core.IDeref,items))){
return cljs.core.deref.call(null,items);
} else {
if(cljs.core.fn_QMARK_.call(null,items)){
return items.call(null);
} else {
return items;

}
}
});
lt.objs.sidebar.command.score_sort = (function lt$objs$sidebar$command$score_sort(x,y){
return ((y[(3)]) - (x[(3)]));
});
lt.objs.sidebar.command.score_sort2 = (function lt$objs$sidebar$command$score_sort2(x,y){
return ((y[(4)]).score - (x[(4)]).score);
});
lt.objs.sidebar.command.indexed_results = (function lt$objs$sidebar$command$indexed_results(p__9465){
var map__9466 = p__9465;
var map__9466__$1 = cljs.core.__destructure_map.call(null,map__9466);
var search = cljs.core.get.call(null,map__9466__$1,new cljs.core.Keyword(null,"search","search",1564939822));
var size = cljs.core.get.call(null,map__9466__$1,new cljs.core.Keyword(null,"size","size",1098693007));
var items = cljs.core.get.call(null,map__9466__$1,new cljs.core.Keyword(null,"items","items",1031954938));
var key = cljs.core.get.call(null,map__9466__$1,new cljs.core.Keyword(null,"key","key",-1516042587));
var items__$1 = cljs.core.apply.call(null,cljs.core.array,lt.objs.sidebar.command.__GT_items.call(null,items));
var map_func3 = (function (p1__9459_SHARP_){
return [p1__9459_SHARP_,key.call(null,p1__9459_SHARP_),fastScore(key.call(null,p1__9459_SHARP_),search),null,null];
});
var map_func = (function (p1__9460_SHARP_){
(p1__9460_SHARP_[(3)] = (p1__9460_SHARP_[(1)]).score(search));

return p1__9460_SHARP_;
});
var map_func2 = (function (p1__9461_SHARP_){
(p1__9461_SHARP_[(4)] = score((p1__9461_SHARP_[(1)]),search));

return p1__9461_SHARP_;
});
var has_score = (function (p1__9462_SHARP_){
return ((p1__9462_SHARP_[(4)]).score > (0));
});
if((!(cljs.core.empty_QMARK_.call(null,search)))){
var score0 = items__$1.map(map_func3).filter((function (p1__9463_SHARP_){
return (p1__9463_SHARP_[(2)]);
}));
var score1 = score0.map(map_func).sort(lt.objs.sidebar.command.score_sort);
var score2 = score1.slice((0),(50)).map(map_func2).filter(has_score).sort(lt.objs.sidebar.command.score_sort2);
return score2;
} else {
return items__$1.map((function (p1__9464_SHARP_){
return [p1__9464_SHARP_,key.call(null,p1__9464_SHARP_),null,null];
}));
}
});
lt.objs.sidebar.command.current_selected = (function lt$objs$sidebar$command$current_selected(this$){
var cur = lt.objs.sidebar.command.indexed_results.call(null,cljs.core.deref.call(null,this$));
var cnt = cljs.core.count.call(null,cur);
var idx = new cljs.core.Keyword(null,"selected","selected",574897764).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var i = cljs.core.mod.call(null,idx,(((cnt > new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))?new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)):cnt));
if((cnt > (0))){
return ((cur[i])[(0)]);
} else {
return null;
}
});
/**
 * 
 */
lt.objs.sidebar.command.item = (function lt$objs$sidebar$command$item(this$,x){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",723558921),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"index","index",-1531685915),x], null)], null));
var seq__9467_9483 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"mousedown","mousedown",1391242074),((function (e__992__auto__){
return (function (e){
lt.util.dom.prevent.call(null,e);

lt.util.dom.stop_propagation.call(null,e);

lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"set-selection!","set-selection!",223827241),x);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select!","select!",1013647471),x);
});})(e__992__auto__))
], null)));
var chunk__9468_9484 = null;
var count__9469_9485 = (0);
var i__9470_9486 = (0);
while(true){
if((i__9470_9486 < count__9469_9485)){
var vec__9477_9487 = cljs.core._nth.call(null,chunk__9468_9484,i__9470_9486);
var ev__993__auto___9488 = cljs.core.nth.call(null,vec__9477_9487,(0),null);
var func__994__auto___9489 = cljs.core.nth.call(null,vec__9477_9487,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9488,func__994__auto___9489);


var G__9490 = seq__9467_9483;
var G__9491 = chunk__9468_9484;
var G__9492 = count__9469_9485;
var G__9493 = (i__9470_9486 + (1));
seq__9467_9483 = G__9490;
chunk__9468_9484 = G__9491;
count__9469_9485 = G__9492;
i__9470_9486 = G__9493;
continue;
} else {
var temp__5753__auto___9494 = cljs.core.seq.call(null,seq__9467_9483);
if(temp__5753__auto___9494){
var seq__9467_9495__$1 = temp__5753__auto___9494;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9467_9495__$1)){
var c__4591__auto___9496 = cljs.core.chunk_first.call(null,seq__9467_9495__$1);
var G__9497 = cljs.core.chunk_rest.call(null,seq__9467_9495__$1);
var G__9498 = c__4591__auto___9496;
var G__9499 = cljs.core.count.call(null,c__4591__auto___9496);
var G__9500 = (0);
seq__9467_9483 = G__9497;
chunk__9468_9484 = G__9498;
count__9469_9485 = G__9499;
i__9470_9486 = G__9500;
continue;
} else {
var vec__9480_9501 = cljs.core.first.call(null,seq__9467_9495__$1);
var ev__993__auto___9502 = cljs.core.nth.call(null,vec__9480_9501,(0),null);
var func__994__auto___9503 = cljs.core.nth.call(null,vec__9480_9501,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9502,func__994__auto___9503);


var G__9504 = cljs.core.next.call(null,seq__9467_9495__$1);
var G__9505 = null;
var G__9506 = (0);
var G__9507 = (0);
seq__9467_9483 = G__9504;
chunk__9468_9484 = G__9505;
count__9469_9485 = G__9506;
i__9470_9486 = G__9507;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","filter-list","lt.objs.sidebar.command/filter-list",1687445914),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"filter-list","filter-list",-321279505),null], null), null),new cljs.core.Keyword(null,"selected","selected",574897764),(0),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"search",new cljs.core.Keyword(null,"items","items",1031954938),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"search","search",1564939822),"",new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$,opts){
var opts__$1 = cljs.core.merge.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"size","size",1098693007),(100)], null),opts);
var lis = (function (){var iter__4564__auto__ = (function lt$objs$sidebar$command$iter__9508(s__9509){
return (new cljs.core.LazySeq(null,(function (){
var s__9509__$1 = s__9509;
while(true){
var temp__5753__auto__ = cljs.core.seq.call(null,s__9509__$1);
if(temp__5753__auto__){
var s__9509__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,s__9509__$2)){
var c__4562__auto__ = cljs.core.chunk_first.call(null,s__9509__$2);
var size__4563__auto__ = cljs.core.count.call(null,c__4562__auto__);
var b__9511 = cljs.core.chunk_buffer.call(null,size__4563__auto__);
if((function (){var i__9510 = (0);
while(true){
if((i__9510 < size__4563__auto__)){
var x = cljs.core._nth.call(null,c__4562__auto__,i__9510);
cljs.core.chunk_append.call(null,b__9511,lt.objs.sidebar.command.item.call(null,this$,x));

var G__9512 = (i__9510 + (1));
i__9510 = G__9512;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__9511),lt$objs$sidebar$command$iter__9508.call(null,cljs.core.chunk_rest.call(null,s__9509__$2)));
} else {
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__9511),null);
}
} else {
var x = cljs.core.first.call(null,s__9509__$2);
return cljs.core.cons.call(null,lt.objs.sidebar.command.item.call(null,this$,x),lt$objs$sidebar$command$iter__9508.call(null,cljs.core.rest.call(null,s__9509__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4564__auto__.call(null,cljs.core.range.call(null,new cljs.core.Keyword(null,"size","size",1098693007).cljs$core$IFn$_invoke$arity$1(opts__$1)));
})();
lt.object.merge_BANG_.call(null,this$,cljs.core.merge.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"lis","lis",-991188396),cljs.core.vec.call(null,lis)], null),opts__$1));

return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.filter-list.empty","div.filter-list.empty",1084532852),lt.objs.sidebar.command.input.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",-1349521403),lis], null)], null);
}));
lt.objs.sidebar.command.filter_list = (function lt$objs$sidebar$command$filter_list(opts){
var lst = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","filter-list","lt.objs.sidebar.command/filter-list",1687445914),opts);
lt.object.raise.call(null,lst,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));

return lst;
});
/**
 * 
 */
lt.objs.sidebar.command.__BEH__select_command = (function lt$objs$sidebar$command$__BEH__select_command(this$,sel){
var temp__5753__auto__ = lt.objs.command.by_id.call(null,sel);
if(cljs.core.truth_(temp__5753__auto__)){
var cmd = temp__5753__auto__;
if(cljs.core.truth_(new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(cmd))){
lt.object.merge_BANG_.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),cmd], null));

return lt.object.raise.call(null,new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(cmd),new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
} else {
lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"exec!","exec!",707596729),cmd);

lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"selected-exec","selected-exec",-1366177839),cmd);

return lt.object.merge_BANG_.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),null], null));
}
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","select-command","lt.objs.sidebar.command/select-command",1516753694),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select","select",1147833503),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__select_command);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__select_hidden = (function lt$objs$sidebar$command$__BEH__select_hidden(this$,v){
var temp__5753__auto__ = lt.objs.command.by_id.call(null,cljs.core.keyword.call(null,v));
if(cljs.core.truth_(temp__5753__auto__)){
var cmd = temp__5753__auto__;
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select","select",1147833503),cmd);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","select-hidden","lt.objs.sidebar.command/select-hidden",266688456),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select-unknown","select-unknown",-1025304823),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__select_hidden);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__post_select_pop = (function lt$objs$sidebar$command$__BEH__post_select_pop(this$){
if(cljs.core._EQ_.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.sidebar.rightbar)))){
return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",-2079310498),cljs.core.not.call(null,(function (){var or__4160__auto__ = lt.objs.context.in_QMARK_.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840));
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return lt.objs.context.in_QMARK_.call(null,new cljs.core.Keyword(null,"options-input","options-input",-2143404893));
}
})()));
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","post-select-pop","lt.objs.sidebar.command/post-select-pop",1429721233),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected-exec","selected-exec",-1366177839),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__post_select_pop);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__exec_command = (function lt$objs$sidebar$command$__BEH__exec_command(var_args){
var args__4777__auto__ = [];
var len__4771__auto___9516 = arguments.length;
var i__4772__auto___9517 = (0);
while(true){
if((i__4772__auto___9517 < len__4771__auto___9516)){
args__4777__auto__.push((arguments[i__4772__auto___9517]));

var G__9518 = (i__4772__auto___9517 + (1));
i__4772__auto___9517 = G__9518;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((2) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((2)),(0),null)):null);
return lt.objs.sidebar.command.__BEH__exec_command.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),argseq__4778__auto__);
});

(lt.objs.sidebar.command.__BEH__exec_command.cljs$core$IFn$_invoke$arity$variadic = (function (this$,sel,args){
var cmd = lt.objs.command.by_id.call(null,sel);
if(cljs.core.not.call(null,new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(cmd))){
return cljs.core.apply.call(null,lt.objs.command.exec_BANG_,cmd,args);
} else {
if(cljs.core.truth_((function (){var and__4149__auto__ = new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(cmd);
if(cljs.core.truth_(and__4149__auto__)){
return cljs.core.seq.call(null,args);
} else {
return and__4149__auto__;
}
})())){
return cljs.core.apply.call(null,new cljs.core.Keyword(null,"exec","exec",1625568743).cljs$core$IFn$_invoke$arity$1(cmd),args);
} else {
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"show-commandbar-transient","show-commandbar-transient",1931838326));

return lt.object.raise.call(null,new cljs.core.Keyword(null,"selector","selector",762528866).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"select","select",1147833503),cmd);

}
}
}));

(lt.objs.sidebar.command.__BEH__exec_command.cljs$lang$maxFixedArity = (2));

/** @this {Function} */
(lt.objs.sidebar.command.__BEH__exec_command.cljs$lang$applyTo = (function (seq9513){
var G__9514 = cljs.core.first.call(null,seq9513);
var seq9513__$1 = cljs.core.next.call(null,seq9513);
var G__9515 = cljs.core.first.call(null,seq9513__$1);
var seq9513__$2 = cljs.core.next.call(null,seq9513__$1);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__9514,G__9515,seq9513__$2);
}));


lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","exec-command","lt.objs.sidebar.command/exec-command",781381672),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"exec!","exec!",707596729),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__exec_command);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__exec_active_BANG_ = (function lt$objs$sidebar$command$__BEH__exec_active_BANG_(this$,args){
var cmd = new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
cljs.core.apply.call(null,new cljs.core.Keyword(null,"exec","exec",1625568743).cljs$core$IFn$_invoke$arity$1(cmd),args);

lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selected-exec","selected-exec",-1366177839),cmd);

return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),null], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","exec-active!","lt.objs.sidebar.command/exec-active!",957655257),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"exec-active!","exec-active!",33479948),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__exec_active_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__focus_on_show = (function lt$objs$sidebar$command$__BEH__focus_on_show(this$){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","focus-on-show","lt.objs.sidebar.command/focus-on-show",1642649248),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__focus_on_show);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__focus_BANG_ = (function lt$objs$sidebar$command$__BEH__focus_BANG_(this$){
if(cljs.core.not.call(null,new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))){
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,this$));
lt.util.dom.focus.call(null,input);

return input.select();
} else {
return lt.object.raise.call(null,new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","focus!","lt.objs.sidebar.command/focus!",1019417328),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",-1344984927),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__focus_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__soft_focus_BANG_ = (function lt$objs$sidebar$command$__BEH__soft_focus_BANG_(this$){
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,this$));
return lt.util.dom.focus.call(null,input);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","soft-focus!","lt.objs.sidebar.command/soft-focus!",2015803047),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"soft-focus!","soft-focus!",17652340),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__soft_focus_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__refresh_BANG_ = (function lt$objs$sidebar$command$__BEH__refresh_BANG_(this$){
return lt.object.raise.call(null,new cljs.core.Keyword(null,"selector","selector",762528866).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","refresh!","lt.objs.sidebar.command/refresh!",-1840999790),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh!","refresh!",156149341),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__refresh_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.__BEH__cancel_BANG_ = (function lt$objs$sidebar$command$__BEH__cancel_BANG_(this$){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",1895962068),null], null));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","cancel!","lt.objs.sidebar.command/cancel!",1083710238),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"cancel!","cancel!",-676538519),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__cancel_BANG_);
/**
 * 
 */
lt.objs.sidebar.command.header_button = (function lt$objs$sidebar$command$header_button(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",-372662728),singultus.binding.bound.call(null,this$,(function (p1__9519_SHARP_){
return new cljs.core.Keyword(null,"desc","desc",2093485764).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(p1__9519_SHARP_));
}))], null));
var seq__9520_9536 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"cancel!","cancel!",-676538519));
});})(e__992__auto__))
], null)));
var chunk__9521_9537 = null;
var count__9522_9538 = (0);
var i__9523_9539 = (0);
while(true){
if((i__9523_9539 < count__9522_9538)){
var vec__9530_9540 = cljs.core._nth.call(null,chunk__9521_9537,i__9523_9539);
var ev__993__auto___9541 = cljs.core.nth.call(null,vec__9530_9540,(0),null);
var func__994__auto___9542 = cljs.core.nth.call(null,vec__9530_9540,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9541,func__994__auto___9542);


var G__9543 = seq__9520_9536;
var G__9544 = chunk__9521_9537;
var G__9545 = count__9522_9538;
var G__9546 = (i__9523_9539 + (1));
seq__9520_9536 = G__9543;
chunk__9521_9537 = G__9544;
count__9522_9538 = G__9545;
i__9523_9539 = G__9546;
continue;
} else {
var temp__5753__auto___9547 = cljs.core.seq.call(null,seq__9520_9536);
if(temp__5753__auto___9547){
var seq__9520_9548__$1 = temp__5753__auto___9547;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__9520_9548__$1)){
var c__4591__auto___9549 = cljs.core.chunk_first.call(null,seq__9520_9548__$1);
var G__9550 = cljs.core.chunk_rest.call(null,seq__9520_9548__$1);
var G__9551 = c__4591__auto___9549;
var G__9552 = cljs.core.count.call(null,c__4591__auto___9549);
var G__9553 = (0);
seq__9520_9536 = G__9550;
chunk__9521_9537 = G__9551;
count__9522_9538 = G__9552;
i__9523_9539 = G__9553;
continue;
} else {
var vec__9533_9554 = cljs.core.first.call(null,seq__9520_9548__$1);
var ev__993__auto___9555 = cljs.core.nth.call(null,vec__9533_9554,(0),null);
var func__994__auto___9556 = cljs.core.nth.call(null,vec__9533_9554,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___9555,func__994__auto___9556);


var G__9557 = cljs.core.next.call(null,seq__9520_9548__$1);
var G__9558 = null;
var G__9559 = (0);
var G__9560 = (0);
seq__9520_9536 = G__9557;
chunk__9521_9537 = G__9558;
count__9522_9538 = G__9559;
i__9523_9539 = G__9560;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.objs.sidebar.command.__GT_options = (function lt$objs$sidebar$command$__GT_options(this$,active){
if(cljs.core.truth_(new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(active))){
return lt.object.__GT_content.call(null,new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(active));
} else {
return null;
}
});
lt.objs.sidebar.command.__GT_command_class = (function lt$objs$sidebar$command$__GT_command_class(this$){
return ["command ",(cljs.core.truth_(new cljs.core.Keyword(null,"active","active",1895962068).cljs$core$IFn$_invoke$arity$1(this$))?"options":"selector"),(cljs.core.truth_(lt.util.dom.has_class_QMARK_.call(null,new cljs.core.Keyword(null,"content","content",15833224).cljs$core$IFn$_invoke$arity$1(this$),new cljs.core.Keyword(null,"active","active",1895962068)))?" active":null)].join('');
});
lt.objs.sidebar.command.__GT_binding = (function lt$objs$sidebar$command$__GT_binding(p__9561){
var vec__9562 = p__9561;
var k = cljs.core.nth.call(null,vec__9562,(0),null);
var v = cljs.core.nth.call(null,vec__9562,(1),null);
return [cljs.core.str.cljs$core$IFn$_invoke$arity$1(v),(((cljs.core.str.cljs$core$IFn$_invoke$arity$1(k).indexOf("emacs") > (-1)))?" (Emacs)":null),(((cljs.core.str.cljs$core$IFn$_invoke$arity$1(k).indexOf("vim") > (-1)))?" (Vim)":null)].join('');
});
lt.objs.sidebar.command.command__GT_display = (function lt$objs$sidebar$command$command__GT_display(orig,scored,highlighted,item){
return ["<p>",cljs.core.str.cljs$core$IFn$_invoke$arity$1(highlighted),"<p>",(function (){var temp__5753__auto__ = cljs.core.seq.call(null,lt.objs.keyboard.cmd__GT_bindings.call(null,item.call(null,new cljs.core.Keyword(null,"command","command",-894540724))));
if(temp__5753__auto__){
var binding = temp__5753__auto__;
return ["<p class='binding'>",clojure.string.join.call(null," | ",cljs.core.map.call(null,lt.objs.sidebar.command.__GT_binding,cljs.core.reverse.call(null,binding))),"</p>"].join('');
} else {
return null;
}
})()].join('');
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","sidebar.command","lt.objs.sidebar.command/sidebar.command",721327747),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar.command","sidebar.command",-1541105038),null], null), null),new cljs.core.Keyword(null,"label","label",1718410804),"command",new cljs.core.Keyword(null,"active","active",1895962068),null,new cljs.core.Keyword(null,"order","order",-1254677256),(3),new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
var commands = singultus.binding.subatom.call(null,lt.objs.command.manager,new cljs.core.Keyword(null,"commands","commands",161008658));
var f2 = singultus.binding.computed.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [commands], null),(function (cmds){
return cljs.core.filter.call(null,(function (p1__9565_SHARP_){
return cljs.core.not.call(null,new cljs.core.Keyword(null,"hidden","hidden",-312506092).cljs$core$IFn$_invoke$arity$1(p1__9565_SHARP_));
}),cljs.core.vals.call(null,cmds));
}));
var s2 = lt.objs.sidebar.command.filter_list.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"items","items",1031954938),f2,new cljs.core.Keyword(null,"transform","transform",1381301764),(function (p1__9566_SHARP_,p2__9567_SHARP_,p3__9568_SHARP_,p4__9569_SHARP_){
return lt.objs.sidebar.command.command__GT_display.call(null,p1__9566_SHARP_,p2__9567_SHARP_,p3__9568_SHARP_,p4__9569_SHARP_);
}),new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword(null,"desc","desc",2093485764)], null));
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selector","selector",762528866),s2], null));

lt.object.add_tags.call(null,s2,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"command.selector","command.selector",42032912)], null));

return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),singultus.binding.bound.call(null,this$,lt.objs.sidebar.command.__GT_command_class)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.selector","div.selector",749885639),lt.object.__GT_content.call(null,s2)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.options","div.options",-1118306305),lt.objs.sidebar.command.header_button.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),singultus.binding.bound.call(null,singultus.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068)),(function (p1__9570_SHARP_){
return lt.objs.sidebar.command.__GT_options.call(null,this$,p1__9570_SHARP_);
}))], null)], null)], null);
}));
/**
 * 
 */
lt.objs.sidebar.command.__BEH__init_commands = (function lt$objs$sidebar$command$__BEH__init_commands(app){
return lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","init-commands","lt.objs.sidebar.command/init-commands",1954306957),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"post-init","post-init",1539646468),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.sidebar.command.__BEH__init_commands);
lt.objs.sidebar.command.sidebar_command = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.command","sidebar.command","lt.objs.sidebar.command/sidebar.command",721327747));
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"commandbar","commandbar",1544341803),lt.objs.sidebar.command.sidebar_command);
lt.objs.sidebar.add_item.call(null,lt.objs.sidebar.rightbar,lt.objs.sidebar.command.sidebar_command);
lt.objs.sidebar.command.command = lt.objs.command.command;
lt.objs.sidebar.command.show_and_focus = (function lt$objs$sidebar$command$show_and_focus(opts){
return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",1291842030),lt.objs.sidebar.command.sidebar_command,opts);
});
lt.objs.sidebar.command.pre_fill = (function lt$objs$sidebar$command$pre_fill(v){
return lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,lt.objs.sidebar.command.sidebar_command)),v);
});
lt.objs.sidebar.command.show_filled = (function lt$objs$sidebar$command$show_filled(fill,opts){
lt.objs.sidebar.command.pre_fill.call(null,fill);

lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",1291842030),lt.objs.sidebar.command.sidebar_command,cljs.core.assoc.call(null,opts,new cljs.core.Keyword(null,"soft?","soft?",-1339668477),true));

return lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"soft-focus!","soft-focus!",17652340));
});
lt.objs.sidebar.command.exec_BANG_ = lt.objs.command.exec_BANG_;
lt.objs.sidebar.command.exec_active_BANG_ = (function lt$objs$sidebar$command$exec_active_BANG_(var_args){
var args__4777__auto__ = [];
var len__4771__auto___9572 = arguments.length;
var i__4772__auto___9573 = (0);
while(true){
if((i__4772__auto___9573 < len__4771__auto___9572)){
args__4777__auto__.push((arguments[i__4772__auto___9573]));

var G__9574 = (i__4772__auto___9573 + (1));
i__4772__auto___9573 = G__9574;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((0) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((0)),(0),null)):null);
return lt.objs.sidebar.command.exec_active_BANG_.cljs$core$IFn$_invoke$arity$variadic(argseq__4778__auto__);
});

(lt.objs.sidebar.command.exec_active_BANG_.cljs$core$IFn$_invoke$arity$variadic = (function (args){
return lt.object.raise.call(null,lt.objs.sidebar.command.sidebar_command,new cljs.core.Keyword(null,"exec-active!","exec-active!",33479948),args);
}));

(lt.objs.sidebar.command.exec_active_BANG_.cljs$lang$maxFixedArity = (0));

/** @this {Function} */
(lt.objs.sidebar.command.exec_active_BANG_.cljs$lang$applyTo = (function (seq9571){
var self__4759__auto__ = this;
return self__4759__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq.call(null,seq9571));
}));

lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"show-commandbar","show-commandbar",-1659752270),new cljs.core.Keyword(null,"desc","desc",2093485764),"Command: Show command bar",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.sidebar.command.show_and_focus.call(null,cljs.core.PersistentArrayMap.EMPTY);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"show-commandbar-transient","show-commandbar-transient",1931838326),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"Command: Show command bar transiently",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.sidebar.command.show_and_focus.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"transient?","transient?",1694525927),true], null));
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"quit","quit",53285210),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Quit Light Table",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.close.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"passthrough","passthrough",2059714258),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"No-op key passthrough",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.keyboard.passthrough.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"filter-list.input.move-selection","filter-list.input.move-selection",709137389),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"FilterList: move selection",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (dir){
return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840)),new cljs.core.Keyword(null,"move-selection","move-selection",-360291088),dir);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"filter-list.input.select!","filter-list.input.select!",1699759914),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"FilterList: select",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840)),new cljs.core.Keyword(null,"select!","select!",1013647471));
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"filter-list.input.escape!","filter-list.input.escape!",-106008913),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"FilterList: escape",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (force_QMARK_){
return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"filter-list.input","filter-list.input",-328755840)),new cljs.core.Keyword(null,"escape!","escape!",1850102229),force_QMARK_);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"options-input.select!","options-input.select!",-348025500),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"OptionsInput: select",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"options-input","options-input",-2143404893)),new cljs.core.Keyword(null,"select!","select!",1013647471));
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"options-input.escape!","options-input.escape!",1599174401),new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"desc","desc",2093485764),"OptionsInput: escape",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"options-input","options-input",-2143404893)),new cljs.core.Keyword(null,"escape!","escape!",1850102229));
})], null));

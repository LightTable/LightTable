// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.langs.keymap');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.context');
goog.require('lt.objs.command');
goog.require('lt.util.dom');
goog.require('lt.objs.langs.behaviors');
goog.require('lt.objs.editor');
goog.require('clojure.string');
lt.objs.langs.keymap.completions = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tag","tag",-1290361223),new cljs.core.Keyword(null,"tag","tag",-1290361223).cljs$core$IFn$_invoke$arity$1(lt.objs.langs.behaviors.completions),new cljs.core.Keyword(null,"command","command",-894540724),lt.objs.command.completions], null);
lt.objs.langs.keymap.idx__GT_entry_info = (function lt$objs$langs$keymap$idx__GT_entry_info(idx,entries){
var vec__12800 = lt.objs.langs.behaviors.idx__GT_item.call(null,idx,entries);
var ix = cljs.core.nth.call(null,vec__12800,(0),null);
var entry = cljs.core.nth.call(null,vec__12800,(1),null);
var vec__12803 = lt.objs.langs.behaviors.idx__GT_item.call(null,idx,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(entry));
var tokenIx = cljs.core.nth.call(null,vec__12803,(0),null);
var token = cljs.core.nth.call(null,vec__12803,(1),null);
var vec__12806 = (cljs.core.truth_(new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token))?lt.objs.langs.behaviors.idx__GT_item.call(null,idx,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token)):null);
var argIx = cljs.core.nth.call(null,vec__12806,(0),null);
var arg = cljs.core.nth.call(null,vec__12806,(1),null);
var vec__12809 = new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(entry);
var tag = cljs.core.nth.call(null,vec__12809,(0),null);
var key = cljs.core.nth.call(null,vec__12809,(1),null);
var first_command = cljs.core.nth.call(null,vec__12809,(2),null);
var tag__$1 = (cljs.core.truth_(tag)?lt.objs.langs.behaviors.str__GT_ns_keyword.call(null,new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(tag)):null);
var past_last_token = (idx > (new cljs.core.Keyword(null,"end","end",-268185958).cljs$core$IFn$_invoke$arity$1(cljs.core.last.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(entry))) + (1)));
var pos = ((((cljs.core.not.call(null,tokenIx)) && (past_last_token)))?cljs.core.count.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(entry)):((cljs.core.not.call(null,tokenIx))?(cljs.core.count.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(entry)) - (1)):tokenIx
));
var past_last_arg = (idx > (new cljs.core.Keyword(null,"end","end",-268185958).cljs$core$IFn$_invoke$arity$1(cljs.core.last.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token))) + (1)));
var arg_pos = (cljs.core.truth_(new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token))?((((cljs.core.not.call(null,argIx)) && (past_last_arg)))?cljs.core.count.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token)):((cljs.core.not.call(null,argIx))?(cljs.core.count.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token)) - (1)):argIx
)):null);
var command = (cljs.core.truth_((function (){var and__4149__auto__ = tokenIx;
if(cljs.core.truth_(and__4149__auto__)){
return (tokenIx > (1));
} else {
return and__4149__auto__;
}
})())?(cljs.core.truth_(arg_pos)?lt.objs.langs.behaviors.str__GT_ns_keyword.call(null,new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(token)))):lt.objs.langs.behaviors.str__GT_ns_keyword.call(null,new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(token))
):null);
var first_command__$1 = (cljs.core.truth_(first_command)?(cljs.core.truth_(new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(first_command))?lt.objs.langs.behaviors.str__GT_ns_keyword.call(null,new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(cljs.core.first.call(null,new cljs.core.Keyword(null,"tokens","tokens",-818939304).cljs$core$IFn$_invoke$arity$1(first_command)))):lt.objs.langs.behaviors.str__GT_ns_keyword.call(null,new cljs.core.Keyword(null,"value","value",305978217).cljs$core$IFn$_invoke$arity$1(first_command))
):null);
return new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"tag","tag",-1290361223),tag__$1,new cljs.core.Keyword(null,"key","key",-1516042587),key,new cljs.core.Keyword(null,"first-command","first-command",2126889267),first_command__$1,new cljs.core.Keyword(null,"command-at-pos","command-at-pos",-1084895945),command,new cljs.core.Keyword(null,"arg-pos","arg-pos",967865317),arg_pos,new cljs.core.Keyword(null,"pos","pos",-864607220),pos], null);
});
lt.objs.langs.keymap.pos__GT_token_type = (function lt$objs$langs$keymap$pos__GT_token_type(pos){
var pred__12812 = cljs.core._EQ_;
var expr__12813 = pos;
if(cljs.core.truth_(pred__12812.call(null,(0),expr__12813))){
return new cljs.core.Keyword(null,"tag","tag",-1290361223);
} else {
if(cljs.core.truth_(pred__12812.call(null,(1),expr__12813))){
return new cljs.core.Keyword(null,"key","key",-1516042587);
} else {
return new cljs.core.Keyword(null,"command","command",-894540724);
}
}
});
/**
 * 
 */
lt.objs.langs.keymap.__BEH__keymap_hints = (function lt$objs$langs$keymap$__BEH__keymap_hints(this$,hints,token){
var idx = lt.objs.langs.behaviors.__GT_index.call(null,this$);
var map__12815 = lt.objs.langs.keymap.idx__GT_entry_info.call(null,idx,new cljs.core.Keyword(null,"entries","entries",-86943161).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
var map__12815__$1 = cljs.core.__destructure_map.call(null,map__12815);
var tag = cljs.core.get.call(null,map__12815__$1,new cljs.core.Keyword(null,"tag","tag",-1290361223));
var key = cljs.core.get.call(null,map__12815__$1,new cljs.core.Keyword(null,"key","key",-1516042587));
var pos = cljs.core.get.call(null,map__12815__$1,new cljs.core.Keyword(null,"pos","pos",-864607220));
var command_at_pos = cljs.core.get.call(null,map__12815__$1,new cljs.core.Keyword(null,"command-at-pos","command-at-pos",-1084895945));
var arg_pos = cljs.core.get.call(null,map__12815__$1,new cljs.core.Keyword(null,"arg-pos","arg-pos",967865317));
var comps = ((((cljs.core.not.call(null,arg_pos)) || ((arg_pos < (1)))))?lt.objs.langs.keymap.completions.call(null,lt.objs.langs.keymap.pos__GT_token_type.call(null,pos)):null);
if(cljs.core.not.call(null,comps)){
return hints;
} else {
return comps.call(null,token);
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","keymap-hints","lt.objs.langs.keymap/keymap-hints",1641370826),new cljs.core.Keyword(null,"exclusive","exclusive",-1507998718),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("lt.plugins.auto-complete","textual-hints","lt.plugins.auto-complete/textual-hints",-1745587195)], null),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"hints+","hints+",924172113),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__keymap_hints);
/**
 * 
 */
lt.objs.langs.keymap.__BEH__show_info_on_move = (function lt$objs$langs$keymap$__BEH__show_info_on_move(this$){
var idx = lt.objs.langs.behaviors.__GT_index.call(null,this$);
var map__12816 = lt.objs.langs.keymap.idx__GT_entry_info.call(null,idx,new cljs.core.Keyword(null,"entries","entries",-86943161).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
var map__12816__$1 = cljs.core.__destructure_map.call(null,map__12816);
var command_at_pos = cljs.core.get.call(null,map__12816__$1,new cljs.core.Keyword(null,"command-at-pos","command-at-pos",-1084895945));
var arg_pos = cljs.core.get.call(null,map__12816__$1,new cljs.core.Keyword(null,"arg-pos","arg-pos",967865317));
var first_command = cljs.core.get.call(null,map__12816__$1,new cljs.core.Keyword(null,"first-command","first-command",2126889267));
var command = cljs.core.get.call(null,new cljs.core.Keyword(null,"commands","commands",161008658).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.command.manager)),(function (){var or__4160__auto__ = command_at_pos;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return first_command;
}
})());
if(cljs.core.truth_(command)){
return lt.object.raise.call(null,lt.objs.langs.keymap.helper,new cljs.core.Keyword(null,"show!","show!",1939158011),this$,command,arg_pos);
} else {
return lt.object.raise.call(null,lt.objs.langs.keymap.helper,new cljs.core.Keyword(null,"clear!","clear!",-144814418),this$);
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","show-info-on-move","lt.objs.langs.keymap/show-info-on-move",-1949608426),new cljs.core.Keyword(null,"debounce","debounce",-871550296),(200),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"move","move",-2110884309),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__show_info_on_move);
/**
 * 
 */
lt.objs.langs.keymap.__BEH__keymap_hint_pattern = (function lt$objs$langs$keymap$__BEH__keymap_hint_pattern(this$){
return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"hint-pattern","hint-pattern",-1622710880),/[\w\-\>\:\*\$\?\<\!\+\.\"\\/]/], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","keymap-hint-pattern","lt.objs.langs.keymap/keymap-hint-pattern",-589681060),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"object.instant","object.instant",-29936727),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__keymap_hint_pattern);
/**
 * 
 */
lt.objs.langs.keymap.__BEH__on_changed = (function lt$objs$langs$keymap$__BEH__on_changed(this$){
return lt.objs.langs.behaviors.flat_parser.call(null,this$,lt.objs.editor.__GT_val.call(null,this$));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","on-changed","lt.objs.langs.keymap/on-changed",1775377483),new cljs.core.Keyword(null,"debounce","debounce",-871550296),(50),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"create","create",-1301499256),null,new cljs.core.Keyword(null,"change","change",-1163046502),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__on_changed);
/**
 * 
 */
lt.objs.langs.keymap.__BEH__parsed = (function lt$objs$langs$keymap$__BEH__parsed(this$,results){
lt.object.merge_BANG_.call(null,this$,cljs.core.js__GT_clj.call(null,results,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"move","move",-2110884309));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","parsed","lt.objs.langs.keymap/parsed",1743451178),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"parsed","parsed",-819589156),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__parsed);
lt.objs.langs.keymap.inline = (function lt$objs$langs$keymap$inline(this$,ed,opts){
return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.eval","inline-result","lt.objs.eval/inline-result",1129209318),new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"ed","ed",436294224),ed,new cljs.core.Keyword(null,"class","class",-2030961996),"behavior-helper",new cljs.core.Keyword(null,"opts","opts",155075701),opts,new cljs.core.Keyword(null,"result","result",1415092211),lt.object.__GT_content.call(null,this$),new cljs.core.Keyword(null,"above","above",-1286866470),cljs.core.boolean$.call(null,(new cljs.core.Keyword(null,"prev-line","prev-line",361343201).cljs$core$IFn$_invoke$arity$1(opts) < new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(opts))),new cljs.core.Keyword(null,"loc","loc",-584284901),opts,new cljs.core.Keyword(null,"line","line",212345235),lt.objs.editor.line_handle.call(null,ed,new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(opts))], null));
});
/**
 * 
 */
lt.objs.langs.keymap.__GT_helper = (function lt$objs$langs$keymap$__GT_helper(keym){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",-372662728),new cljs.core.Keyword(null,"desc","desc",2093485764).cljs$core$IFn$_invoke$arity$2(keym,new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(keym))], null),(cljs.core.truth_(new cljs.core.Keyword(null,"params","params",710516235).cljs$core$IFn$_invoke$arity$1(keym))?(function (){var iter__4564__auto__ = (function lt$objs$langs$keymap$__GT_helper_$_iter__12817(s__12818){
return (new cljs.core.LazySeq(null,(function (){
var s__12818__$1 = s__12818;
while(true){
var temp__5753__auto__ = cljs.core.seq.call(null,s__12818__$1);
if(temp__5753__auto__){
var s__12818__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,s__12818__$2)){
var c__4562__auto__ = cljs.core.chunk_first.call(null,s__12818__$2);
var size__4563__auto__ = cljs.core.count.call(null,c__4562__auto__);
var b__12820 = cljs.core.chunk_buffer.call(null,size__4563__auto__);
if((function (){var i__12819 = (0);
while(true){
if((i__12819 < size__4563__auto__)){
var p = cljs.core._nth.call(null,c__4562__auto__,i__12819);
cljs.core.chunk_append.call(null,b__12820,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1394872991),new cljs.core.Keyword(null,"label","label",1718410804).cljs$core$IFn$_invoke$arity$1(p),(cljs.core.truth_(new cljs.core.Keyword(null,"example","example",-1755779144).cljs$core$IFn$_invoke$arity$1(p))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"pre.example","pre.example",-1014445954),new cljs.core.Keyword(null,"example","example",-1755779144).cljs$core$IFn$_invoke$arity$1(p)], null):null)], null));

var G__12837 = (i__12819 + (1));
i__12819 = G__12837;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12820),lt$objs$langs$keymap$__GT_helper_$_iter__12817.call(null,cljs.core.chunk_rest.call(null,s__12818__$2)));
} else {
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12820),null);
}
} else {
var p = cljs.core.first.call(null,s__12818__$2);
return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1394872991),new cljs.core.Keyword(null,"label","label",1718410804).cljs$core$IFn$_invoke$arity$1(p),(cljs.core.truth_(new cljs.core.Keyword(null,"example","example",-1755779144).cljs$core$IFn$_invoke$arity$1(p))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"pre.example","pre.example",-1014445954),new cljs.core.Keyword(null,"example","example",-1755779144).cljs$core$IFn$_invoke$arity$1(p)], null):null)], null),lt$objs$langs$keymap$__GT_helper_$_iter__12817.call(null,cljs.core.rest.call(null,s__12818__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4564__auto__.call(null,new cljs.core.Keyword(null,"params","params",710516235).cljs$core$IFn$_invoke$arity$1(keym));
})():null)], null));
var seq__12821_12838 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),cljs.core.PersistentVector.EMPTY));
var chunk__12822_12839 = null;
var count__12823_12840 = (0);
var i__12824_12841 = (0);
while(true){
if((i__12824_12841 < count__12823_12840)){
var vec__12831_12842 = cljs.core._nth.call(null,chunk__12822_12839,i__12824_12841);
var ev__993__auto___12843 = cljs.core.nth.call(null,vec__12831_12842,(0),null);
var func__994__auto___12844 = cljs.core.nth.call(null,vec__12831_12842,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12843,func__994__auto___12844);


var G__12845 = seq__12821_12838;
var G__12846 = chunk__12822_12839;
var G__12847 = count__12823_12840;
var G__12848 = (i__12824_12841 + (1));
seq__12821_12838 = G__12845;
chunk__12822_12839 = G__12846;
count__12823_12840 = G__12847;
i__12824_12841 = G__12848;
continue;
} else {
var temp__5753__auto___12849 = cljs.core.seq.call(null,seq__12821_12838);
if(temp__5753__auto___12849){
var seq__12821_12850__$1 = temp__5753__auto___12849;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12821_12850__$1)){
var c__4591__auto___12851 = cljs.core.chunk_first.call(null,seq__12821_12850__$1);
var G__12852 = cljs.core.chunk_rest.call(null,seq__12821_12850__$1);
var G__12853 = c__4591__auto___12851;
var G__12854 = cljs.core.count.call(null,c__4591__auto___12851);
var G__12855 = (0);
seq__12821_12838 = G__12852;
chunk__12822_12839 = G__12853;
count__12823_12840 = G__12854;
i__12824_12841 = G__12855;
continue;
} else {
var vec__12834_12856 = cljs.core.first.call(null,seq__12821_12850__$1);
var ev__993__auto___12857 = cljs.core.nth.call(null,vec__12834_12856,(0),null);
var func__994__auto___12858 = cljs.core.nth.call(null,vec__12834_12856,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12857,func__994__auto___12858);


var G__12859 = cljs.core.next.call(null,seq__12821_12850__$1);
var G__12860 = null;
var G__12861 = (0);
var G__12862 = (0);
seq__12821_12838 = G__12859;
chunk__12822_12839 = G__12860;
count__12823_12840 = G__12861;
i__12824_12841 = G__12862;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.objs.langs.keymap.set_param = (function lt$objs$langs$keymap$set_param(this$,idx){
var lis = lt.util.dom.$$.call(null,"span",lt.object.__GT_content.call(null,this$));
var seq__12863_12867 = cljs.core.seq.call(null,lis);
var chunk__12864_12868 = null;
var count__12865_12869 = (0);
var i__12866_12870 = (0);
while(true){
if((i__12866_12870 < count__12865_12869)){
var li_12871 = cljs.core._nth.call(null,chunk__12864_12868,i__12866_12870);
lt.util.dom.remove_class.call(null,li_12871,new cljs.core.Keyword(null,"active","active",1895962068));


var G__12872 = seq__12863_12867;
var G__12873 = chunk__12864_12868;
var G__12874 = count__12865_12869;
var G__12875 = (i__12866_12870 + (1));
seq__12863_12867 = G__12872;
chunk__12864_12868 = G__12873;
count__12865_12869 = G__12874;
i__12866_12870 = G__12875;
continue;
} else {
var temp__5753__auto___12876 = cljs.core.seq.call(null,seq__12863_12867);
if(temp__5753__auto___12876){
var seq__12863_12877__$1 = temp__5753__auto___12876;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12863_12877__$1)){
var c__4591__auto___12878 = cljs.core.chunk_first.call(null,seq__12863_12877__$1);
var G__12879 = cljs.core.chunk_rest.call(null,seq__12863_12877__$1);
var G__12880 = c__4591__auto___12878;
var G__12881 = cljs.core.count.call(null,c__4591__auto___12878);
var G__12882 = (0);
seq__12863_12867 = G__12879;
chunk__12864_12868 = G__12880;
count__12865_12869 = G__12881;
i__12866_12870 = G__12882;
continue;
} else {
var li_12883 = cljs.core.first.call(null,seq__12863_12877__$1);
lt.util.dom.remove_class.call(null,li_12883,new cljs.core.Keyword(null,"active","active",1895962068));


var G__12884 = cljs.core.next.call(null,seq__12863_12877__$1);
var G__12885 = null;
var G__12886 = (0);
var G__12887 = (0);
seq__12863_12867 = G__12884;
chunk__12864_12868 = G__12885;
count__12865_12869 = G__12886;
i__12866_12870 = G__12887;
continue;
}
} else {
}
}
break;
}

if(cljs.core.truth_(idx)){
return lt.util.dom.add_class.call(null,(lis[idx]),new cljs.core.Keyword(null,"active","active",1895962068));
} else {
return null;
}
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","helper","lt.objs.langs.keymap/helper",-1451849137),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.keymap.helper","editor.keymap.helper",1576513224),null], null), null));
/**
 * 
 */
lt.objs.langs.keymap.__BEH__helper__DOT__show_BANG_ = (function lt$objs$langs$keymap$__BEH__helper__DOT__show_BANG_(this$,ed,keym,param_idx){
var loc = lt.objs.editor.__GT_cursor.call(null,ed);
if(((cljs.core.not_EQ_.call(null,keym,new cljs.core.Keyword(null,"key","key",-1516042587).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))) || (cljs.core.not_EQ_.call(null,ed,new cljs.core.Keyword(null,"ed","ed",436294224).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))))){
if(cljs.core.truth_(new cljs.core.Keyword(null,"mark","mark",-373816345).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))){
lt.objs.editor._line_class.call(null,ed,new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"text","text",-1790561697),"behavior-helper-line");

lt.object.raise.call(null,new cljs.core.Keyword(null,"mark","mark",-373816345).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"clear!","clear!",-144814418));
} else {
}

lt.objs.editor._PLUS_line_class.call(null,ed,new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"text","text",-1790561697),"behavior-helper-line");

lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"content","content",15833224),lt.objs.langs.keymap.__GT_helper.call(null,keym)], null));

lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"mark","mark",-373816345),lt.objs.langs.keymap.inline.call(null,this$,ed,cljs.core.assoc.call(null,loc,new cljs.core.Keyword(null,"prev-line","prev-line",361343201),new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))),new cljs.core.Keyword(null,"key","key",-1516042587),keym,new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"line","line",212345235).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"ed","ed",436294224),ed], null));
} else {
}

return lt.objs.langs.keymap.set_param.call(null,this$,param_idx);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","helper.show!","lt.objs.langs.keymap/helper.show!",358523237),new cljs.core.Keyword(null,"desc","desc",2093485764),"Keymap.helper: show",new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show!","show!",1939158011),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.langs.keymap.__BEH__helper__DOT__show_BANG_);
lt.objs.langs.keymap.helper = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.langs.keymap","helper","lt.objs.langs.keymap/helper",-1451849137));

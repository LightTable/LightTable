// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.browser');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.tabs');
goog.require('lt.objs.command');
goog.require('lt.objs.console');
goog.require('lt.objs.files');
goog.require('lt.objs.eval');
goog.require('lt.objs.clients');
goog.require('lt.objs.sidebar.clients');
goog.require('lt.objs.menu');
goog.require('lt.objs.platform');
goog.require('lt.objs.context');
goog.require('lt.objs.editor');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.keyboard');
goog.require('lt.objs.notifos');
goog.require('lt.objs.clients.devtools');
goog.require('lt.util.dom');
goog.require('clojure.string');
goog.require('singultus.core');
goog.require('singultus.binding');
lt.objs.browser.utils = ({});
(lttools = lt.objs.browser.utils);
lt.objs.browser.check_http = (function lt$objs$browser$check_http(url){
if(((cljs.core._EQ_.call(null,url.indexOf("http"),(-1))) && (cljs.core._EQ_.call(null,url.indexOf("file://"),(-1))))){
return ["http://",cljs.core.str.cljs$core$IFn$_invoke$arity$1(url)].join('');
} else {
return url;
}
});
lt.objs.browser.add_util = (function lt$objs$browser$add_util(nme,fn){
return (lt.objs.browser.utils[cljs.core.name.call(null,nme)] = fn);
});
lt.objs.browser.browser_id = (function lt$objs$browser$browser_id(this$){
return ["browser",cljs.core.str.cljs$core$IFn$_invoke$arity$1(lt.object.__GT_id.call(null,this$))].join('');
});
lt.objs.browser.to_frame = (function lt$objs$browser$to_frame(this$){
return lt.util.dom.$.call(null,new cljs.core.Keyword(null,"webview","webview",-1131133239),lt.object.__GT_content.call(null,this$));
});
lt.objs.browser.client__GT_devtools = (function lt$objs$browser$client__GT_devtools(ed){
return new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,new cljs.core.Keyword(null,"frame","frame",-1711082588).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))));
});
lt.objs.browser.handle_cb = (function lt$objs$browser$handle_cb(cbid,command,data){
return lt.object.raise.call(null,lt.objs.clients.clients,new cljs.core.Keyword(null,"message","message",-406056002),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cbid,command,data], null));
});
lt.objs.browser.connect_client = (function lt$objs$browser$connect_client(this$){
return lt.objs.clients.handle_connection_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"url","url",276297046).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"frame","frame",-1711082588),this$,new cljs.core.Keyword(null,"frame-id","frame-id",-636372072),lt.objs.browser.browser_id.call(null,this$),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"frame.client","frame.client",-420458396)], null),new cljs.core.Keyword(null,"commands","commands",161008658),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"editor.eval.cljs.exec","editor.eval.cljs.exec",141962241),null,new cljs.core.Keyword(null,"editor.eval.css","editor.eval.css",601791630),null,new cljs.core.Keyword(null,"editor.eval.js","editor.eval.js",-264636460),null,new cljs.core.Keyword(null,"editor.eval.html","editor.eval.html",1110263869),null], null), null),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"frame","frame",-1711082588)], null));
});
lt.objs.browser.add = (function lt$objs$browser$add(){
var browser = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.browser","browser","lt.objs.browser/browser",1226215459));
lt.objs.tabs.add_BANG_.call(null,browser);

lt.objs.tabs.active_BANG_.call(null,browser);

return browser;
});
/**
 * 
 */
lt.objs.browser.url_bar = (function lt$objs$browser$url_bar(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.url-bar","input.url-bar",-1824716954),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"url",new cljs.core.Keyword(null,"value","value",305978217),singultus.binding.bound.call(null,this$,new cljs.core.Keyword(null,"url","url",276297046))], null)], null));
var seq__12304_12320 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (){
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"browser.url-bar","browser.url-bar",-1583742887),this$);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));

return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"browser.url-bar","browser.url-bar",-1583742887));
});})(e__992__auto__))
], null)));
var chunk__12305_12321 = null;
var count__12306_12322 = (0);
var i__12307_12323 = (0);
while(true){
if((i__12307_12323 < count__12306_12322)){
var vec__12314_12324 = cljs.core._nth.call(null,chunk__12305_12321,i__12307_12323);
var ev__993__auto___12325 = cljs.core.nth.call(null,vec__12314_12324,(0),null);
var func__994__auto___12326 = cljs.core.nth.call(null,vec__12314_12324,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12325,func__994__auto___12326);


var G__12327 = seq__12304_12320;
var G__12328 = chunk__12305_12321;
var G__12329 = count__12306_12322;
var G__12330 = (i__12307_12323 + (1));
seq__12304_12320 = G__12327;
chunk__12305_12321 = G__12328;
count__12306_12322 = G__12329;
i__12307_12323 = G__12330;
continue;
} else {
var temp__5753__auto___12331 = cljs.core.seq.call(null,seq__12304_12320);
if(temp__5753__auto___12331){
var seq__12304_12332__$1 = temp__5753__auto___12331;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12304_12332__$1)){
var c__4591__auto___12333 = cljs.core.chunk_first.call(null,seq__12304_12332__$1);
var G__12334 = cljs.core.chunk_rest.call(null,seq__12304_12332__$1);
var G__12335 = c__4591__auto___12333;
var G__12336 = cljs.core.count.call(null,c__4591__auto___12333);
var G__12337 = (0);
seq__12304_12320 = G__12334;
chunk__12305_12321 = G__12335;
count__12306_12322 = G__12336;
i__12307_12323 = G__12337;
continue;
} else {
var vec__12317_12338 = cljs.core.first.call(null,seq__12304_12332__$1);
var ev__993__auto___12339 = cljs.core.nth.call(null,vec__12317_12338,(0),null);
var func__994__auto___12340 = cljs.core.nth.call(null,vec__12317_12338,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12339,func__994__auto___12340);


var G__12341 = cljs.core.next.call(null,seq__12304_12332__$1);
var G__12342 = null;
var G__12343 = (0);
var G__12344 = (0);
seq__12304_12320 = G__12341;
chunk__12305_12321 = G__12342;
count__12306_12322 = G__12343;
i__12307_12323 = G__12344;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.browser.backward = (function lt$objs$browser$backward(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),"<"], null),"<"], null));
var seq__12345_12361 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"back!","back!",464740510));
});})(e__992__auto__))
], null)));
var chunk__12346_12362 = null;
var count__12347_12363 = (0);
var i__12348_12364 = (0);
while(true){
if((i__12348_12364 < count__12347_12363)){
var vec__12355_12365 = cljs.core._nth.call(null,chunk__12346_12362,i__12348_12364);
var ev__993__auto___12366 = cljs.core.nth.call(null,vec__12355_12365,(0),null);
var func__994__auto___12367 = cljs.core.nth.call(null,vec__12355_12365,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12366,func__994__auto___12367);


var G__12368 = seq__12345_12361;
var G__12369 = chunk__12346_12362;
var G__12370 = count__12347_12363;
var G__12371 = (i__12348_12364 + (1));
seq__12345_12361 = G__12368;
chunk__12346_12362 = G__12369;
count__12347_12363 = G__12370;
i__12348_12364 = G__12371;
continue;
} else {
var temp__5753__auto___12372 = cljs.core.seq.call(null,seq__12345_12361);
if(temp__5753__auto___12372){
var seq__12345_12373__$1 = temp__5753__auto___12372;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12345_12373__$1)){
var c__4591__auto___12374 = cljs.core.chunk_first.call(null,seq__12345_12373__$1);
var G__12375 = cljs.core.chunk_rest.call(null,seq__12345_12373__$1);
var G__12376 = c__4591__auto___12374;
var G__12377 = cljs.core.count.call(null,c__4591__auto___12374);
var G__12378 = (0);
seq__12345_12361 = G__12375;
chunk__12346_12362 = G__12376;
count__12347_12363 = G__12377;
i__12348_12364 = G__12378;
continue;
} else {
var vec__12358_12379 = cljs.core.first.call(null,seq__12345_12373__$1);
var ev__993__auto___12380 = cljs.core.nth.call(null,vec__12358_12379,(0),null);
var func__994__auto___12381 = cljs.core.nth.call(null,vec__12358_12379,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12380,func__994__auto___12381);


var G__12382 = cljs.core.next.call(null,seq__12345_12373__$1);
var G__12383 = null;
var G__12384 = (0);
var G__12385 = (0);
seq__12345_12361 = G__12382;
chunk__12346_12362 = G__12383;
count__12347_12363 = G__12384;
i__12348_12364 = G__12385;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.browser.forward = (function lt$objs$browser$forward(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),">"], null),">"], null));
var seq__12386_12402 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"forward!","forward!",44176912));
});})(e__992__auto__))
], null)));
var chunk__12387_12403 = null;
var count__12388_12404 = (0);
var i__12389_12405 = (0);
while(true){
if((i__12389_12405 < count__12388_12404)){
var vec__12396_12406 = cljs.core._nth.call(null,chunk__12387_12403,i__12389_12405);
var ev__993__auto___12407 = cljs.core.nth.call(null,vec__12396_12406,(0),null);
var func__994__auto___12408 = cljs.core.nth.call(null,vec__12396_12406,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12407,func__994__auto___12408);


var G__12409 = seq__12386_12402;
var G__12410 = chunk__12387_12403;
var G__12411 = count__12388_12404;
var G__12412 = (i__12389_12405 + (1));
seq__12386_12402 = G__12409;
chunk__12387_12403 = G__12410;
count__12388_12404 = G__12411;
i__12389_12405 = G__12412;
continue;
} else {
var temp__5753__auto___12413 = cljs.core.seq.call(null,seq__12386_12402);
if(temp__5753__auto___12413){
var seq__12386_12414__$1 = temp__5753__auto___12413;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12386_12414__$1)){
var c__4591__auto___12415 = cljs.core.chunk_first.call(null,seq__12386_12414__$1);
var G__12416 = cljs.core.chunk_rest.call(null,seq__12386_12414__$1);
var G__12417 = c__4591__auto___12415;
var G__12418 = cljs.core.count.call(null,c__4591__auto___12415);
var G__12419 = (0);
seq__12386_12402 = G__12416;
chunk__12387_12403 = G__12417;
count__12388_12404 = G__12418;
i__12389_12405 = G__12419;
continue;
} else {
var vec__12399_12420 = cljs.core.first.call(null,seq__12386_12414__$1);
var ev__993__auto___12421 = cljs.core.nth.call(null,vec__12399_12420,(0),null);
var func__994__auto___12422 = cljs.core.nth.call(null,vec__12399_12420,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12421,func__994__auto___12422);


var G__12423 = cljs.core.next.call(null,seq__12386_12414__$1);
var G__12424 = null;
var G__12425 = (0);
var G__12426 = (0);
seq__12386_12402 = G__12423;
chunk__12387_12403 = G__12424;
count__12388_12404 = G__12425;
i__12389_12405 = G__12426;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.browser.refresh = (function lt$objs$browser$refresh(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),"re"], null),"\u21BA"], null));
var seq__12427_12443 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
});})(e__992__auto__))
], null)));
var chunk__12428_12444 = null;
var count__12429_12445 = (0);
var i__12430_12446 = (0);
while(true){
if((i__12430_12446 < count__12429_12445)){
var vec__12437_12447 = cljs.core._nth.call(null,chunk__12428_12444,i__12430_12446);
var ev__993__auto___12448 = cljs.core.nth.call(null,vec__12437_12447,(0),null);
var func__994__auto___12449 = cljs.core.nth.call(null,vec__12437_12447,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12448,func__994__auto___12449);


var G__12450 = seq__12427_12443;
var G__12451 = chunk__12428_12444;
var G__12452 = count__12429_12445;
var G__12453 = (i__12430_12446 + (1));
seq__12427_12443 = G__12450;
chunk__12428_12444 = G__12451;
count__12429_12445 = G__12452;
i__12430_12446 = G__12453;
continue;
} else {
var temp__5753__auto___12454 = cljs.core.seq.call(null,seq__12427_12443);
if(temp__5753__auto___12454){
var seq__12427_12455__$1 = temp__5753__auto___12454;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12427_12455__$1)){
var c__4591__auto___12456 = cljs.core.chunk_first.call(null,seq__12427_12455__$1);
var G__12457 = cljs.core.chunk_rest.call(null,seq__12427_12455__$1);
var G__12458 = c__4591__auto___12456;
var G__12459 = cljs.core.count.call(null,c__4591__auto___12456);
var G__12460 = (0);
seq__12427_12443 = G__12457;
chunk__12428_12444 = G__12458;
count__12429_12445 = G__12459;
i__12430_12446 = G__12460;
continue;
} else {
var vec__12440_12461 = cljs.core.first.call(null,seq__12427_12455__$1);
var ev__993__auto___12462 = cljs.core.nth.call(null,vec__12440_12461,(0),null);
var func__994__auto___12463 = cljs.core.nth.call(null,vec__12440_12461,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12462,func__994__auto___12463);


var G__12464 = cljs.core.next.call(null,seq__12427_12455__$1);
var G__12465 = null;
var G__12466 = (0);
var G__12467 = (0);
seq__12427_12443 = G__12464;
chunk__12428_12444 = G__12465;
count__12429_12445 = G__12466;
i__12430_12446 = G__12467;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.browser.webview = (function lt$objs$browser$webview(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"webview","webview",-1131133239),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"src","src",-1651076051),singultus.binding.bound.call(null,singultus.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"url","url",276297046))),new cljs.core.Keyword(null,"id","id",-1388402092),lt.objs.browser.browser_id.call(null,this$),new cljs.core.Keyword(null,"preload","preload",1646824722),lt.objs.files.lt_home.call(null,"core/node_modules/lighttable/browserInjection.js")], null)], null));
var seq__12468_12484 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"active","active",1895962068));
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));
});})(e__992__auto__))
], null)));
var chunk__12469_12485 = null;
var count__12470_12486 = (0);
var i__12471_12487 = (0);
while(true){
if((i__12471_12487 < count__12470_12486)){
var vec__12478_12488 = cljs.core._nth.call(null,chunk__12469_12485,i__12471_12487);
var ev__993__auto___12489 = cljs.core.nth.call(null,vec__12478_12488,(0),null);
var func__994__auto___12490 = cljs.core.nth.call(null,vec__12478_12488,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12489,func__994__auto___12490);


var G__12491 = seq__12468_12484;
var G__12492 = chunk__12469_12485;
var G__12493 = count__12470_12486;
var G__12494 = (i__12471_12487 + (1));
seq__12468_12484 = G__12491;
chunk__12469_12485 = G__12492;
count__12470_12486 = G__12493;
i__12471_12487 = G__12494;
continue;
} else {
var temp__5753__auto___12495 = cljs.core.seq.call(null,seq__12468_12484);
if(temp__5753__auto___12495){
var seq__12468_12496__$1 = temp__5753__auto___12495;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12468_12496__$1)){
var c__4591__auto___12497 = cljs.core.chunk_first.call(null,seq__12468_12496__$1);
var G__12498 = cljs.core.chunk_rest.call(null,seq__12468_12496__$1);
var G__12499 = c__4591__auto___12497;
var G__12500 = cljs.core.count.call(null,c__4591__auto___12497);
var G__12501 = (0);
seq__12468_12484 = G__12498;
chunk__12469_12485 = G__12499;
count__12470_12486 = G__12500;
i__12471_12487 = G__12501;
continue;
} else {
var vec__12481_12502 = cljs.core.first.call(null,seq__12468_12496__$1);
var ev__993__auto___12503 = cljs.core.nth.call(null,vec__12481_12502,(0),null);
var func__994__auto___12504 = cljs.core.nth.call(null,vec__12481_12502,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12503,func__994__auto___12504);


var G__12505 = cljs.core.next.call(null,seq__12468_12496__$1);
var G__12506 = null;
var G__12507 = (0);
var G__12508 = (0);
seq__12468_12484 = G__12505;
chunk__12469_12485 = G__12506;
count__12470_12486 = G__12507;
i__12471_12487 = G__12508;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","browser","lt.objs.browser/browser",1226215459),new cljs.core.Keyword(null,"name","name",1843675177),"browser",new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"browser","browser",828191719),null], null), null),new cljs.core.Keyword(null,"url","url",276297046),"about:blank",new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"client","client",-1323448117),lt.objs.browser.connect_client.call(null,this$),new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942),lt.object.create.call(null,new cljs.core.Keyword("lt.objs.clients.devtools","devtools-client","lt.objs.clients.devtools/devtools-client",1379965666),new cljs.core.Keyword(null,"url","url",276297046).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))], null));

lt.object.raise.call(null,new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"reconnect!","reconnect!",964525183));

return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#browser","div#browser",-413166357),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.frame-shade","div.frame-shade",-968604833)], null),lt.objs.browser.webview.call(null,this$),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"nav","nav",719540477),lt.objs.browser.backward.call(null,this$),lt.objs.browser.forward.call(null,this$),lt.objs.browser.url_bar.call(null,this$),lt.objs.browser.refresh.call(null,this$)], null)], null);
}));
/**
 * 
 */
lt.objs.browser.__BEH__reconnect_on_move = (function lt$objs$browser$__BEH__reconnect_on_move(this$){
return lt.object.raise.call(null,new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"reconnect!","reconnect!",964525183));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","reconnect-on-move","lt.objs.browser/reconnect-on-move",668704509),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"move","move",-2110884309),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__reconnect_on_move);
/**
 * 
 */
lt.objs.browser.__BEH__destroy_on_close = (function lt$objs$browser$__BEH__destroy_on_close(this$){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"inactive","inactive",-306247616));

lt.object.destroy_BANG_.call(null,new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));

return lt.object.destroy_BANG_.call(null,this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","destroy-on-close","lt.objs.browser/destroy-on-close",-1067036522),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1835149582),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__destroy_on_close);
/**
 * 
 */
lt.objs.browser.__BEH__rem_client = (function lt$objs$browser$__BEH__rem_client(this$){
if(cljs.core._EQ_.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357)),this$)){
lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357));
} else {
}

var temp__5753__auto___12509 = cljs.core.first.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.createAsIfByAssoc([this$]),lt.object.by_tag.call(null,new cljs.core.Keyword(null,"browser","browser",828191719))));
if(cljs.core.truth_(temp__5753__auto___12509)){
var b_12510 = temp__5753__auto___12509;
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357),b_12510);
} else {
}

return lt.objs.clients.rem_BANG_.call(null,new cljs.core.Keyword(null,"client","client",-1323448117).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","rem-client","lt.objs.browser/rem-client",1251586798),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"destroy","destroy",-843660405),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__rem_client);
/**
 * 
 */
lt.objs.browser.__BEH__navigate_BANG_ = (function lt$objs$browser$__BEH__navigate_BANG_(this$,n){
var bar = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$));
var url = lt.objs.browser.check_http.call(null,(function (){var or__4160__auto__ = n;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return lt.util.dom.val.call(null,bar);
}
})());
lt.objs.notifos.working.call(null);

return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"url","url",276297046),url,new cljs.core.Keyword(null,"loading-counter","loading-counter",360873758),(new cljs.core.Keyword(null,"loading-counter","loading-counter",360873758).cljs$core$IFn$_invoke$arity$2(cljs.core.deref.call(null,this$),(0)) + (1))], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","navigate!","lt.objs.browser/navigate!",447947080),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"navigate!","navigate!",79998348),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__navigate_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__url_focus_BANG_ = (function lt$objs$browser$__BEH__url_focus_BANG_(this$){
var url_input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$));
lt.util.dom.focus.call(null,url_input);

return url_input.select();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","url-focus!","lt.objs.browser/url-focus!",2115507532),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"url.focus!","url.focus!",1123649603),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__url_focus_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__focus_BANG_ = (function lt$objs$browser$__BEH__focus_BANG_(this$){
return lt.util.dom.focus.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"webview","webview",-1131133239),lt.object.__GT_content.call(null,this$)));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","focus!","lt.objs.browser/focus!",-587352995),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",-1344984927),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__focus_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__back_BANG_ = (function lt$objs$browser$__BEH__back_BANG_(this$){
var frame = lt.objs.browser.to_frame.call(null,this$);
return frame.goBack();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","back!","lt.objs.browser/back!",-465316774),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"back!","back!",464740510),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__back_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__forward_BANG_ = (function lt$objs$browser$__BEH__forward_BANG_(this$){
var frame = lt.objs.browser.to_frame.call(null,this$);
return frame.goForward();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","forward!","lt.objs.browser/forward!",-376985148),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"forward!","forward!",44176912),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__forward_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__refresh_BANG_ = (function lt$objs$browser$__BEH__refresh_BANG_(this$){
var frame = lt.objs.browser.to_frame.call(null,this$);
return frame.reload();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","refresh!","lt.objs.browser/refresh!",-201706719),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh!","refresh!",156149341),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__refresh_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__menu_BANG_ = (function lt$objs$browser$__BEH__menu_BANG_(this$,e){
var items_12511 = cljs.core.sort_by.call(null,new cljs.core.Keyword(null,"order","order",-1254677256),lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"menu+","menu+",276559402),cljs.core.PersistentVector.EMPTY));
lt.objs.menu.show_menu.call(null,lt.objs.menu.menu.call(null,items_12511));

lt.util.dom.prevent.call(null,e);

return lt.util.dom.stop_propagation.call(null,e);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","menu!","lt.objs.browser/menu!",-876031095),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",-1593399467),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__menu_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__menu_PLUS_ = (function lt$objs$browser$__BEH__menu_PLUS_(this$,menu){
return cljs.core.conj.call(null,menu,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"forward",new cljs.core.Keyword(null,"order","order",-1254677256),(0),new cljs.core.Keyword(null,"click","click",1912301393),(function (e){
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"browser.forward","browser.forward",-1403890974));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"back",new cljs.core.Keyword(null,"order","order",-1254677256),(1),new cljs.core.Keyword(null,"click","click",1912301393),(function (e){
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"browser.back","browser.back",-285151307));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"separator",new cljs.core.Keyword(null,"order","order",-1254677256),(2)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"copy",new cljs.core.Keyword(null,"order","order",-1254677256),(3),new cljs.core.Keyword(null,"click","click",1912301393),(function (e){
return lt.objs.browser.to_frame.call(null,this$).copy();
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"paste",new cljs.core.Keyword(null,"order","order",-1254677256),(4),new cljs.core.Keyword(null,"click","click",1912301393),(function (e){
return lt.objs.browser.to_frame.call(null,this$).paste();
})], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","menu+","lt.objs.browser/menu+",121764470),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu+","menu+",276559402),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__menu_PLUS_);
/**
 * 
 */
lt.objs.browser.__BEH__init_BANG_ = (function lt$objs$browser$__BEH__init_BANG_(this$){
var frame = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"webview","webview",-1131133239),lt.object.__GT_content.call(null,this$));
var bar = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$));
frame.addEventListener("ipc-message",(function (e,arg){
var args = (e.args[(0)]);
var pred__12512 = cljs.core._EQ_;
var expr__12513 = e.channel;
if(cljs.core.truth_(pred__12512.call(null,"browser-event",expr__12513))){
return lt.object.raise.call(null,this$,cljs.core.keyword.call(null,(args[(0)])),(args[(1)]));
} else {
if(cljs.core.truth_(pred__12512.call(null,"browser-raise",expr__12513))){
return lt.object.raise.call(null,lt.object.by_id.call(null,(args[(0)])),cljs.core.keyword.call(null,(args[(1)])),cljs.core.js__GT_clj.call(null,(args[(2)]),new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true));
} else {
throw (new Error(["No matching clause: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(expr__12513)].join('')));
}
}
}));

frame.addEventListener("contextmenu",(function (e){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",-1593399467),e);
}));

return frame.addEventListener("did-finish-load",(function (){
var loc = frame.getUrl();
lt.objs.clients.devtools.clear_scripts_BANG_.call(null,new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));

lt.util.dom.val.call(null,bar,loc);

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"navigate","navigate",657596805),loc);
}));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","init!","lt.objs.browser/init!",1846742728),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",-1875481434),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__init_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__handle_hash_change = (function lt$objs$browser$__BEH__handle_hash_change(this$,info){
return lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",556931961),lt.object.__GT_content.call(null,this$)),info.href);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","handle-hash-change","lt.objs.browser/handle-hash-change",-426696567),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"hashchange","hashchange",1795201042),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__handle_hash_change);
/**
 * 
 */
lt.objs.browser.__BEH__set_client_name = (function lt$objs$browser$__BEH__set_client_name(this$,loc){
var title = lt.objs.browser.to_frame.call(null,this$).getTitle();
var title__$1 = (((!(cljs.core.empty_QMARK_.call(null,title))))?title:"browser");
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"name","name",1843675177),title__$1], null));

lt.objs.tabs.refresh_BANG_.call(null,this$);

var n__4648__auto___12515 = new cljs.core.Keyword(null,"loading-counter","loading-counter",360873758).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var x_12516 = (0);
while(true){
if((x_12516 < n__4648__auto___12515)){
lt.objs.notifos.done_working.call(null);

var G__12517 = (x_12516 + (1));
x_12516 = G__12517;
continue;
} else {
}
break;
}

return lt.object.merge_BANG_.call(null,new cljs.core.Keyword(null,"client","client",-1323448117).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"name","name",1843675177),loc], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","set-client-name","lt.objs.browser/set-client-name",-25771735),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"navigate","navigate",657596805),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__set_client_name);
/**
 * 
 */
lt.objs.browser.__BEH__update_devtools_client_url = (function lt$objs$browser$__BEH__update_devtools_client_url(this$,loc){
return lt.object.merge_BANG_.call(null,new cljs.core.Keyword(null,"devtools-client","devtools-client",-729131942).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"url","url",276297046),loc], null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","update-devtools-client-url","lt.objs.browser/update-devtools-client-url",1260619941),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"navigate","navigate",657596805),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__update_devtools_client_url);
/**
 * 
 */
lt.objs.browser.__BEH__set_active = (function lt$objs$browser$__BEH__set_active(this$){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357),this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","set-active","lt.objs.browser/set-active",113469761),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"active","active",1895962068),null,new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__set_active);
/**
 * 
 */
lt.objs.browser.__BEH__active_context = (function lt$objs$browser$__BEH__active_context(this$){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"browser","browser",828191719),this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","active-context","lt.objs.browser/active-context",222462122),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"active","active",1895962068),null,new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__active_context);
/**
 * 
 */
lt.objs.browser.__BEH__focus_on_show = (function lt$objs$browser$__BEH__focus_on_show(this$){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","focus-on-show","lt.objs.browser/focus-on-show",-1038273011),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__focus_on_show);
/**
 * 
 */
lt.objs.browser.__BEH__inactive_context = (function lt$objs$browser$__BEH__inactive_context(this$){
return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"browser","browser",828191719));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","inactive-context","lt.objs.browser/inactive-context",1789641436),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"inactive","inactive",-306247616),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__inactive_context);
/**
 * 
 */
lt.objs.browser.__BEH__handle_send_BANG_ = (function lt$objs$browser$__BEH__handle_send_BANG_(this$,msg){
return lt.object.raise.call(null,this$,cljs.core.keyword.call(null,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(msg)),"!"].join('')),msg);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","handle-send!","lt.objs.browser/handle-send!",1766256984),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"send!","send!",480076706),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__handle_send_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__handle_refresh_BANG_ = (function lt$objs$browser$__BEH__handle_refresh_BANG_(this$){
return lt.object.raise.call(null,new cljs.core.Keyword(null,"frame","frame",-1711082588).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","handle-refresh!","lt.objs.browser/handle-refresh!",-1859393901),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"client.refresh!","client.refresh!",-2094145525),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__handle_refresh_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__handle_close_BANG_ = (function lt$objs$browser$__BEH__handle_close_BANG_(this$){
lt.object.raise.call(null,new cljs.core.Keyword(null,"frame","frame",-1711082588).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"close","close",1835149582));

return lt.objs.clients.rem_BANG_.call(null,this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","handle-close!","lt.objs.browser/handle-close!",1531833591),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"client.close!","client.close!",-639418105),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__handle_close_BANG_);
/**
 * 
 */
lt.objs.browser.__BEH__change_live = (function lt$objs$browser$__BEH__change_live(this$,msg){
var temp__5753__auto__ = lt.objs.clients.cb__GT_obj.call(null,new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg));
if(cljs.core.truth_(temp__5753__auto__)){
var ed = temp__5753__auto__;
if(cljs.core.truth_(new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg)))){
return lt.objs.clients.devtools.changelive_BANG_.call(null,ed,new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg)),lt.plugins.watches.watched_range(ed,null,null,lt.objs.langs.js.src__GT_watch),(function (res){
return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"editor.eval.js.change-live.success","editor.eval.js.change-live.success",1842084705));
}),cljs.core.identity);
} else {
return null;
}
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","change-live","lt.objs.browser/change-live",1217081390),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.js.change-live!","editor.eval.js.change-live!",131748392),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__change_live);
/**
 * 
 */
lt.objs.browser.__BEH__js_eval_file = (function lt$objs$browser$__BEH__js_eval_file(this$,msg,cb){
var temp__5753__auto__ = lt.objs.clients.cb__GT_obj.call(null,new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg));
if(cljs.core.truth_(temp__5753__auto__)){
var ed = temp__5753__auto__;
var data = new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg);
var data__$1 = cljs.core.assoc.call(null,data,new cljs.core.Keyword(null,"code","code",1586293142),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"code","code",1586293142).cljs$core$IFn$_invoke$arity$1(data)),"\n\n//# sourceURL=",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(data))].join(''));
return lt.objs.clients.devtools.eval_in_webview_client.call(null,lt.objs.browser.client__GT_devtools.call(null,this$),data__$1,(function (res){
if(cljs.core.truth_(cb)){
cb.call(null);
} else {
}

return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"editor.eval.js.file.success","editor.eval.js.file.success",-1716848878));
}));
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","js-eval-file","lt.objs.browser/js-eval-file",1412489749),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.js.file!","editor.eval.js.file!",1221377215),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__js_eval_file);
/**
 * 
 */
lt.objs.browser.__BEH__html_eval = (function lt$objs$browser$__BEH__html_eval(this$,msg){
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"client.refresh!","client.refresh!",-2094145525));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","html-eval","lt.objs.browser/html-eval",1104819598),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.html!","editor.eval.html!",-1775758708),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__html_eval);
/**
 * 
 */
lt.objs.browser.__BEH__css_eval = (function lt$objs$browser$__BEH__css_eval(this$,msg){
var info = new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg);
var frame = lt.objs.browser.to_frame.call(null,new cljs.core.Keyword(null,"frame","frame",-1711082588).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return frame.send("editor.eval.css",({"name": new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(info), "code": new cljs.core.Keyword(null,"code","code",1586293142).cljs$core$IFn$_invoke$arity$1(info)}));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","css-eval","lt.objs.browser/css-eval",849827177),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.css!","editor.eval.css!",212410194),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__css_eval);
/**
 * 
 */
lt.objs.browser.__BEH__cljs_exec = (function lt$objs$browser$__BEH__cljs_exec(this$,msg){
var frame = lt.objs.browser.to_frame.call(null,new cljs.core.Keyword(null,"frame","frame",-1711082588).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
var info = new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg);
return frame.send("editor.eval.cljs.exec",({"results": cljs.core.clj__GT_js.call(null,new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(info)), "client": new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg)}));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","cljs-exec","lt.objs.browser/cljs-exec",1394836537),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.cljs.exec!","editor.eval.cljs.exec!",349545863),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__cljs_exec);
lt.objs.browser.eval_js_form = (function lt$objs$browser$eval_js_form(this$,msg){
var data = cljs.core.assoc.call(null,new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg),new cljs.core.Keyword(null,"code","code",1586293142),lt.objs.eval.append_source_file.call(null,new cljs.core.Keyword(null,"code","code",1586293142).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg)),new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg))));
var devtools_client = lt.objs.browser.client__GT_devtools.call(null,this$);
lt.objs.clients.devtools.eval_in_webview_client.call(null,devtools_client,data,(function (res){
var result = lt.objs.clients.devtools.inspector__GT_result.call(null,devtools_client,res);
var req = new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg);
var result__$1 = cljs.core.assoc.call(null,result,new cljs.core.Keyword(null,"meta","meta",1499536964),new cljs.core.Keyword(null,"meta","meta",1499536964).cljs$core$IFn$_invoke$arity$1(req),new cljs.core.Keyword(null,"no-inspect","no-inspect",-1343403980),true);
if(cljs.core.not.call(null,new cljs.core.Keyword(null,"ex","ex",-1413771341).cljs$core$IFn$_invoke$arity$1(result__$1))){
return lt.objs.browser.handle_cb.call(null,new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg),new cljs.core.Keyword(null,"editor.eval.js.result","editor.eval.js.result",1499033068),result__$1);
} else {
return lt.objs.browser.handle_cb.call(null,new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg),new cljs.core.Keyword(null,"editor.eval.js.exception","editor.eval.js.exception",1928121505),result__$1);
}
}));

return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"editor.eval.js.change-live!","editor.eval.js.change-live!",131748392),msg);
});
lt.objs.browser.must_eval_file_QMARK_ = (function lt$objs$browser$must_eval_file_QMARK_(devtools,msg){
if(cljs.core.truth_(new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg)))){
return ((cljs.core.not.call(null,new cljs.core.Keyword(null,"meta","meta",1499536964).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg)))) || (cljs.core.not.call(null,lt.objs.clients.devtools.find_script.call(null,devtools,new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg))))));
} else {
return null;
}
});
/**
 * 
 */
lt.objs.browser.__BEH__js_eval = (function lt$objs$browser$__BEH__js_eval(this$,msg){
var devtools = lt.objs.browser.client__GT_devtools.call(null,this$);
if(cljs.core.truth_(lt.objs.browser.must_eval_file_QMARK_.call(null,devtools,msg))){
var temp__5753__auto__ = lt.object.by_id.call(null,new cljs.core.Keyword(null,"cb","cb",589947841).cljs$core$IFn$_invoke$arity$1(msg));
if(cljs.core.truth_(temp__5753__auto__)){
var ed = temp__5753__auto__;
var data = new cljs.core.Keyword(null,"data","data",-232669377).cljs$core$IFn$_invoke$arity$1(msg);
var data__$1 = cljs.core.assoc.call(null,data,new cljs.core.Keyword(null,"code","code",1586293142),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(lt.objs.editor.__GT_val.call(null,ed)),"\n\n//# sourceURL=",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(data))].join(''));
return lt.objs.clients.devtools.eval_in_webview_client.call(null,lt.objs.browser.client__GT_devtools.call(null,this$),data__$1,(function (res){
return lt.objs.browser.eval_js_form.call(null,this$,msg);
}));
} else {
return null;
}
} else {
return lt.objs.browser.eval_js_form.call(null,this$,msg);
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.browser","js-eval","lt.objs.browser/js-eval",-822283744),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.eval.js!","editor.eval.js!",-112112138),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.browser.__BEH__js_eval);
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"browser.url-bar.navigate!","browser.url-bar.navigate!",1632807293),new cljs.core.Keyword(null,"desc","desc",2093485764),"BrowserUrlBar: navigate to location",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (loc){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"browser.url-bar","browser.url-bar",-1583742887));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"navigate!","navigate!",79998348),loc);
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"browser.url-bar.focus","browser.url-bar.focus",1619369742),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: focus url",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (loc){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"browser","browser",828191719));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"url.focus!","url.focus!",1123649603));
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"browser.focus-content","browser.focus-content",-925938530),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: focus content",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"browser","browser",828191719));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"browser.back","browser.back",-285151307),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: back",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"browser","browser",828191719));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"back!","back!",464740510));
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"browser.forward","browser.forward",-1403890974),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: forward",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"browser","browser",828191719));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"forward!","forward!",44176912));
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"add-browser-tab","add-browser-tab",612625027),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: add browser tab",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (loc){
var b = lt.objs.browser.add.call(null);
if(cljs.core.not.call(null,loc)){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"focus!","focus!",-1344984927));
} else {
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"navigate!","navigate!",79998348),loc);
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"refresh-connected-browser","refresh-connected-browser",-2111951493),new cljs.core.Keyword(null,"desc","desc",2093485764),"Browser: refresh active browser tab",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var temp__5753__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357));
if(cljs.core.truth_(temp__5753__auto__)){
var b = temp__5753__auto__;
if(cljs.core.truth_(cljs.core.deref.call(null,b))){
return lt.object.raise.call(null,b,new cljs.core.Keyword(null,"refresh!","refresh!",156149341));
} else {
return null;
}
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"editor.open-current-file-in-browser","editor.open-current-file-in-browser",358325704),new cljs.core.Keyword(null,"desc","desc",2093485764),"Editor: Open current file in browser",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var b = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357));
var ed = lt.objs.editor.pool.last_active.call(null);
if(cljs.core.truth_((function (){var and__4149__auto__ = ed;
if(cljs.core.truth_(and__4149__auto__)){
return new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"info","info",-317069002).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed)));
} else {
return and__4149__auto__;
}
})())){
if(cljs.core.truth_(b)){
} else {
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"add-browser-tab","add-browser-tab",612625027));
}

return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"global.browser","global.browser",536949357)),new cljs.core.Keyword(null,"navigate!","navigate!",79998348),["file://",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"path","path",-188191168).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"info","info",-317069002).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))))].join(''));
} else {
return null;
}
})], null));
lt.objs.sidebar.clients.add_connector.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1843675177),"Browser",new cljs.core.Keyword(null,"desc","desc",2093485764),"Open a browser tab to eval JavaScript, CSS, and HTML live.",new cljs.core.Keyword(null,"connect","connect",1232828233),(function (){
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"add-browser-tab","add-browser-tab",612625027));
})], null));

// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.version');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.sidebar.command');
goog.require('lt.objs.opener');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.editor');
goog.require('lt.objs.files');
goog.require('lt.objs.tabs');
goog.require('lt.objs.deploy');
/**
 * 
 */
lt.objs.version.check_button = (function lt$objs$version$check_button(){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.button","div.button",-1553026367),"Check for updates"], null));
var seq__10219_10235 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
return lt.objs.deploy.check_version.call(null,true);
});})(e__992__auto__))
], null)));
var chunk__10220_10236 = null;
var count__10221_10237 = (0);
var i__10222_10238 = (0);
while(true){
if((i__10222_10238 < count__10221_10237)){
var vec__10229_10239 = cljs.core._nth.call(null,chunk__10220_10236,i__10222_10238);
var ev__993__auto___10240 = cljs.core.nth.call(null,vec__10229_10239,(0),null);
var func__994__auto___10241 = cljs.core.nth.call(null,vec__10229_10239,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___10240,func__994__auto___10241);


var G__10242 = seq__10219_10235;
var G__10243 = chunk__10220_10236;
var G__10244 = count__10221_10237;
var G__10245 = (i__10222_10238 + (1));
seq__10219_10235 = G__10242;
chunk__10220_10236 = G__10243;
count__10221_10237 = G__10244;
i__10222_10238 = G__10245;
continue;
} else {
var temp__5753__auto___10246 = cljs.core.seq.call(null,seq__10219_10235);
if(temp__5753__auto___10246){
var seq__10219_10247__$1 = temp__5753__auto___10246;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__10219_10247__$1)){
var c__4591__auto___10248 = cljs.core.chunk_first.call(null,seq__10219_10247__$1);
var G__10249 = cljs.core.chunk_rest.call(null,seq__10219_10247__$1);
var G__10250 = c__4591__auto___10248;
var G__10251 = cljs.core.count.call(null,c__4591__auto___10248);
var G__10252 = (0);
seq__10219_10235 = G__10249;
chunk__10220_10236 = G__10250;
count__10221_10237 = G__10251;
i__10222_10238 = G__10252;
continue;
} else {
var vec__10232_10253 = cljs.core.first.call(null,seq__10219_10247__$1);
var ev__993__auto___10254 = cljs.core.nth.call(null,vec__10232_10253,(0),null);
var func__994__auto___10255 = cljs.core.nth.call(null,vec__10232_10253,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___10254,func__994__auto___10255);


var G__10256 = cljs.core.next.call(null,seq__10219_10247__$1);
var G__10257 = null;
var G__10258 = (0);
var G__10259 = (0);
seq__10219_10235 = G__10256;
chunk__10220_10236 = G__10257;
count__10221_10237 = G__10258;
i__10222_10238 = G__10259;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.version.__BEH__on_show_refresh_eds = (function lt$objs$version$__BEH__on_show_refresh_eds(this$){
return lt.object.raise.call(null,new cljs.core.Keyword(null,"ed","ed",436294224).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"show","show",-576705889));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.version","on-show-refresh-eds","lt.objs.version/on-show-refresh-eds",553341837),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.version.__BEH__on_show_refresh_eds);
/**
 * 
 */
lt.objs.version.__BEH__destroy_on_close = (function lt$objs$version$__BEH__destroy_on_close(this$){
return lt.object.destroy_BANG_.call(null,this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.version","destroy-on-close","lt.objs.version/destroy-on-close",-598762938),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1835149582),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.version.__BEH__destroy_on_close);
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.version","version-pane","lt.objs.version/version-pane",55860981),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"version","version",425292698),null], null), null),new cljs.core.Keyword(null,"name","name",1843675177),"Version",new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
var main = lt.objs.editor.pool.create.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"mime","mime",-1846414642),"markdown",new cljs.core.Keyword(null,"content","content",15833224),new cljs.core.Keyword(null,"content","content",15833224).cljs$core$IFn$_invoke$arity$1(lt.objs.files.open_sync.call(null,lt.objs.files.lt_home.call(null,"/core/changelog.md")))], null));
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"ed","ed",436294224),main], null));

return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#version-info","div#version-info",-193956374),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.info","div.info",-1023482078),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dl","dl",-2140151713),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",-368444759),"Light Table version"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",-1340437629),new cljs.core.Keyword(null,"version","version",425292698).cljs$core$IFn$_invoke$arity$1(lt.objs.deploy.version)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",-368444759),"Binary version"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",-1340437629),lt.objs.deploy.binary_version.call(null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",-368444759),"Plugins directory",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",-1340437629),lt.objs.files.lt_user_dir.call(null,"plugins")], null)], null)], null),lt.objs.version.check_button.call(null)], null),lt.objs.editor.__GT_elem.call(null,main)], null);
}));
lt.objs.version.add = (function lt$objs$version$add(){
var v = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.version","version-pane","lt.objs.version/version-pane",55860981));
lt.objs.tabs.add_BANG_.call(null,v);

return lt.objs.tabs.active_BANG_.call(null,v);
});
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"version","version",425292698),new cljs.core.Keyword(null,"desc","desc",2093485764),"App: Light Table version",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (_){
return lt.objs.version.add.call(null);
})], null));

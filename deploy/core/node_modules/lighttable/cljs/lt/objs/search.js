// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.search');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.proc');
goog.require('lt.objs.tabs');
goog.require('lt.objs.files');
goog.require('lt.objs.command');
goog.require('lt.objs.context');
goog.require('lt.objs.notifos');
goog.require('lt.objs.platform');
goog.require('lt.objs.thread');
goog.require('lt.util.dom');
goog.require('lt.objs.workspace');
goog.require('singultus.core');
goog.require('singultus.binding');
goog.require('lt.util.js');
goog.require('lt.util.load');
goog.require('clojure.string');
goog.require('lt.objs.editor');
goog.require('lt.objs.editor.pool');
lt.objs.search.search_BANG_ = lt.objs.thread.thread_STAR_.call(null,(function lt$objs$search$tfun12890(){
console.log("BACKGROUND:");

console.log("ARGS:",arguments);

console.log("ARR:",argsArray(arguments));

var orig__1076__auto__ = argsArray(arguments);
var msg__1077__auto__ = orig__1076__auto__.shift();
var args__1078__auto__ = orig__1076__auto__.map(cljs.reader.read_string);
var raise = (function (obj__1079__auto__,k__1080__auto__,v__1081__auto__){
return _send(obj__1079__auto__,k__1080__auto__,cljs.core.pr_str.call(null,v__1081__auto__),"clj");
});
console.log("MAPARG:",cljs.core.pr_str.call(null,cljs.core.cons.call(null,msg__1077__auto__.obj,args__1078__auto__)),cljs.core.pr_str.call(null,args__1078__auto__));

console.log("MAPARG2:",cljs.core.pr_str.call(null,cljs.core.to_array.call(null,cljs.core.cons.call(null,msg__1077__auto__.obj,args__1078__auto__))),cljs.core.pr_str.call(null,args__1078__auto__));

return (function (obj_id,opts){
var replacer = require([cljs.core.str.cljs$core$IFn$_invoke$arity$1(ltpath),"/core/node_modules/replace"].join(''));
var search = (function (){var temp__5751__auto__ = cljs.core.re_seq.call(null,/^\/(.+)\/$/,new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(opts));
if(cljs.core.truth_(temp__5751__auto__)){
var pattern = temp__5751__auto__;
return (new RegExp(cljs.core.second.call(null,cljs.core.first.call(null,pattern))));
} else {
return new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(opts);
}
})();
var final$ = replacer.call(null,cljs.core.clj__GT_js.call(null,new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"regex","regex",939488856),search,new cljs.core.Keyword(null,"exclude","exclude",-1230250334),(cljs.core.truth_(new cljs.core.Keyword(null,"exclude","exclude",-1230250334).cljs$core$IFn$_invoke$arity$1(opts))?(new RegExp(new cljs.core.Keyword(null,"exclude","exclude",-1230250334).cljs$core$IFn$_invoke$arity$1(opts))):null),new cljs.core.Keyword(null,"recursive","recursive",718885872),true,new cljs.core.Keyword(null,"ignoreCase","ignoreCase",2117309056),(!(cljs.core.boolean$.call(null,cljs.core.re_seq.call(null,/[A-Z]/,new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(opts))))),new cljs.core.Keyword(null,"replacement","replacement",-1836238839),new cljs.core.Keyword(null,"replacement","replacement",-1836238839).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"paths","paths",-1807389588),new cljs.core.Keyword(null,"paths","paths",-1807389588).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"result","result",1415092211),(function (r){
return _send(obj_id,new cljs.core.Keyword(null,"result","result",1415092211),r);
})], null)));
return raise.call(null,obj_id,new cljs.core.Keyword(null,"done-searching","done-searching",236523809),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"total","total",1916810418),final$.totalFiles,new cljs.core.Keyword(null,"time","time",1385887882),final$.time,new cljs.core.Keyword(null,"replace?","replace?",-877816403),cljs.core.boolean$.call(null,new cljs.core.Keyword(null,"replacement","replacement",-1836238839).cljs$core$IFn$_invoke$arity$1(opts))], null));
}).apply(null,cljs.core.to_array.call(null,cljs.core.cons.call(null,msg__1077__auto__.obj,args__1078__auto__)));
}));
lt.objs.search.result_threshold = (500);
if((typeof lt !== 'undefined') && (typeof lt.objs !== 'undefined') && (typeof lt.objs.search !== 'undefined') && (typeof lt.objs.search.location !== 'undefined')){
} else {
lt.objs.search.location = (function (){var method_table__4654__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
var prefer_table__4655__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
var method_cache__4656__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
var cached_hierarchy__4657__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
var hierarchy__4658__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",-1053470341),cljs.core.get_global_hierarchy.call(null));
return (new cljs.core.MultiFn(cljs.core.symbol.call(null,"lt.objs.search","location"),cljs.core.identity,new cljs.core.Keyword(null,"default","default",-1987822328),hierarchy__4658__auto__,method_table__4654__auto__,prefer_table__4655__auto__,method_cache__4656__auto__,cached_hierarchy__4657__auto__));
})();
}
cljs.core._add_method.call(null,lt.objs.search.location,"<workspace>",(function (_){
return cljs.core.apply.call(null,cljs.core.concat,cljs.core.juxt.call(null,new cljs.core.Keyword(null,"folders","folders",44248772),new cljs.core.Keyword(null,"files","files",-472457450)).call(null,lt.objs.workspace.serialize.call(null,cljs.core.deref.call(null,lt.objs.workspace.current_ws))));
}));
cljs.core._add_method.call(null,lt.objs.search.location,new cljs.core.Keyword(null,"default","default",-1987822328),(function (loc){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [loc], null);
}));
lt.objs.search.string__GT_loc = (function lt$objs$search$string__GT_loc(loc_str){
return cljs.core.mapcat.call(null,cljs.core.comp.call(null,lt.objs.search.location,clojure.string.trim),cljs.core.remove.call(null,cljs.core.empty_QMARK_,clojure.string.split.call(null,loc_str,",")));
});
lt.objs.search.__GT_res = (function lt$objs$search$__GT_res(this$){
return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".res",".res",486554361),lt.object.__GT_content.call(null,this$));
});
/**
 * 
 */
lt.objs.search.__GT_entry = (function lt$objs$search$__GT_entry(r,file){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.entry","p.entry",-474806675),singultus.core.raw.call(null,["<span class='line'>",cljs.core.str.cljs$core$IFn$_invoke$arity$1(r.line),"</span><pre>",cljs.core.str.cljs$core$IFn$_invoke$arity$1(r.text),"</pre>"].join(''))], null));
var seq__12891_12907 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (){
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2082525233),file);

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"go-to-line","go-to-line",-880192345),r.line);
});})(e__992__auto__))
], null)));
var chunk__12892_12908 = null;
var count__12893_12909 = (0);
var i__12894_12910 = (0);
while(true){
if((i__12894_12910 < count__12893_12909)){
var vec__12901_12911 = cljs.core._nth.call(null,chunk__12892_12908,i__12894_12910);
var ev__993__auto___12912 = cljs.core.nth.call(null,vec__12901_12911,(0),null);
var func__994__auto___12913 = cljs.core.nth.call(null,vec__12901_12911,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12912,func__994__auto___12913);


var G__12914 = seq__12891_12907;
var G__12915 = chunk__12892_12908;
var G__12916 = count__12893_12909;
var G__12917 = (i__12894_12910 + (1));
seq__12891_12907 = G__12914;
chunk__12892_12908 = G__12915;
count__12893_12909 = G__12916;
i__12894_12910 = G__12917;
continue;
} else {
var temp__5753__auto___12918 = cljs.core.seq.call(null,seq__12891_12907);
if(temp__5753__auto___12918){
var seq__12891_12919__$1 = temp__5753__auto___12918;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12891_12919__$1)){
var c__4591__auto___12920 = cljs.core.chunk_first.call(null,seq__12891_12919__$1);
var G__12921 = cljs.core.chunk_rest.call(null,seq__12891_12919__$1);
var G__12922 = c__4591__auto___12920;
var G__12923 = cljs.core.count.call(null,c__4591__auto___12920);
var G__12924 = (0);
seq__12891_12907 = G__12921;
chunk__12892_12908 = G__12922;
count__12893_12909 = G__12923;
i__12894_12910 = G__12924;
continue;
} else {
var vec__12904_12925 = cljs.core.first.call(null,seq__12891_12919__$1);
var ev__993__auto___12926 = cljs.core.nth.call(null,vec__12904_12925,(0),null);
var func__994__auto___12927 = cljs.core.nth.call(null,vec__12904_12925,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12926,func__994__auto___12927);


var G__12928 = cljs.core.next.call(null,seq__12891_12919__$1);
var G__12929 = null;
var G__12930 = (0);
var G__12931 = (0);
seq__12891_12907 = G__12928;
chunk__12892_12908 = G__12929;
count__12893_12909 = G__12930;
i__12894_12910 = G__12931;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.search.__GT_result_item = (function lt$objs$search$__GT_result_item(r){
var e__992__auto__ = singultus.core.html.call(null,(function (){var file = r.file;
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",723558921),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.path","p.path",-1088130932),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.file","span.file",1923176969),lt.objs.files.basename.call(null,file)], null),"(",lt.objs.files.parent.call(null,file),")"], null),(function (){var iter__4564__auto__ = (function lt$objs$search$__GT_result_item_$_iter__12932(s__12933){
return (new cljs.core.LazySeq(null,(function (){
var s__12933__$1 = s__12933;
while(true){
var temp__5753__auto__ = cljs.core.seq.call(null,s__12933__$1);
if(temp__5753__auto__){
var s__12933__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,s__12933__$2)){
var c__4562__auto__ = cljs.core.chunk_first.call(null,s__12933__$2);
var size__4563__auto__ = cljs.core.count.call(null,c__4562__auto__);
var b__12935 = cljs.core.chunk_buffer.call(null,size__4563__auto__);
if((function (){var i__12934 = (0);
while(true){
if((i__12934 < size__4563__auto__)){
var r__$1 = cljs.core._nth.call(null,c__4562__auto__,i__12934);
cljs.core.chunk_append.call(null,b__12935,lt.objs.search.__GT_entry.call(null,r__$1,file));

var G__12952 = (i__12934 + (1));
i__12934 = G__12952;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12935),lt$objs$search$__GT_result_item_$_iter__12932.call(null,cljs.core.chunk_rest.call(null,s__12933__$2)));
} else {
return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12935),null);
}
} else {
var r__$1 = cljs.core.first.call(null,s__12933__$2);
return cljs.core.cons.call(null,lt.objs.search.__GT_entry.call(null,r__$1,file),lt$objs$search$__GT_result_item_$_iter__12932.call(null,cljs.core.rest.call(null,s__12933__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4564__auto__.call(null,r.results);
})()], null);
})());
var seq__12936_12953 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),cljs.core.PersistentVector.EMPTY));
var chunk__12937_12954 = null;
var count__12938_12955 = (0);
var i__12939_12956 = (0);
while(true){
if((i__12939_12956 < count__12938_12955)){
var vec__12946_12957 = cljs.core._nth.call(null,chunk__12937_12954,i__12939_12956);
var ev__993__auto___12958 = cljs.core.nth.call(null,vec__12946_12957,(0),null);
var func__994__auto___12959 = cljs.core.nth.call(null,vec__12946_12957,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12958,func__994__auto___12959);


var G__12960 = seq__12936_12953;
var G__12961 = chunk__12937_12954;
var G__12962 = count__12938_12955;
var G__12963 = (i__12939_12956 + (1));
seq__12936_12953 = G__12960;
chunk__12937_12954 = G__12961;
count__12938_12955 = G__12962;
i__12939_12956 = G__12963;
continue;
} else {
var temp__5753__auto___12964 = cljs.core.seq.call(null,seq__12936_12953);
if(temp__5753__auto___12964){
var seq__12936_12965__$1 = temp__5753__auto___12964;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12936_12965__$1)){
var c__4591__auto___12966 = cljs.core.chunk_first.call(null,seq__12936_12965__$1);
var G__12967 = cljs.core.chunk_rest.call(null,seq__12936_12965__$1);
var G__12968 = c__4591__auto___12966;
var G__12969 = cljs.core.count.call(null,c__4591__auto___12966);
var G__12970 = (0);
seq__12936_12953 = G__12967;
chunk__12937_12954 = G__12968;
count__12938_12955 = G__12969;
i__12939_12956 = G__12970;
continue;
} else {
var vec__12949_12971 = cljs.core.first.call(null,seq__12936_12965__$1);
var ev__993__auto___12972 = cljs.core.nth.call(null,vec__12949_12971,(0),null);
var func__994__auto___12973 = cljs.core.nth.call(null,vec__12949_12971,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12972,func__994__auto___12973);


var G__12974 = cljs.core.next.call(null,seq__12936_12965__$1);
var G__12975 = null;
var G__12976 = (0);
var G__12977 = (0);
seq__12936_12953 = G__12974;
chunk__12937_12954 = G__12975;
count__12938_12955 = G__12976;
i__12939_12956 = G__12977;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.search.search_box = (function lt$objs$search$search_box(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.search","input.search",-420752064),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Search"], null)], null));
var seq__12978_12994 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (){
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",924243949),this$);

return lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input.search","input.search",-420752064),lt.object.__GT_content.call(null,this$)).select();
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (){
return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",924243949));
});})(e__992__auto__))
], null)));
var chunk__12979_12995 = null;
var count__12980_12996 = (0);
var i__12981_12997 = (0);
while(true){
if((i__12981_12997 < count__12980_12996)){
var vec__12988_12998 = cljs.core._nth.call(null,chunk__12979_12995,i__12981_12997);
var ev__993__auto___12999 = cljs.core.nth.call(null,vec__12988_12998,(0),null);
var func__994__auto___13000 = cljs.core.nth.call(null,vec__12988_12998,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___12999,func__994__auto___13000);


var G__13001 = seq__12978_12994;
var G__13002 = chunk__12979_12995;
var G__13003 = count__12980_12996;
var G__13004 = (i__12981_12997 + (1));
seq__12978_12994 = G__13001;
chunk__12979_12995 = G__13002;
count__12980_12996 = G__13003;
i__12981_12997 = G__13004;
continue;
} else {
var temp__5753__auto___13005 = cljs.core.seq.call(null,seq__12978_12994);
if(temp__5753__auto___13005){
var seq__12978_13006__$1 = temp__5753__auto___13005;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__12978_13006__$1)){
var c__4591__auto___13007 = cljs.core.chunk_first.call(null,seq__12978_13006__$1);
var G__13008 = cljs.core.chunk_rest.call(null,seq__12978_13006__$1);
var G__13009 = c__4591__auto___13007;
var G__13010 = cljs.core.count.call(null,c__4591__auto___13007);
var G__13011 = (0);
seq__12978_12994 = G__13008;
chunk__12979_12995 = G__13009;
count__12980_12996 = G__13010;
i__12981_12997 = G__13011;
continue;
} else {
var vec__12991_13012 = cljs.core.first.call(null,seq__12978_13006__$1);
var ev__993__auto___13013 = cljs.core.nth.call(null,vec__12991_13012,(0),null);
var func__994__auto___13014 = cljs.core.nth.call(null,vec__12991_13012,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13013,func__994__auto___13014);


var G__13015 = cljs.core.next.call(null,seq__12978_13006__$1);
var G__13016 = null;
var G__13017 = (0);
var G__13018 = (0);
seq__12978_12994 = G__13015;
chunk__12979_12995 = G__13016;
count__12980_12996 = G__13017;
i__12981_12997 = G__13018;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.search.replace_box = (function lt$objs$search$replace_box(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.replace","input.replace",-2146729607),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Replace"], null)], null));
var seq__13019_13035 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",1708147217),this$);
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (){
return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",1708147217));
});})(e__992__auto__))
], null)));
var chunk__13020_13036 = null;
var count__13021_13037 = (0);
var i__13022_13038 = (0);
while(true){
if((i__13022_13038 < count__13021_13037)){
var vec__13029_13039 = cljs.core._nth.call(null,chunk__13020_13036,i__13022_13038);
var ev__993__auto___13040 = cljs.core.nth.call(null,vec__13029_13039,(0),null);
var func__994__auto___13041 = cljs.core.nth.call(null,vec__13029_13039,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13040,func__994__auto___13041);


var G__13042 = seq__13019_13035;
var G__13043 = chunk__13020_13036;
var G__13044 = count__13021_13037;
var G__13045 = (i__13022_13038 + (1));
seq__13019_13035 = G__13042;
chunk__13020_13036 = G__13043;
count__13021_13037 = G__13044;
i__13022_13038 = G__13045;
continue;
} else {
var temp__5753__auto___13046 = cljs.core.seq.call(null,seq__13019_13035);
if(temp__5753__auto___13046){
var seq__13019_13047__$1 = temp__5753__auto___13046;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__13019_13047__$1)){
var c__4591__auto___13048 = cljs.core.chunk_first.call(null,seq__13019_13047__$1);
var G__13049 = cljs.core.chunk_rest.call(null,seq__13019_13047__$1);
var G__13050 = c__4591__auto___13048;
var G__13051 = cljs.core.count.call(null,c__4591__auto___13048);
var G__13052 = (0);
seq__13019_13035 = G__13049;
chunk__13020_13036 = G__13050;
count__13021_13037 = G__13051;
i__13022_13038 = G__13052;
continue;
} else {
var vec__13032_13053 = cljs.core.first.call(null,seq__13019_13047__$1);
var ev__993__auto___13054 = cljs.core.nth.call(null,vec__13032_13053,(0),null);
var func__994__auto___13055 = cljs.core.nth.call(null,vec__13032_13053,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13054,func__994__auto___13055);


var G__13056 = cljs.core.next.call(null,seq__13019_13047__$1);
var G__13057 = null;
var G__13058 = (0);
var G__13059 = (0);
seq__13019_13035 = G__13056;
chunk__13020_13036 = G__13057;
count__13021_13037 = G__13058;
i__13022_13038 = G__13059;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.search.replace_all_button = (function lt$objs$search$replace_all_button(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.replace","button.replace",1228073113),"Replace All"], null));
var seq__13060_13076 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1912301393),((function (e__992__auto__){
return (function (e){
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",-1741077306));
});})(e__992__auto__))
], null)));
var chunk__13061_13077 = null;
var count__13062_13078 = (0);
var i__13063_13079 = (0);
while(true){
if((i__13063_13079 < count__13062_13078)){
var vec__13070_13080 = cljs.core._nth.call(null,chunk__13061_13077,i__13063_13079);
var ev__993__auto___13081 = cljs.core.nth.call(null,vec__13070_13080,(0),null);
var func__994__auto___13082 = cljs.core.nth.call(null,vec__13070_13080,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13081,func__994__auto___13082);


var G__13083 = seq__13060_13076;
var G__13084 = chunk__13061_13077;
var G__13085 = count__13062_13078;
var G__13086 = (i__13063_13079 + (1));
seq__13060_13076 = G__13083;
chunk__13061_13077 = G__13084;
count__13062_13078 = G__13085;
i__13063_13079 = G__13086;
continue;
} else {
var temp__5753__auto___13087 = cljs.core.seq.call(null,seq__13060_13076);
if(temp__5753__auto___13087){
var seq__13060_13088__$1 = temp__5753__auto___13087;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__13060_13088__$1)){
var c__4591__auto___13089 = cljs.core.chunk_first.call(null,seq__13060_13088__$1);
var G__13090 = cljs.core.chunk_rest.call(null,seq__13060_13088__$1);
var G__13091 = c__4591__auto___13089;
var G__13092 = cljs.core.count.call(null,c__4591__auto___13089);
var G__13093 = (0);
seq__13060_13076 = G__13090;
chunk__13061_13077 = G__13091;
count__13062_13078 = G__13092;
i__13063_13079 = G__13093;
continue;
} else {
var vec__13073_13094 = cljs.core.first.call(null,seq__13060_13088__$1);
var ev__993__auto___13095 = cljs.core.nth.call(null,vec__13073_13094,(0),null);
var func__994__auto___13096 = cljs.core.nth.call(null,vec__13073_13094,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13095,func__994__auto___13096);


var G__13097 = cljs.core.next.call(null,seq__13060_13088__$1);
var G__13098 = null;
var G__13099 = (0);
var G__13100 = (0);
seq__13060_13076 = G__13097;
chunk__13061_13077 = G__13098;
count__13062_13078 = G__13099;
i__13063_13079 = G__13100;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
/**
 * 
 */
lt.objs.search.location_box = (function lt$objs$search$location_box(this$){
var e__992__auto__ = singultus.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.loc","input.loc",-1347517100),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Locations",new cljs.core.Keyword(null,"value","value",305978217),"<workspace>"], null)], null));
var seq__13101_13117 = cljs.core.seq.call(null,cljs.core.partition.call(null,(2),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",234677911),((function (e__992__auto__){
return (function (){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",-942262160),this$);
});})(e__992__auto__))
,new cljs.core.Keyword(null,"blur","blur",-453500461),((function (e__992__auto__){
return (function (){
return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",-942262160));
});})(e__992__auto__))
], null)));
var chunk__13102_13118 = null;
var count__13103_13119 = (0);
var i__13104_13120 = (0);
while(true){
if((i__13104_13120 < count__13103_13119)){
var vec__13111_13121 = cljs.core._nth.call(null,chunk__13102_13118,i__13104_13120);
var ev__993__auto___13122 = cljs.core.nth.call(null,vec__13111_13121,(0),null);
var func__994__auto___13123 = cljs.core.nth.call(null,vec__13111_13121,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13122,func__994__auto___13123);


var G__13124 = seq__13101_13117;
var G__13125 = chunk__13102_13118;
var G__13126 = count__13103_13119;
var G__13127 = (i__13104_13120 + (1));
seq__13101_13117 = G__13124;
chunk__13102_13118 = G__13125;
count__13103_13119 = G__13126;
i__13104_13120 = G__13127;
continue;
} else {
var temp__5753__auto___13128 = cljs.core.seq.call(null,seq__13101_13117);
if(temp__5753__auto___13128){
var seq__13101_13129__$1 = temp__5753__auto___13128;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__13101_13129__$1)){
var c__4591__auto___13130 = cljs.core.chunk_first.call(null,seq__13101_13129__$1);
var G__13131 = cljs.core.chunk_rest.call(null,seq__13101_13129__$1);
var G__13132 = c__4591__auto___13130;
var G__13133 = cljs.core.count.call(null,c__4591__auto___13130);
var G__13134 = (0);
seq__13101_13117 = G__13131;
chunk__13102_13118 = G__13132;
count__13103_13119 = G__13133;
i__13104_13120 = G__13134;
continue;
} else {
var vec__13114_13135 = cljs.core.first.call(null,seq__13101_13129__$1);
var ev__993__auto___13136 = cljs.core.nth.call(null,vec__13114_13135,(0),null);
var func__994__auto___13137 = cljs.core.nth.call(null,vec__13114_13135,(1),null);
lt.util.dom.on.call(null,e__992__auto__,ev__993__auto___13136,func__994__auto___13137);


var G__13138 = cljs.core.next.call(null,seq__13101_13129__$1);
var G__13139 = null;
var G__13140 = (0);
var G__13141 = (0);
seq__13101_13117 = G__13138;
chunk__13102_13118 = G__13139;
count__13103_13119 = G__13140;
i__13104_13120 = G__13141;
continue;
}
} else {
}
}
break;
}

return e__992__auto__;
});
lt.objs.search.__GT_search_info = (function lt$objs$search$__GT_search_info(this$){
var search = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,this$));
var replace = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".replace",".replace",784859355),lt.object.__GT_content.call(null,this$));
var loc = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".loc",".loc",-1431903218),lt.object.__GT_content.call(null,this$));
return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"search","search",1564939822),lt.util.dom.val.call(null,search),new cljs.core.Keyword(null,"replace","replace",-786587770),lt.util.dom.val.call(null,replace),new cljs.core.Keyword(null,"loc","loc",-584284901),lt.util.dom.val.call(null,loc)], null);
});
/**
 * 
 */
lt.objs.search.__BEH__on_close = (function lt$objs$search$__BEH__on_close(this$){
return lt.objs.tabs.rem_BANG_.call(null,this$);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-close","lt.objs.search/on-close",-561118062),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1835149582),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__on_close);
/**
 * 
 */
lt.objs.search.__BEH__clear_BANG_ = (function lt$objs$search$__BEH__clear_BANG_(this$){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"timeout","timeout",-318625318),null,new cljs.core.Keyword(null,"results","results",-1134170113),[],new cljs.core.Keyword(null,"result-count","result-count",-1827800573),(0),new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",513909342),null,new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",-1652046970),null,new cljs.core.Keyword(null,"position","position",-2011731912),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(0),(-1)], null)], null));

return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","clear!","lt.objs.search/clear!",729186466),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",-144814418),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__clear_BANG_);
/**
 * 
 */
lt.objs.search.__BEH__search_BANG_ = (function lt$objs$search$__BEH__search_BANG_(this$,search_info){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",-144814418));

var info = (function (){var or__4160__auto__ = search_info;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return lt.objs.search.__GT_search_info.call(null,this$);
}
})();
if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(info))){
return null;
} else {
lt.object.merge_BANG_.call(null,this$,info);

lt.objs.notifos.working.call(null,"Searching workspace...");

return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"exclude","exclude",-1230250334),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",-1807389588),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",-584284901).cljs$core$IFn$_invoke$arity$1(info))));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","search!","lt.objs.search/search!",-545162140),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"search!","search!",-612546952),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__search_BANG_);
/**
 * 
 */
lt.objs.search.__BEH__replace_BANG_ = (function lt$objs$search$__BEH__replace_BANG_(this$){
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",-144814418));

var info = lt.objs.search.__GT_search_info.call(null,this$);
if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",1564939822).cljs$core$IFn$_invoke$arity$1(info))){
return null;
} else {
lt.object.merge_BANG_.call(null,this$,info);

lt.objs.notifos.working.call(null,"Replacing all in workspace...");

return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"replacement","replacement",-1836238839),new cljs.core.Keyword(null,"replace","replace",-786587770).cljs$core$IFn$_invoke$arity$1(info),new cljs.core.Keyword(null,"exclude","exclude",-1230250334),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",-1807389588),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",-584284901).cljs$core$IFn$_invoke$arity$1(info))));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","replace!","lt.objs.search/replace!",408410256),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"replace!","replace!",-1402959116),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__replace_BANG_);
/**
 * 
 */
lt.objs.search.__BEH__done_searching = (function lt$objs$search$__BEH__done_searching(this$,info){
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",513909342),(new cljs.core.Keyword(null,"time","time",1385887882).cljs$core$IFn$_invoke$arity$1(info) / (1000)),new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",-1652046970),new cljs.core.Keyword(null,"total","total",1916810418).cljs$core$IFn$_invoke$arity$1(info)], null));

if(cljs.core.truth_(new cljs.core.Keyword(null,"replace?","replace?",-877816403).cljs$core$IFn$_invoke$arity$1(info))){
lt.objs.notifos.done_working.call(null,["Replaced ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))," results in ",cljs.core.str.cljs$core$IFn$_invoke$arity$1((new cljs.core.Keyword(null,"time","time",1385887882).cljs$core$IFn$_invoke$arity$1(info) / (1000))),"s."].join(''));

return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
} else {
return lt.objs.notifos.done_working.call(null,["Found ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))," results searching ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"total","total",1916810418).cljs$core$IFn$_invoke$arity$1(info))," files in ",cljs.core.str.cljs$core$IFn$_invoke$arity$1((new cljs.core.Keyword(null,"time","time",1385887882).cljs$core$IFn$_invoke$arity$1(info) / (1000))),"s."].join(''));
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","done-searching","lt.objs.search/done-searching",1512202037),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"done-searching","done-searching",236523809),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__done_searching);
/**
 * 
 */
lt.objs.search.__BEH__next_BANG_ = (function lt$objs$search$__BEH__next_BANG_(this$){
if((new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > (0))){
var all = new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var vec__13142 = new cljs.core.Keyword(null,"position","position",-2011731912).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var file = cljs.core.nth.call(null,vec__13142,(0),null);
var result = cljs.core.nth.call(null,vec__13142,(1),null);
var cur = (all[file]);
var vec__13145 = ((((result + (1)) >= cur.results.length))?((((file + (1)) >= all.length))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(0),(0)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file + (1)),(0)], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result + (1))], null));
var file__$1 = cljs.core.nth.call(null,vec__13145,(0),null);
var result__$1 = cljs.core.nth.call(null,vec__13145,(1),null);
var neue = (all[file__$1]);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",-2011731912),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));

lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2082525233),neue.file);

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"go-to-line","go-to-line",-880192345),(neue.results[result__$1]).line);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","next!","lt.objs.search/next!",-1908798479),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"next!","next!",977491453),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__next_BANG_);
/**
 * 
 */
lt.objs.search.__BEH__prev_BANG_ = (function lt$objs$search$__BEH__prev_BANG_(this$){
if((new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > (0))){
var all = new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var vec__13148 = new cljs.core.Keyword(null,"position","position",-2011731912).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));
var file = cljs.core.nth.call(null,vec__13148,(0),null);
var result = cljs.core.nth.call(null,vec__13148,(1),null);
var cur = (all[file]);
var vec__13151 = ((((result - (1)) < (0)))?((((file - (1)) < (0)))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(all.length - (1)),((all[(all.length - (1))]).results.length - (1))], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file - (1)),((all[(file - (1))]).results.length - (1))], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result - (1))], null));
var file__$1 = cljs.core.nth.call(null,vec__13151,(0),null);
var result__$1 = cljs.core.nth.call(null,vec__13151,(1),null);
var neue = (new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))[file__$1]);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",-2011731912),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));

lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2082525233),neue.file);

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"go-to-line","go-to-line",-880192345),(neue.results[result__$1]).line);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","prev!","lt.objs.search/prev!",-1591209924),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"prev!","prev!",-1927307736),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__prev_BANG_);
/**
 * 
 */
lt.objs.search.__BEH__on_result = (function lt$objs$search$__BEH__on_result(this$,result){
var total = cljs.core.count.call(null,result.results);
var result__$1 = (function (){var obj13155 = ({"file":result.file,"results":result.results.slice((0),(lt.objs.search.result_threshold - new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))});
return obj13155;
})()
;
if((new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)) < lt.objs.search.result_threshold)){
lt.util.dom.append.call(null,lt.objs.search.__GT_res.call(null,this$),lt.objs.search.__GT_result_item.call(null,result__$1));
} else {
}

new cljs.core.Keyword(null,"results","results",-1134170113).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).push(result__$1);

return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"result-count","result-count",-1827800573)], null),cljs.core._PLUS_,total);
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-result","lt.objs.search/on-result",-1771857130),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"result","result",1415092211),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__on_result);
/**
 * 
 */
lt.objs.search.__BEH__focus = (function lt$objs$search$__BEH__focus(this$){
return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,this$)).focus();
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","focus","lt.objs.search/focus",-101083013),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"focus!","focus!",-1344984927),null,new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.search.__BEH__focus);
lt.objs.search.result_count = (function lt$objs$search$result_count(this$){
return (new cljs.core.List(null,"Found  ",(new cljs.core.List(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1394872991),new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(this$)," results"], null),(new cljs.core.List(null,(((new cljs.core.Keyword(null,"result-count","result-count",-1827800573).cljs$core$IFn$_invoke$arity$1(this$) > lt.objs.search.result_threshold))?(new cljs.core.List(null," (showing ",(new cljs.core.List(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1394872991),lt.objs.search.result_threshold], null),(new cljs.core.List(null,")",null,(1),null)),(2),null)),(3),null)):null),(new cljs.core.List(null,(cljs.core.truth_(new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",513909342).cljs$core$IFn$_invoke$arity$1(this$))?(new cljs.core.List(null," in ",(new cljs.core.List(null,new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",513909342).cljs$core$IFn$_invoke$arity$1(this$),(new cljs.core.List(null,"s",null,(1),null)),(2),null)),(3),null)):null),null,(1),null)),(2),null)),(3),null)),(4),null));
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",1230671354),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"searcher","searcher",1973992822),null], null), null),new cljs.core.Keyword(null,"results","results",-1134170113),[],new cljs.core.Keyword(null,"name","name",1843675177),"Search results",new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
lt.object.add_tags.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((lt.objs.platform.win_QMARK_.call(null))?new cljs.core.Keyword(null,"searcher.win","searcher.win",359313306):new cljs.core.Keyword(null,"searcher.unix","searcher.unix",296730760))], null));

return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.search-results","div.search-results",1319364942),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.res","ul.res",-1425780102)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.searcher","div.searcher",455919193),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),singultus.binding.bound.call(null,this$,lt.objs.search.result_count)], null),lt.objs.search.search_box.call(null,this$),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),lt.objs.search.replace_box.call(null,this$),lt.objs.search.replace_all_button.call(null,this$)], null),lt.objs.search.location_box.call(null,this$)], null)], null);
}));
lt.objs.search.searcher = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",1230671354));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"searcher.search","searcher.search",924243949),new cljs.core.Keyword(null,"desc","desc",2093485764),"Searcher: Execute search",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (info){
var info__$1 = (function (){var or__4160__auto__ = info;
if(cljs.core.truth_(or__4160__auto__)){
return or__4160__auto__;
} else {
return lt.objs.search.__GT_search_info.call(null,lt.objs.search.searcher);
}
})();
return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"search!","search!",-612546952),info__$1);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"searcher.show","searcher.show",2051366452),new cljs.core.Keyword(null,"desc","desc",2093485764),"Searcher: Show",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var temp__5753__auto___13156 = lt.objs.editor.pool.last_active.call(null);
if(cljs.core.truth_(temp__5753__auto___13156)){
var e_13157 = temp__5753__auto___13156;
var temp__5753__auto___13158__$1 = lt.objs.editor.selection.call(null,e_13157);
if(cljs.core.truth_(temp__5753__auto___13158__$1)){
var sel_13159 = temp__5753__auto___13158__$1;
if(clojure.string.blank_QMARK_.call(null,sel_13159)){
} else {
var search_13160 = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",-1559053770),lt.object.__GT_content.call(null,lt.objs.search.searcher));
lt.util.dom.val.call(null,search_13160,sel_13159);
}
} else {
}
} else {
}

return lt.objs.tabs.add_or_focus_BANG_.call(null,lt.objs.search.searcher);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"searcher.next","searcher.next",1902753329),new cljs.core.Keyword(null,"desc","desc",2093485764),"Searcher: Next result",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"next!","next!",977491453));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"searcher.prev","searcher.prev",1512932497),new cljs.core.Keyword(null,"desc","desc",2093485764),"Searcher: Prev result",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"prev!","prev!",-1927307736));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",-1741077306),new cljs.core.Keyword(null,"desc","desc",2093485764),"Searcher: Replace all",new cljs.core.Keyword(null,"hidden","hidden",-312506092),true,new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"replace!","replace!",-1402959116));
})], null));

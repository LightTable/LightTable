// Compiled by ClojureScript 1.10.844 {}
goog.provide('lt.objs.app');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.objs.platform');
goog.require('lt.objs.command');
goog.require('lt.objs.context');
goog.require('clojure.string');
goog.require('lt.util.js');
goog.require('lt.util.dom');
goog.require('lt.util.ipc');
lt.objs.app.remote = require("electron").remote;
lt.objs.app.win = lt.objs.app.remote.getCurrentWindow();
lt.objs.app.frame = require("electron").webFrame;
lt.objs.app.closing = true;
lt.objs.app.default_zoom = (1);
lt.objs.app.app_url = (function lt$objs$app$app_url(){
return window.location.href;
});
lt.objs.app.window_number = (function lt$objs$app$window_number(){
return lt.objs.app.win.id;
});
lt.objs.app.first_window_QMARK_ = (function lt$objs$app$first_window_QMARK_(){
return cljs.core._EQ_.call(null,(1),lt.objs.app.window_number.call(null));
});
lt.objs.app.prevent_close = (function lt$objs$app$prevent_close(){
return (lt.objs.app.closing = false);
});
lt.objs.app.close = (function lt$objs$app$close(var_args){
var G__6647 = arguments.length;
switch (G__6647) {
case 0:
return lt.objs.app.close.cljs$core$IFn$_invoke$arity$0();

break;
case 1:
return lt.objs.app.close.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(lt.objs.app.close.cljs$core$IFn$_invoke$arity$0 = (function (){
return lt.objs.app.close.call(null,false);
}));

(lt.objs.app.close.cljs$core$IFn$_invoke$arity$1 = (function (force_QMARK_){
if(cljs.core.truth_(force_QMARK_)){
lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"closing","closing",-1862893890));

lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"closed","closed",-919675359));

return lt.objs.app.win.destroy();
} else {
return lt.objs.app.win.close();
}
}));

(lt.objs.app.close.cljs$lang$maxFixedArity = 1);

lt.objs.app.refresh = (function lt$objs$app$refresh(){
return window.location.reload(true);
});
lt.objs.app.init = (function lt$objs$app$init(){
lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"deploy","deploy",-2006774212));

lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"pre-init","pre-init",423602427));

lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"init","init",-1875481434));

lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"post-init","post-init",1539646468));

return lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"show","show",-576705889));
});
lt.objs.app.fetch = (function lt$objs$app$fetch(k){
var temp__5753__auto__ = (localStorage[cljs.core.name.call(null,k)]);
if(cljs.core.truth_(temp__5753__auto__)){
var v = temp__5753__auto__;
if(cljs.core.not_EQ_.call(null,"null",v)){
return JSON.parse(v);
} else {
return null;
}
} else {
return null;
}
});
/**
 * Store key and value in localStorage. If value is a string, fetch must be used
 *   to get back the original value from localStorage.
 */
lt.objs.app.store_BANG_ = (function lt$objs$app$store_BANG_(k,v){
return (localStorage[cljs.core.name.call(null,k)] = ((typeof v === 'string')?cljs.core.pr_str.call(null,v):v));
});
lt.objs.app.store_swap_BANG_ = (function lt$objs$app$store_swap_BANG_(k,f){
var neue = f.call(null,lt.objs.app.fetch.call(null,k));
lt.objs.app.store_BANG_.call(null,k,neue);

return neue;
});
lt.objs.app.ensure_greater = (function lt$objs$app$ensure_greater(x,cap){
var x__$1 = ((typeof x === 'string')?parseInt(x):x);
var x__4249__auto__ = x__$1;
var y__4250__auto__ = cap;
return ((x__4249__auto__ > y__4250__auto__) ? x__4249__auto__ : y__4250__auto__);
});
lt.objs.app.zoom_level = (function lt$objs$app$zoom_level(){
if(cljs.core.not_EQ_.call(null,lt.objs.app.frame.getZoomFactor(),(0))){
return lt.objs.app.frame.getZoomFactor();
} else {
return null;
}
});
lt.objs.app.open_window = (function lt$objs$app$open_window(){
return lt.util.ipc.send.call(null,"createWindow");
});
/**
 * 
 */
lt.objs.app.__BEH__refresh = (function lt$objs$app$__BEH__refresh(obj){
(lt.objs.app.closing = true);

lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"reload","reload",863702807));

if(lt.objs.app.closing){
return lt.objs.app.refresh.call(null);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","refresh","lt.objs.app/refresh",1475516336),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh","refresh",1947415525),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__refresh);
/**
 * 
 */
lt.objs.app.__BEH__close_BANG_ = (function lt$objs$app$__BEH__close_BANG_(this$){
(lt.objs.app.closing = true);

lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"close","close",1835149582));

if(lt.objs.app.closing){
return lt.objs.app.close.call(null,true);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","close!","lt.objs.app/close!",-802150745),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",-2079310498),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__close_BANG_);
/**
 * 
 */
lt.objs.app.__BEH__notify_init_window = (function lt$objs$app$__BEH__notify_init_window(this$){
return lt.util.ipc.send.call(null,"initWindow",lt.objs.app.window_number.call(null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","notify-init-window","lt.objs.app/notify-init-window",-202420059),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",-1875481434),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__notify_init_window);
/**
 * 
 */
lt.objs.app.__BEH__store_position_on_close = (function lt$objs$app$__BEH__store_position_on_close(this$){
if(cljs.core.truth_(lt.objs.app.win.isFullScreen())){
} else {
var vec__6649_6655 = lt.objs.app.win.getSize();
var width_6656 = cljs.core.nth.call(null,vec__6649_6655,(0),null);
var height_6657 = cljs.core.nth.call(null,vec__6649_6655,(1),null);
lt.objs.app.store_BANG_.call(null,new cljs.core.Keyword(null,"width","width",-384071477),width_6656);

lt.objs.app.store_BANG_.call(null,new cljs.core.Keyword(null,"height","height",1025178622),height_6657);

var vec__6652_6658 = lt.objs.app.win.getPosition();
var x_6659 = cljs.core.nth.call(null,vec__6652_6658,(0),null);
var y_6660 = cljs.core.nth.call(null,vec__6652_6658,(1),null);
lt.objs.app.store_BANG_.call(null,new cljs.core.Keyword(null,"x","x",2099068185),x_6659);

lt.objs.app.store_BANG_.call(null,new cljs.core.Keyword(null,"y","y",-1757859776),y_6660);
}

return (localStorage.fullscreen = lt.objs.app.win.isFullScreen());
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","store-position-on-close","lt.objs.app/store-position-on-close",382665886),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"closed","closed",-919675359),null,new cljs.core.Keyword(null,"refresh","refresh",1947415525),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__store_position_on_close);
/**
 * 
 */
lt.objs.app.__BEH__restore_fullscreen = (function lt$objs$app$__BEH__restore_fullscreen(this$){
if(cljs.core._EQ_.call(null,localStorage.fullscreen,"true")){
return lt.objs.app.win.setFullScreen(true);
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","restore-fullscreen","lt.objs.app/restore-fullscreen",529140806),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__restore_fullscreen);
/**
 * 
 */
lt.objs.app.__BEH__restore_position_on_init = (function lt$objs$app$__BEH__restore_position_on_init(this$){
if(cljs.core.truth_(localStorage.width)){
lt.objs.app.win.setSize(lt.objs.app.ensure_greater.call(null,localStorage.width,(400)),lt.objs.app.ensure_greater.call(null,localStorage.height,(400)));

return lt.objs.app.win.setPosition(lt.objs.app.ensure_greater.call(null,localStorage.x,(0)),lt.objs.app.ensure_greater.call(null,localStorage.y,(0)));
} else {
return null;
}
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","restore-position-on-init","lt.objs.app/restore-position-on-init",1513785414),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__restore_position_on_init);
/**
 * 
 */
lt.objs.app.__BEH__on_show_bind_navigate = (function lt$objs$app$__BEH__on_show_bind_navigate(this$){
return lt.util.dom.on.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"#canvas","#canvas",-1325731096)),new cljs.core.Keyword(null,"click","click",1912301393),(function (e){
if(((cljs.core._EQ_.call(null,e.target.nodeName,"A")) && (cljs.core.not.call(null,e.defaultPrevented)))){
lt.util.dom.prevent.call(null,e);

var temp__5753__auto__ = e.target.href;
if(cljs.core.truth_(temp__5753__auto__)){
var href = temp__5753__auto__;
lt.objs.platform.open_url.call(null,href);

return lt.objs.app.win.focus();
} else {
return null;
}
} else {
return null;
}
}));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","on-show-bind-navigate","lt.objs.app/on-show-bind-navigate",-728066556),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__on_show_bind_navigate);
/**
 * 
 */
lt.objs.app.__BEH__track_focus = (function lt$objs$app$__BEH__track_focus(this$){
return lt.objs.app.store_BANG_.call(null,new cljs.core.Keyword(null,"focusedWindow","focusedWindow",-121610640),lt.objs.app.window_number.call(null));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","track-focus","lt.objs.app/track-focus",307139399),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"focus","focus",234677911),null,new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__track_focus);
/**
 * 
 */
lt.objs.app.__BEH__focus_class = (function lt$objs$app$__BEH__focus_class(this$){
lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",-2049205669)),new cljs.core.Keyword(null,"active","active",1895962068));

return lt.util.dom.remove_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",-2049205669)),new cljs.core.Keyword(null,"inactive","inactive",-306247616));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","focus-class","lt.objs.app/focus-class",774499170),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"focus","focus",234677911),null,new cljs.core.Keyword(null,"show","show",-576705889),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__focus_class);
/**
 * 
 */
lt.objs.app.__BEH__blur_class = (function lt$objs$app$__BEH__blur_class(this$){
lt.util.dom.remove_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",-2049205669)),new cljs.core.Keyword(null,"active","active",1895962068));

return lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",-2049205669)),new cljs.core.Keyword(null,"inactive","inactive",-306247616));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","blur-class","lt.objs.app/blur-class",1994929762),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"blur","blur",-453500461),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__blur_class);
lt.objs.app.run_commands = (function lt$objs$app$run_commands(var_args){
var args__4777__auto__ = [];
var len__4771__auto___6667 = arguments.length;
var i__4772__auto___6668 = (0);
while(true){
if((i__4772__auto___6668 < len__4771__auto___6667)){
args__4777__auto__.push((arguments[i__4772__auto___6668]));

var G__6669 = (i__4772__auto___6668 + (1));
i__4772__auto___6668 = G__6669;
continue;
} else {
}
break;
}

var argseq__4778__auto__ = ((((1) < args__4777__auto__.length))?(new cljs.core.IndexedSeq(args__4777__auto__.slice((1)),(0),null)):null);
return lt.objs.app.run_commands.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4778__auto__);
});

(lt.objs.app.run_commands.cljs$core$IFn$_invoke$arity$variadic = (function (this$,commands){
if(cljs.core.seq.call(null,commands)){
var commands__$1 = ((cljs.core.vector_QMARK_.call(null,cljs.core.first.call(null,commands)))?cljs.core.first.call(null,commands):commands);
var seq__6663 = cljs.core.seq.call(null,commands__$1);
var chunk__6664 = null;
var count__6665 = (0);
var i__6666 = (0);
while(true){
if((i__6666 < count__6665)){
var c = cljs.core._nth.call(null,chunk__6664,i__6666);
if(cljs.core.coll_QMARK_.call(null,c)){
cljs.core.apply.call(null,lt.objs.command.exec_BANG_,c);
} else {
lt.objs.command.exec_BANG_.call(null,c);
}


var G__6670 = seq__6663;
var G__6671 = chunk__6664;
var G__6672 = count__6665;
var G__6673 = (i__6666 + (1));
seq__6663 = G__6670;
chunk__6664 = G__6671;
count__6665 = G__6672;
i__6666 = G__6673;
continue;
} else {
var temp__5753__auto__ = cljs.core.seq.call(null,seq__6663);
if(temp__5753__auto__){
var seq__6663__$1 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_.call(null,seq__6663__$1)){
var c__4591__auto__ = cljs.core.chunk_first.call(null,seq__6663__$1);
var G__6674 = cljs.core.chunk_rest.call(null,seq__6663__$1);
var G__6675 = c__4591__auto__;
var G__6676 = cljs.core.count.call(null,c__4591__auto__);
var G__6677 = (0);
seq__6663 = G__6674;
chunk__6664 = G__6675;
count__6665 = G__6676;
i__6666 = G__6677;
continue;
} else {
var c = cljs.core.first.call(null,seq__6663__$1);
if(cljs.core.coll_QMARK_.call(null,c)){
cljs.core.apply.call(null,lt.objs.command.exec_BANG_,c);
} else {
lt.objs.command.exec_BANG_.call(null,c);
}


var G__6678 = cljs.core.next.call(null,seq__6663__$1);
var G__6679 = null;
var G__6680 = (0);
var G__6681 = (0);
seq__6663 = G__6678;
chunk__6664 = G__6679;
count__6665 = G__6680;
i__6666 = G__6681;
continue;
}
} else {
return null;
}
}
break;
}
} else {
return null;
}
}));

(lt.objs.app.run_commands.cljs$lang$maxFixedArity = (1));

/** @this {Function} */
(lt.objs.app.run_commands.cljs$lang$applyTo = (function (seq6661){
var G__6662 = cljs.core.first.call(null,seq6661);
var seq6661__$1 = cljs.core.next.call(null,seq6661);
var self__4758__auto__ = this;
return self__4758__auto__.cljs$core$IFn$_invoke$arity$variadic(G__6662,seq6661__$1);
}));

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","run-pre-init","lt.objs.app/run-pre-init",-414554600),new cljs.core.Keyword(null,"desc","desc",2093485764),"App: Run commands before init",new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"commands",new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"list","list",765357683),new cljs.core.Keyword(null,"items","items",1031954938),lt.objs.command.completions], null)], null),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"user","user",1532431356),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"pre-init","pre-init",423602427),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.run_commands);
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","run-on-init","lt.objs.app/run-on-init",1097415811),new cljs.core.Keyword(null,"desc","desc",2093485764),"App: Run commands on init",new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"commands",new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"list","list",765357683),new cljs.core.Keyword(null,"items","items",1031954938),lt.objs.command.completions], null)], null),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"user","user",1532431356),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",-1875481434),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.run_commands);
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","run-post-init","lt.objs.app/run-post-init",-634164351),new cljs.core.Keyword(null,"desc","desc",2093485764),"App: Run commands after init",new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1718410804),"commands",new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"list","list",765357683),new cljs.core.Keyword(null,"items","items",1031954938),lt.objs.command.completions], null)], null),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"user","user",1532431356),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"post-init","post-init",1539646468),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.run_commands);
/**
 * 
 */
lt.objs.app.__BEH__set_default_zoom_level = (function lt$objs$app$__BEH__set_default_zoom_level(this$,default$){
(lt.objs.app.default_zoom = default$);

return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"window.zoom-reset","window.zoom-reset",903555068));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","set-default-zoom-level","lt.objs.app/set-default-zoom-level",-1395969717),new cljs.core.Keyword(null,"desc","desc",2093485764),"App: Set the default zoom level",new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1718410804),"default-zoom-level",new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"number","number",1570378438)], null)], null),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"user","user",1532431356),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",-1875481434),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__set_default_zoom_level);
/**
 * 
 */
lt.objs.app.__BEH__add_platform_class = (function lt$objs$app$__BEH__add_platform_class(this$){
return lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",-2049205669)),cljs.core.name.call(null,lt.objs.platform.platform));
});

lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","add-platform-class","lt.objs.app/add-platform-class",-761036078),new cljs.core.Keyword(null,"triggers","triggers",-1443678770),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",-1875481434),null], null), null),new cljs.core.Keyword(null,"reaction","reaction",490869788),lt.objs.app.__BEH__add_platform_class);
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.app","app","lt.objs.app/app",-890273632),new cljs.core.Keyword(null,"tags","tags",1771418977),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"window","window",724519534),null,new cljs.core.Keyword(null,"app","app",-560961707),null], null), null),new cljs.core.Keyword(null,"delays","delays",1780592582),(0),new cljs.core.Keyword(null,"init","init",-1875481434),(function (this$){
return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"app","app",-560961707),this$);
}));
lt.objs.app.app = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.app","app","lt.objs.app/app",-890273632));
lt.util.ipc.on.call(null,"app",(function (p1__6683_SHARP_,p2__6682_SHARP_){
return lt.object.raise.call(null,lt.objs.app.app,cljs.core.keyword.call(null,p2__6682_SHARP_));
}));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.new","window.new",-572789814),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Open new window",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
var w = lt.objs.app.open_window.call(null);
return null;
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.close","window.close",-983383177),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Close window",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"close!","close!",-2079310498));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.zoom-in","window.zoom-in",162229992),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Zoom in",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.frame.setZoomFactor((lt.objs.app.frame.getZoomFactor() + 0.2));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.zoom-out","window.zoom-out",-763872352),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Zoom out",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
if((lt.objs.app.frame.getZoomFactor() > (0))){
return lt.objs.app.frame.setZoomFactor((lt.objs.app.frame.getZoomFactor() - 0.2));
} else {
return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.zoom-reset","window.zoom-reset",903555068),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Zoom reset",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.frame.setZoomFactor(lt.objs.app.default_zoom);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.fullscreen","window.fullscreen",-881944320),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Toggle fullscreen",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.win.setFullScreen(cljs.core.not.call(null,lt.objs.app.win.isFullScreen()));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.minimize","window.minimize",-1025606910),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Minimize",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.win.minimize();
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Keyword(null,"window.maximize","window.maximize",-1691981841),new cljs.core.Keyword(null,"desc","desc",2093485764),"Window: Maximize",new cljs.core.Keyword(null,"exec","exec",1625568743),(function (){
return lt.objs.app.win.maximize();
})], null));

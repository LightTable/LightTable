<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>lt.object documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">LightTable</span> <span class="project-version">0.8.0-alpha</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lt</span></div></div></li><li class="depth-2 branch"><a href="lt.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2 branch current"><a href="lt.object.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>object</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>objs</span></div></div></li><li class="depth-3 branch"><a href="lt.objs.command.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>command</span></div></a></li><li class="depth-3"><a href="lt.objs.editor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>editor</span></div></a></li><li class="depth-4"><a href="lt.objs.editor.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-3 branch"><a href="lt.objs.files.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>files</span></div></a></li><li class="depth-3"><a href="lt.objs.notifos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notifos</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="lt.object.html#var-*behavior-meta*"><div class="inner"><span>*behavior-meta*</span></div></a></li><li class="depth-1"><a href="lt.object.html#var--.3Econtent"><div class="inner"><span>-&gt;content</span></div></a></li><li class="depth-1"><a href="lt.object.html#var--.3Eid"><div class="inner"><span>-&gt;id</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-add-tags"><div class="inner"><span>add-tags</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-behaviors"><div class="inner"><span>behaviors</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-by-id"><div class="inner"><span>by-id</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-by-tag"><div class="inner"><span>by-tag</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-call-behavior-reaction"><div class="inner"><span>call-behavior-reaction</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-destroy.21"><div class="inner"><span>destroy!</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-has-tag.3F"><div class="inner"><span>has-tag?</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-instances"><div class="inner"><span>instances</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-instances-by-type"><div class="inner"><span>instances-by-type</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-merge.21"><div class="inner"><span>merge!</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-negated-tags"><div class="inner"><span>negated-tags</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-obj-id"><div class="inner"><span>obj-id</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-object*"><div class="inner"><span>object*</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-object-defs"><div class="inner"><span>object-defs</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-raise"><div class="inner"><span>raise</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-raise-reduce"><div class="inner"><span>raise-reduce</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-remove-tags"><div class="inner"><span>remove-tags</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-tag-behaviors"><div class="inner"><span>tag-behaviors</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-tags"><div class="inner"><span>tags</span></div></a></li><li class="depth-1"><a href="lt.object.html#var-update.21"><div class="inner"><span>update!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">lt.object</h1><div class="doc"><pre class="plaintext">Define core of BOT architecture and provide fns for manipulating objects,
behaviors and tags</pre></div><div class="public anchor" id="var-*behavior-meta*"><h3>*behavior-meta*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Metadata of current behavior set during raise and raise-reduce
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L39">view source</a></div></div><div class="public anchor" id="var--.3Econtent"><h3>-&gt;content</h3><div class="usage"><code>(-&gt;content obj)</code></div><div class="doc"><pre class="plaintext">Return DOM content associated with object
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L301">view source</a></div></div><div class="public anchor" id="var--.3Eid"><h3>-&gt;id</h3><div class="usage"><code>(-&gt;id obj)</code></div><div class="doc"><pre class="plaintext">Return id of given object
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L49">view source</a></div></div><div class="public anchor" id="var-add-tags"><h3>add-tags</h3><div class="usage"><code>(add-tags obj ts)</code></div><div class="doc"><pre class="plaintext">Add tags to given object and updates effected behaviors and listeners.
::tags-added trigger is raised on object after update</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L394">view source</a></div></div><div class="public anchor" id="var-behaviors"><h3>behaviors</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Map of behavior names to behaviors created by macros/behavior
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L23">view source</a></div></div><div class="public anchor" id="var-by-id"><h3>by-id</h3><div class="usage"><code>(by-id id)</code></div><div class="doc"><pre class="plaintext">Find object by its unique numerical id
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L372">view source</a></div></div><div class="public anchor" id="var-by-tag"><h3>by-tag</h3><div class="usage"><code>(by-tag tag)</code></div><div class="doc"><pre class="plaintext">Find objects that have given tag
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L378">view source</a></div></div><div class="public anchor" id="var-call-behavior-reaction"><h3>call-behavior-reaction</h3><div class="usage"><code>(call-behavior-reaction id &amp; args)</code></div><div class="doc"><pre class="plaintext">For a given behavior keyword id, call its :reaction fn with given args
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L152">view source</a></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create obj-name &amp; args)</code></div><div class="doc"><pre class="plaintext">Create object given keyword name of object template or an object template
and key-value pairs. See object* for special keys.
During object creation the following happens to object in order:

* :init fn is called with given args
* :object.instant trigger is raised
* :init trigger is raised</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L321">view source</a></div></div><div class="public anchor" id="var-destroy.21"><h3>destroy!</h3><div class="usage"><code>(destroy! obj)</code></div><div class="doc"><pre class="plaintext">Destroy object by calling its :destroy trigger, removing it from
cache and removing associated DOM content</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L306">view source</a></div></div><div class="public anchor" id="var-has-tag.3F"><h3>has-tag?</h3><div class="usage"><code>(has-tag? obj tag)</code></div><div class="doc"><pre class="plaintext">Return truthy if object has tag
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L389">view source</a></div></div><div class="public anchor" id="var-instances"><h3>instances</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Map of object ids to objects created by object/create
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L19">view source</a></div></div><div class="public anchor" id="var-instances-by-type"><h3>instances-by-type</h3><div class="usage"><code>(instances-by-type type)</code></div><div class="doc"><pre class="plaintext">Return all objects for given type (template name)
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L188">view source</a></div></div><div class="public anchor" id="var-merge.21"><h3>merge!</h3><div class="usage"><code>(merge! obj m)</code></div><div class="doc"><pre class="plaintext">Merge map into object
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L193">view source</a></div></div><div class="public anchor" id="var-negated-tags"><h3>negated-tags</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Map of tags to dissociated lists of behaviors e.g. :-behavior
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L35">view source</a></div></div><div class="public anchor" id="var-obj-id"><h3>obj-id</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Counter to guarantee unique object ids
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L15">view source</a></div></div><div class="public anchor" id="var-object*"><h3>object*</h3><div class="usage"><code>(object* name &amp; r)</code></div><div class="doc"><pre class="plaintext">Create object template (type) given keyword name and key-value pairs.
These pairs serve as default attributes for an object. Following keys
have special meaning:

* :behaviors - Set of object&apos;s behaviors
* :tags - Set of object&apos;s tags
* :triggers - Set of object&apos;s triggers
* :init - Init fn called when object is created. Fn&apos;s return value
          is hiccup html content and saved to :content
* :listeners (internal) - Map of triggers to vectors of behaviors</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L222">view source</a></div></div><div class="public anchor" id="var-object-defs"><h3>object-defs</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Map of object template keys to template maps created by object/object*
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L27">view source</a></div></div><div class="public anchor" id="var-raise"><h3>raise</h3><div class="usage"><code>(raise obj k &amp; args)</code></div><div class="doc"><pre class="plaintext">Invoke object&apos;s behavior fns for given trigger. Args are passed to behavior fns
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L146">view source</a></div></div><div class="public anchor" id="var-raise-reduce"><h3>raise-reduce</h3><div class="usage"><code>(raise-reduce obj k start &amp; args)</code></div><div class="doc"><pre class="plaintext">Reduce over invoked object&apos;s behavior fns for given trigger. Start
is initial value for reduce and any args are passed to behavior fn</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L263">view source</a></div></div><div class="public anchor" id="var-remove-tags"><h3>remove-tags</h3><div class="usage"><code>(remove-tags obj ts)</code></div><div class="doc"><pre class="plaintext">Remove tags from given object and updates effected behaviors and listeners.
::tags-removed trigger is raised on object after update</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L404">view source</a></div></div><div class="public anchor" id="var-tag-behaviors"><h3>tag-behaviors</h3><div class="usage"><code>(tag-behaviors tag behs)</code></div><div class="doc"><pre class="plaintext">Associate behaviors to given tag and refresh objects with given tag
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L419">view source</a></div></div><div class="public anchor" id="var-tags"><h3>tags</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Map of tags to associated lists of behaviors
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L31">view source</a></div></div><div class="public anchor" id="var-update.21"><h3>update!</h3><div class="usage"><code>(update! obj &amp; r)</code></div><div class="doc"><pre class="plaintext">Update object with update-in with [:key], fn and args
</pre></div><div class="src-link"><a href="https://github.com/LightTable/LightTable/blob/0.8.0-alpha/src/lt/object.cljs#L285">view source</a></div></div></div></body></html>